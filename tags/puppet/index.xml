<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Puppet on Martin Liu's Blog</title><link>https://martinliu.cn/tags/puppet/</link><description>Recent content in Puppet on Martin Liu's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 09 Oct 2022 21:44:15 +0800</lastBuildDate><atom:link href="https://martinliu.cn/tags/puppet/index.xml" rel="self" type="application/rss+xml"/><item><title>在 RHEL 7 上安装 Foreman 1.8</title><link>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</link><pubDate>Tue, 16 Jun 2015 16:25:34 +0000</pubDate><guid>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</guid><description>&lt;p>首先安装 RHEL7 使用光盘安装最小化系统，安装完成之后，关闭防火墙和 SELinux（为了测试方便），配置主机名为 FQDN 格式，如 fm1.8.xenlab.com； 加本机的主机名解析到/etc/hosts 文集中。之后注册到 RHN。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 ~]# subscription-manager register
[root@fm18 ~]# subscription-manager attach  &amp;ndash;auto
[root@fm18 ~]# subscription-manager repos &amp;ndash;disable=&amp;quot;*&amp;quot;
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-optional-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-server-rhscl-7-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-rpms
[root@fm18 ~]# rpm -ivh &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum clean all
[root@fm18 ~]# yum makecache
[root@fm18 ~]# yum update -y
[root@fm18 ~]# reboot
[root@fm18 ~]# yum install foreman-installer&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>安装 foreman-installer 可能会出现的错误是 ruby 包依赖的问题，导致这个问题的原因可能有：网速太满导致的 yum meta-data 失效，国外的 epel 源下载失败等。解决方法是：使用国内较快的 epel 源，在安装 foreman-installer 前，清除 yum 缓存，重新建立 yum 原数据缓存。&lt;/p>
&lt;p>我的测试机的 yum 源配置如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# yum repolist
Loaded plugins: fastestmirror, product-id, subscription-manager
Loading mirror speeds from cached hostfile&lt;/p>
&lt;ul>
&lt;li>epel: mirrors.neusoft.edu.cn
repo id repo name status
epel/x86_64 Extra Packages for Enterprise Linux 7 - x86_64 8,076
foreman/x86_64 Foreman 1.8 379
foreman-plugins/x86_64 Foreman plugins 1.8 199
puppetlabs-deps/x86_64 Puppet Labs Dependencies El 7 - x86_64 17
puppetlabs-products/x86_64 Puppet Labs Products El 7 - x86_64 175
rhel-7-server-optional-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server - Optional (RPMs) 5,832
rhel-7-server-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server (RPMs) 7,036
rhel-server-rhscl-7-rpms/7Server/x86_64 Red Hat Software Collections RPMs for Red Hat Enterprise Linux 7 Server 3,596
repolist: 25,310
[root@fm18 yum.repos.d]# cat /etc/yum.repos.d/epel.repo
[epel]
name=Extra Packages for Enterprise Linux 7 - $basearch
baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=1
gpgcheck=1
gpgkey=https://fedoraproject.org/static/352C64E5.txt&lt;/li>
&lt;/ul>
&lt;p>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
[epel-debuginfo]
name=Extra Packages for Enterprise Linux 7 - $basearch - Debug
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/$basearch/debug
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1&lt;/p>
&lt;p>[epel-source]
name=Extra Packages for Enterprise Linux 7 - $basearch - Source
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/SRPMS
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上应该是安装 foreman-installer 宝过的攻略了。接下来该安装 foreman 的各个组建和插件了。使用 foreman-installer -i 发现是个不错的方法。还可以顺便了解一下当前 foreman 版本的各个主要功能项，如下所示：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# foreman-installer -i
Welcome to the Foreman installer!&lt;/p>
&lt;hr>
&lt;p>This wizard will gather all required information. You can change any parameter
to your needs.&lt;/p>
&lt;p>Ready to start? (y/n) y&lt;/p>
&lt;p>Main Config Menu&lt;/p>
&lt;ol>
&lt;li>[✓] Configure foreman&lt;/li>
&lt;li>[✓] Configure foreman_cli&lt;/li>
&lt;li>[✗] Configure foreman_compute_ec2&lt;/li>
&lt;li>[✗] Configure foreman_compute_gce&lt;/li>
&lt;li>[✓] Configure foreman_compute_libvirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_openstack&lt;/li>
&lt;li>[✓] Configure foreman_compute_ovirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_rackspace&lt;/li>
&lt;li>[✗] Configure foreman_compute_vmware&lt;/li>
&lt;li>[✓] Configure foreman_plugin_bootdisk&lt;/li>
&lt;li>[✗] Configure foreman_plugin_chef&lt;/li>
&lt;li>[✓] Configure foreman_plugin_default_hostgroup&lt;/li>
&lt;li>[✗] Configure foreman_plugin_digitalocean&lt;/li>
&lt;li>[✓] Configure foreman_plugin_discovery&lt;/li>
&lt;li>[✗] Configure foreman_plugin_docker&lt;/li>
&lt;li>[✗] Configure foreman_plugin_hooks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_plugin_ovirt_provision&lt;/li>
&lt;li>[✗] Configure foreman_plugin_puppetdb&lt;/li>
&lt;li>[✗] Configure foreman_plugin_salt&lt;/li>
&lt;li>[✓] Configure foreman_plugin_setup&lt;/li>
&lt;li>[✓] Configure foreman_plugin_tasks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_templates&lt;/li>
&lt;li>[✓] Configure foreman_proxy&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_abrt&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_chef&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_pulp&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_salt&lt;/li>
&lt;li>[✓] Configure puppet&lt;/li>
&lt;li>Display current config&lt;/li>
&lt;li>Save and run&lt;/li>
&lt;li>Cancel run without Saving
Choose an option from the menu&amp;hellip;&lt;/li>
&lt;/ol>
&lt;p>[root@fm18 yum.repos.d]# puppet agent &amp;ndash;test
Info: Retrieving pluginfacts
Info: Retrieving plugin
Info: Caching catalog for fm18.xenlab.com
Info: Applying configuration version &amp;lsquo;1434466089&amp;rsquo;
Notice: Finished catalog run in 0.21 seconds
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>输入数字即可进入每个选项打开和关闭这个功能和服务，这个是对 foreman 的功能配置管理，不光是首次安装可以使用，以后的服务器功能变更也可以这么作，这个对我这样不感冒 answerfile 的人来说甚好。如果是首次安装，可以什么都不选择，来一个说装就装的默认安装也不错。安装完全成功之后，就会显示登陆网址和 管理与密码等信息。用初始的 admin 密码登陆后，修改密码，你的全新的 foreman 就安装成功了。注意在，运行 foreman-installer 过程中是需要联网的，安装过程会按照需求，下载所需要的组建包，例如数据库和 web 服务器等等其它必须的包。登陆后界面如下：&lt;/p>
&lt;p>[gallery size=&amp;ldquo;medium&amp;rdquo; link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53781,53782,53783&amp;rdquo;]&lt;/p>
&lt;p>接下来需要作配置自动化的测试了，我做了一个录像，通过一个简单的示例来说明，如何在 foreman 中测试 pupput module。过程中我使用一个最简单的 /etc/motd 文件的配置的类。演示的内容涉及：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: check-square&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>安装 puppet module 到生产环境中&lt;/p>
&lt;/li>
&lt;li>
&lt;p>导入并且定制 puppet 类的功能&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试和验证 puppet 类是否工作正常&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>视频下载：[su_button url=&amp;ldquo;http://pan.baidu.com/s/1ntpBXfN&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; background=&amp;quot;#cccccc&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]下载在这里[/su_button]&lt;/p>
&lt;p>本文参考文档：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="http://theforeman.org/manuals/1.8/index.htm" target="_blank" rel="noopener"
>http://theforeman.org/manuals/1.8/index.htm&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://itgeeker.net/centos-7-epel-china-mirror-repository/" target="_blank" rel="noopener"
>http://itgeeker.net/centos-7-epel-china-mirror-repository/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>在CentOS 7上安装部署Katello2.2</title><link>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</link><pubDate>Sun, 07 Jun 2015 16:35:05 +0000</pubDate><guid>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</guid><description>&lt;p>Katello 的系统架构如下图：&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/katello-arch-diagram.png"
loading="lazy"
alt="katello-arch-diagram"
>&lt;/p>
&lt;p>Katell 系统是一个复合型开源项目，是 Pulp, Candlepin 和 Foreman 的组合。Foreman 默认使用 Puppet 作配置管理。&lt;/p>
&lt;p>它的安装文档见官方手册：&lt;a class="link" href="http://www.katello.org/docs/2.2/installation/index.html" target="_blank" rel="noopener"
>http://www.katello.org/docs/2.2/installation/index.html&lt;/a>&lt;/p>
&lt;p>为了简化安装，请下在本站提供的 CentOS7 完美安装模板。使用它来创建一个虚拟机，6GB 内存，2VCPU；网络上为了方便，请在 virt-manger 中新建如下所示的网络。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/QEMU-KVM-Connection-Details_006.png"
loading="lazy"
alt="QEMU-KVM Connection Details_006"
>&lt;/p>
&lt;p>虚拟机启动之后，确保 host 能正常联网。启动刚才创建的虚拟机，配置好 IP，ping 外网网站，确保它能正常联网即可。其它安装命令如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>yum -y localinstall &lt;a class="link" href="http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm" target="_blank" rel="noopener"
>http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&lt;/a>
yum -y install foreman-release-scl&lt;/p>
&lt;p>yum -y install katello&lt;/p>
&lt;p>katello-installer -v &lt;br>
&amp;ndash;foreman-admin-username admin &lt;br>
&amp;ndash;foreman-admin-password smartvm &lt;br>
&amp;ndash;capsule-dns true &lt;br>
&amp;ndash;capsule-dns-interface eth0 &lt;br>
&amp;ndash;capsule-dns-zone xenlab.com &lt;br>
&amp;ndash;capsule-dns-forwarders 192.168.10.1 &lt;br>
&amp;ndash;capsule-dns-reverse 10.168.192.in-addr.arpa &lt;br>
&amp;ndash;capsule-dhcp true &lt;br>
&amp;ndash;capsule-dhcp-interface eth0 &lt;br>
&amp;ndash;capsule-dhcp-range &amp;ldquo;192.168.10.100 192.168.10.240&amp;rdquo; &lt;br>
&amp;ndash;capsule-dhcp-gateway 192.168.10.1 &lt;br>
&amp;ndash;capsule-dhcp-nameservers 192.168.10.10 &lt;br>
&amp;ndash;capsule-tftp true &lt;br>
&amp;ndash;capsule-tftp-servername $(hostname) &lt;br>
&amp;ndash;capsule-puppet true &lt;br>
&amp;ndash;capsule-puppetca true&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上的安装命令如果成功，katello 服务器将具有一下功能：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Foreman 服务器：用于自动化网络安装 linux 系统&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Puppet Master 服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Repos 管理服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DNS，DHCP，PXE 服务器&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>安装成功之后，使用默认的用户名和密码就可以登陆了。&lt;/p></description></item><item><title>服务器虚拟化 RHEV</title><link>https://martinliu.cn/2015/03/27/e69c8de58aa1e599a8e8999ae68b9fe58c96-rhev/</link><pubDate>Fri, 27 Mar 2015 02:11:40 +0000</pubDate><guid>https://martinliu.cn/2015/03/27/e69c8de58aa1e599a8e8999ae68b9fe58c96-rhev/</guid><description>&lt;p>服务器虚拟在我的 lab 中是必选项，管理控制器端 RHEVM 安装在主服务的一个虚拟机里面。在主服务器上使用 targetcli 做了一个 iscsi 的共享存储。使用这个命令可以方便的实现 iscsi 设备。把最终的存储文件放在了 SSD 盘上的一个 100GB 的瘦制备文件上。
[bash]
╭─root@w540 ~
╰─$ targetcli
targetcli shell version 2.1.fb37
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type &amp;lsquo;help&amp;rsquo;.&lt;/p>
&lt;p>/&amp;gt; ls
o- / &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [&amp;hellip;]
o- backstores &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [&amp;hellip;]
| o- block &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 0]
| o- fileio &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 1]
| | o- iscsi1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [/root/iscsi01.img (100.0GiB) write-back activated]
| o- pscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 0]
| o- ramdisk &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Storage Objects: 0]
o- iscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 1]
| o- iqn.2003-01.org.linux-iscsi.w540.x8664:sn.82939fa1cd49 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [TPGs: 1]
| o- tpg1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [no-gen-acls, no-auth]
| o- acls &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [ACLs: 0]
| o- luns &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [LUNs: 1]
| | o- lun0 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [fileio/iscsi1 (/root/iscsi01.img)]
| o- portals &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Portals: 1]
| o- 0.0.0.0:3260 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [OK]
o- loopback &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 0]
/&amp;gt;
[/bash]&lt;/p>
&lt;p>以上 iscsi 的存储配置参考：&lt;a class="link" href="https://access.redhat.com/solutions/894163" target="_blank" rel="noopener"
>https://access.redhat.com/solutions/894163&lt;/a>&lt;/p>
&lt;p>如果需要让所有的节点都能无障碍访问 iscsi 存储，就需要把 acl 设置为允许所有节点访问。使用下面这个命令&lt;/p>
&lt;p>[bash]
/&amp;gt; iscsi/iqn.2003-01.org.setup.lun.test/tpg1/ set attribute authentication=0 demo_mode_write_protect=0 generate_node_acls=1 cache_dynamic_acls=1&lt;/p>
&lt;p>Parameter demo_mode_write_protect is now &amp;lsquo;0&amp;rsquo;.&lt;/p>
&lt;p>Parameter authentication is now &amp;lsquo;0&amp;rsquo;.&lt;/p>
&lt;p>Parameter generate_node_acls is now &amp;lsquo;1&amp;rsquo;.&lt;/p>
&lt;p>Parameter cache_dynamic_acls is now &amp;lsquo;1&amp;rsquo;.&lt;/p>
&lt;p>/&amp;gt; ls&lt;/p>
&lt;p>o- / &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [&amp;hellip;]&lt;/p>
&lt;p>o- backstores &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [&amp;hellip;]&lt;/p>
&lt;p>| o- block &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 0]&lt;/p>
&lt;p>| o- fileio &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Storage Objects: 0]&lt;/p>
&lt;p>| o- pscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [Storage Objects: 0]&lt;/p>
&lt;p>| o- ramdisk &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Storage Objects: 1]&lt;/p>
&lt;p>| o- test1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [nullio (100.0MiB) activated]&lt;/p>
&lt;p>o- iscsi &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Targets: 1]&lt;/p>
&lt;p>| o- iqn.2003-01.org.setup.lun.test &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [TPGs: 1]&lt;/p>
&lt;p>| o- tpg1 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [gen-acls, no-auth]&lt;/p>
&lt;p>| o- acls &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [ACLs: 0]&lt;/p>
&lt;p>| o- luns &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [LUNs: 1]&lt;/p>
&lt;p>| | o- lun0 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;. [ramdisk/test1]&lt;/p>
&lt;p>| o- portals &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Portals: 1]&lt;/p>
&lt;p>| o- 12.12.12.1:3260 &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [iser]&lt;/p>
&lt;p>o- loopback &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.. [Targets: 0]&lt;/p>
&lt;p>o- srpt &amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip; [Targets: 0]&lt;/p>
&lt;p>/&amp;gt; saveconfig&lt;/p>
&lt;p>Last 10 configs saved in /etc/target/backup.&lt;/p>
&lt;p>Configuration saved to /etc/target/saveconfig.json&lt;/p>
&lt;p>/&amp;gt; exit&lt;/p>
&lt;p>Global pref auto_save_on_exit=true&lt;/p>
&lt;p>Last 10 configs saved in /etc/target/backup.&lt;/p>
&lt;p>Configuration saved to /etc/target/saveconfig.json
[/bash]&lt;/p>
&lt;p>RHEVM 的安装过程非常简洁，基本用 Satellite 配置了一下它所需要的 repos，做好视图，然后就推送给了一个 kvm 虚拟机，使用 pxe 安装好之后就行了。&lt;/p>
&lt;p>RHEVM 需要的 repos 和基本的安装命令：
[bash]&lt;/p>
&lt;h1 id="subscription-manager-repos-enablerhel-6-server-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rpms
&lt;/h1>&lt;h1 id="subscription-manager-repos-enablerhel-6-server-supplementary-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-supplementary-rpms
&lt;/h1>&lt;h1 id="subscription-manager-repos-enablerhel-6-server-rhevm-35-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rhevm-3.5-rpms
&lt;/h1>&lt;h1 id="subscription-manager-repos-enablejb-eap-6-for-rhel-6-server-rpms">subscription-manager repos &amp;ndash;enable=jb-eap-6-for-rhel-6-server-rpms
&lt;/h1>&lt;h1 id="subscription-manager-repos-enablerhel-6-server-rhevh-rpms">subscription-manager repos &amp;ndash;enable=rhel-6-server-rhevh-rpms
&lt;/h1>&lt;h1 id="yum-install-rhevm-rhevm-dwh-rhevm-reports">yum install rhevm rhevm-dwh rhevm-reports
&lt;/h1>&lt;h1 id="engine-setup">engine-setup
&lt;/h1>&lt;p>[/bash]&lt;/p>
&lt;p>回答完 engine-setup 的所有问题就可以登录风格统一的黑底色的 RHEM 界面了。实际上有三个登录界面：用户的，管理员，和报表的。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-web-admin.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-web-admin-520x293.jpg"
loading="lazy"
alt="rhevm-web-admin"
>&lt;/a>&lt;/p>
&lt;p>下面需要安装跑虚拟机的 Hypervisor 了，RHEV 的 Hypervisor 有两种，一种是精简话的裁剪 rhel 版本叫做 RHEVH（偏向 vshpere 的做法），还有一种就是 rhel 的标准版，然后安装 Hypervisor 相关的包（偏向 OpenStack 的做法）。下面我会安装第二种做法。目的是：我有两台相同配置的计算节点，我希望把动态的变更他们的功能；一会做 RHEV 虚拟机的演示，一会做 OpenStack nova 的演示。&lt;/p>
&lt;p>用了一个组合视图安装了这两个服务器虚拟化节点。组合视图里如下所示：
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhev-view-compose.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhev-view-compose-520x286.jpg"
loading="lazy"
alt="rhev-view-compose"
>&lt;/a>
如上图所示：1）视图 1 是基础的 RHEL 操作系统 repo；2）视图 2 是 RHEV 相关的 repos 视图，其中包括了安装 RHEVM 和 host 的所有需要的 repo。考激活秘钥控制每个 repo 的默认是否开启，它们对安装后的 os 可见，但是默认并不是开启的，因此，我设置 rhevm 和 jboss 为默认关闭的，由于安装 rhev host 的情况比较多，需要安装 rhevm 的话，可以手动 enable 这需要的 repos 即可。&lt;/p>
&lt;p>安装和配置完存储之后的 RHEVM 控制台：
&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-hosts.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/rhevm-hosts-520x286.jpg"
loading="lazy"
alt="rhevm-hosts"
>&lt;/a>&lt;/p>
&lt;p>目前由于没有安装 OpenStack 环境，所以没有 Glance 服务，因此 iso 镜像只能暂时放在了 dis06 的一个服务器虚拟化 Hypervisor 节点上，目前是临时的方案，回头一定把 iso 放到 Glance 服务上 host。&lt;/p>
&lt;p>下面上传一个 iso 之后就可以创建虚拟机了。
[bash]
[root@rhevm03 ~]# engine-iso-uploader &amp;ndash;iso-domain=iso-dis06 upload /tmp/turnkey-jenkins-13.0-wheezy-amd64.iso
Please provide the REST API password for the admin@internal oVirt Engine user (CTRL+D to abort):
Uploading, please wait&amp;hellip;
ERROR: mount.nfs: Connection timed out&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>由于这个命令上传不成功，也不想排错了；到目前这个状态其实就可以在 Satellite 里面使用 RHEV 的资源提供者的方式来安装虚拟机了，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-1.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-1-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-1"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 1：通过 New Host 设置相关参数。选择 Deploy on 为 rhevm03（rhevm），这个配置让 sat6 去联系 RHEVM，rhevm 的配置信息必须提前输入到 sat6 中。然后还要在 sat6 中设置虚拟机的三种规格，就是 Computer profile 中的选项，这个选项确定了 cpu，ram，磁盘和网络等信息。剩下的就是最重要的 Lifecycle Evn 和 Puppet Env 了，这两个选项确定把系统安装为标准的 rhel6 的核心最小化安装。当然可以一次性完成某种应用的全套安装和配置。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-2.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-2-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-2"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 2：通过 Virtual Machine 参数可以看到 1，2，3 都来自标准的规格配置，如果需要手动修改的话，可以在这里修改，这里可以看到默认的存储是 w540-iscsi-lun0 这个之前在 RHEVM 里面配置好的 iscsi 存储。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-3.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/sat6-built-vm-via-rhev-3-520x286.jpg"
loading="lazy"
alt="sat6-built-vm-via-rhev-3"
>&lt;/a>&lt;/p>
&lt;p>手动创建 RHEV 虚拟机 3：点击提交之后，sat6 就开始了实时创建 rhev 虚拟机的过程，sat6 使用 REST API 告诉 RHEVM 这些信息，然后 RHEVM 再确定使用哪个 Hypervisor 来建立并运行虚拟机。&lt;/p>
&lt;p>问题来了：如果需要在 RHEV 资源池里建立 n 个相同配置的虚拟机，管理员该如何操作？&lt;/p>
&lt;p>在 sat6 里面，管理员重复以上操作，当然需要手动操作 n 次。这样是不是很麻烦，确实很麻烦！！如何解决？这就需要一种能够实现 Orchestration 功能的工具来做，也就是自动化编排工具。这种工具最好是统一的能够跨异构资源池的，能够满足如下需求：今天企业可能是纯的 vshpere 的虚拟化环境，接下来企业有可能引入其他服务器虚拟化资源池技术，如：RHEV，Hyper-V；在以后还可能引入 OpenStack 资源池。那么这种自动化编排工具和底层的类似 satellite6 的（标准化部署工具）必须形成一个统一的平台来操作所有异构的资源池。也就是说：在 Orchestration 工具中统一管理异构资源池，并配合标准化部署工具，实现 workload 的标准化自动化部署。红帽的 Orchestration 工具是 CloudForms。它能够对接业内所有流行的资源池，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-cloud-provides.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-cloud-provides-520x292.jpg"
loading="lazy"
alt="cfme-cloud-provides"
>&lt;/a> &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-infra-provides.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/cfme-infra-provides-520x293.jpg"
loading="lazy"
alt="cfme-infra-provides"
>&lt;/a>&lt;/p>
&lt;p>上图是 Satellite 的上层 Orchestration 的能力，底层必须还有标准化的部署工具支持，也就是 Satellite6，它对以上基础架构类型的支持情况，如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/satellite6-provider.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/satellite6-provider-520x286.jpg"
loading="lazy"
alt="satellite6-provider"
>&lt;/a>&lt;/p>
&lt;p>使用 CloudForms 做上层 Orchestration 的调度，必须依赖于底层的 workload 的标准化，标准化到什么程度，从虚拟机供给的角度可以参考 Amazon AWS 的 EC2 的实际案例。如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/ec2-types.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/ec2-types-520x258.jpg"
loading="lazy"
alt="ec2-types"
>&lt;/a>&lt;/p>
&lt;p>AWS 服务的我曾研究过一点，上图的全图下载点这里 &amp;ndash;&amp;gt; &lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/aws-%e6%9c%8d%e5%8a%a1-%e8%84%91%e5%9b%be.pdf" target="_blank" rel="noopener"
>aws-服务-脑图&lt;/a>&lt;/p>
&lt;p>以上所有是 Martin&amp;rsquo;s Lab 的搭建的一部分，下周可能去一个银行客户演示。需要做的优化还很多，请关注后续更新。&lt;/p></description></item></channel></rss>