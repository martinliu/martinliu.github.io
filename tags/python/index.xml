<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on Martin Liu's Blog</title><link>https://martinliu.cn/tags/python/</link><description>Recent content in Python on Martin Liu's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 28 Aug 2025 18:07:39 +0800</lastBuildDate><atom:link href="https://martinliu.cn/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>ç”¨è¿™äº›é²œä¸ºäººçŸ¥ï¼ˆä¸”å¤§å¤šæ•°å¼€å‘è€…éƒ½å¿½ç•¥ï¼‰çš„æŠ€å·§ï¼Œè®©ä½ çš„ Python ä»£ç æé€Ÿ 10 å€</title><link>https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/</link><pubDate>Wed, 27 Aug 2025 16:00:00 +0800</pubDate><guid>https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/</guid><description>&lt;img src="https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/1_JtvDNgonwDl8sRlYYW69kA.webp" alt="Featured image of post ç”¨è¿™äº›é²œä¸ºäººçŸ¥ï¼ˆä¸”å¤§å¤šæ•°å¼€å‘è€…éƒ½å¿½ç•¥ï¼‰çš„æŠ€å·§ï¼Œè®©ä½ çš„ Python ä»£ç æé€Ÿ 10 å€" />&lt;p>å¦‚æœä½ æ˜¯ä¸€ååœ¨äº‘è®¡ç®—åŸºç¡€æ¶æ„ (cloud infrastructure)ã€SRE (Site Reliability Engineering) å’Œåº”ç”¨æ•°æ®ç§‘å­¦é¢†åŸŸå·¥ä½œçš„ä»ä¸šè€…ï¼Œä½ ä¸€å®šå¾ˆæ¬£èµ Python æä¾›çš„æ¸…æ™°æ€§å’Œç®€æ´æ€§ã€‚æ— è®ºä½ æ˜¯åœ¨åŸå‹åŒ–æœºå™¨å­¦ä¹ æ¨¡å‹ã€ç¼–æ’åç«¯å·¥ä½œæµï¼Œè¿˜æ˜¯åœ¨ç”Ÿäº§çº§ç³»ç»Ÿ (production-grade system) ä¸­æ„å»ºè‡ªåŠ¨åŒ–ç®¡é“ï¼ŒPython å§‹ç»ˆæ˜¯ä½ å·¥å…·åº“ä¸­çš„é¦–é€‰ã€‚ä½†è¯´å®è¯â€”â€” &lt;strong>Python æœ‰æ—¶ä¼šå¾ˆæ…¢&lt;/strong>ã€‚æ…¢å¾—ä»¤äººç—›è‹¦ã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/0_VXY46SwRfsnWJKIC.webp"
width="640"
height="360"
srcset="https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/0_VXY46SwRfsnWJKIC_hu_aa960e03568e00c7.webp 480w, https://martinliu.cn/blog/i-made-my-python-code-10x-faster-using-these/0_VXY46SwRfsnWJKIC_hu_dacac778015c9775.webp 1024w"
loading="lazy"
alt="Python"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>ç„¶è€Œï¼Œä½ éœ€è¦äº†è§£å¹¶ç‰¢è®°çš„æ˜¯ï¼Œ&lt;strong>Python çš„å¤§å¤šæ•°æ€§èƒ½é—®é¢˜éƒ½æ˜¯å¼€å‘è€…è‡ªå·±é€ æˆçš„&lt;/strong>ã€‚é—®é¢˜ä¸åœ¨äºè¯­è¨€æœ¬èº«ï¼Œè€Œåœ¨äºä½ ä½¿ç”¨å®ƒçš„æ–¹å¼ã€‚äº‹å®ä¸Šï¼ŒPython çš„ç“¶é¢ˆå¾€å¾€æ˜¯ç”±è¢«å¿½è§†çš„ç»†èŠ‚å¼•èµ·çš„ï¼šä½æ•ˆçš„æ•°æ®ç»“æ„ (data structures)ã€ä¸å¿…è¦çš„å†…å­˜åˆ†é… (allocations)ã€é‡å¤çš„è®¡ç®— (redundant computations)ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä½ ä»å…¶ä»–è¯­è¨€å¸¦æ¥çš„ã€ä¸å®Œå…¨é€‚ç”¨çš„ä¹ æƒ¯ã€‚&lt;/p>
&lt;p>ä½ å¯èƒ½è§è¿‡å¤ªå¤šçš„å·¥ç¨‹å¸ˆï¼ˆå°¤å…¶æ˜¯åœ¨é«˜æ€§èƒ½è®¡ç®— (high-performance computing) é¢†åŸŸä¹‹å¤–ï¼‰ä½ä¼°äº†ä¸€äº›å°å†³å®šçš„æˆæœ¬ã€‚æ¯”å¦‚å¾ªç¯æ–¹å¼ä¸å½“ã€å†…ç½®å‡½æ•°ä½¿ç”¨æ•ˆç‡ä½ä¸‹ã€å¿½è§†æ€§èƒ½åˆ†æ (profiling)ï¼Œæˆ–è€…è¿‡åº¦ä¾èµ– Pandas (Pandas) æ¥æ‰§è¡Œæœ¬å¯ä»¥ä½¿ç”¨ NumPy (NumPy) æˆ– Polars (Polars) æé€Ÿ 50 å€çš„æ“ä½œã€‚æ›´åˆ«æé‚£äº›ä»ç„¶åœ¨ Pandas ä¸­ä½¿ç”¨ &lt;code>apply&lt;/code> è€Œä¸æ˜¯å‘é‡åŒ– (vectorization) çš„äººäº†ã€‚&lt;/p>
&lt;p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…ä¸ä¼šè°ˆè®ºä½ éšå¤„å¯è§çš„é‚£äº›æ˜¾è€Œæ˜“è§çš„å»ºè®®ï¼Œæ¯”å¦‚&amp;quot;ä½¿ç”¨ NumPy&amp;quot;æˆ–&amp;quot;é¿å… for å¾ªç¯&amp;quot;ã€‚è¿™äº›ä½ éƒ½å¬è¿‡äº†ã€‚è¿™æ˜¯ä¸€æ¬¡&lt;strong>æ·±å…¥æ¢è®¨é‚£äº›è¢«ä½ä¼°ã€è¢«å¿½è§†ã€æœ‰æ—¶ç”šè‡³æœ‰äº›å¥‡ç‰¹çš„æŠ€å·§ï¼Œå®ƒä»¬èƒ½å¤Ÿæ˜¾è‘—åŠ é€Ÿä½ çš„ Python ä»£ç &lt;/strong>â€”â€”è¿™äº›æŠ€å·§ä½ çœŸå¸Œæœ›èƒ½æ—©ç‚¹çŸ¥é“ã€‚æœ¬æ–‡å°†é€šè¿‡å®é™…æ¡ˆä¾‹ã€ä½ å¯èƒ½æ²¡ç”¨è¿‡ï¼ˆä½†åº”è¯¥ç”¨ï¼‰çš„åº“ï¼Œä»¥åŠé‚£äº›æ‚„æ‚„ä¾µèš€ä½ æ€§èƒ½çš„ä¹ æƒ¯ï¼Œä¸ºä½ ä¸€ä¸€è®²è§£ã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œå¦‚æœä½ æ­£åœ¨å¤„ç†å¤§å‹æ•°æ®ç®¡é“ (data pipelines)ã€åç«¯ API (Application Programming Interface)ã€ç§‘å­¦è®¡ç®— (scientific computing)ï¼Œç”šè‡³æ˜¯è‡ªåŠ¨åŒ–åŸºç¡€æ¶æ„ (infrastructure) çš„å·¥ä½œâ€”â€”å¹¶ä¸”ä½ è§‰å¾— Python æ­£åœ¨æ‹–ç´¯ä½ â€”â€”é‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚&lt;/p>
&lt;h2 id="-1-åœæ­¢ä½¿ç”¨-rangelen--æ”¹ç”¨-enumerate">ğŸš€ 1. åœæ­¢ä½¿ç”¨ range(len(&amp;hellip;)) â€” æ”¹ç”¨ enumerate
&lt;/h2>&lt;p>è¿™çœ‹èµ·æ¥å¯èƒ½å¾®ä¸è¶³é“ï¼Œä½†åœ¨æŸäº›ç´§å¯†çš„å¾ªç¯ä¸­ï¼Œå®ƒå´å‡ºä¹æ„æ–™åœ°å¸¸è§ä¸”ä»£ä»·é«˜æ˜‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Slow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">my_list&lt;/span>&lt;span class="p">)):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">my_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Faster and more Pythonic&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">value&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">my_list&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½¿ç”¨ &lt;code>enumerate&lt;/code>ï¼ˆæšä¸¾ï¼‰å¯ä»¥é¿å…é‡å¤çš„ç´¢å¼•å’Œæ–¹æ³•è°ƒç”¨ã€‚å®ƒæ›´ç®€æ´ï¼Œå¹¶æœ‰åŠ©äºè§£é‡Šå™¨åœ¨åº•å±‚è¿›è¡Œæ›´å¥½çš„ä¼˜åŒ–ã€‚&lt;/p>
&lt;h2 id="-2-é¿å…å°†-list-ç”¨äºå¤§å‹é›†åˆ--æ”¹ç”¨-arraydeque-æˆ–-numpy-æ•°ç»„">âš¡ 2. é¿å…å°† list ç”¨äºå¤§å‹é›†åˆ â€” æ”¹ç”¨ arrayã€deque æˆ– numpy æ•°ç»„
&lt;/h2>&lt;p>Python åˆ—è¡¨ (lists) é€šç”¨ä¸”çµæ´»ï¼Œä½†å¯¹äºå¤§å‹æ•°å€¼è¿ç®—æ¥è¯´ï¼Œå®ƒä»¬çš„&lt;strong>å†…å­˜æ•ˆç‡ä¸é«˜&lt;/strong>ä¸”é€Ÿåº¦ä¸å¿«ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">array&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">array&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">my_array&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;i&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># Much faster than list for ints&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…æ›´å¥½çš„æ˜¯ï¼Œå¯¹æ•°å€¼æ•°æ®ä½¿ç”¨ &lt;code>numpy&lt;/code> æˆ– &lt;code>polars.Series&lt;/code>ã€‚NumPy ä½¿ç”¨ç”± C è¯­è¨€æ”¯æŒçš„å›ºå®šç±»å‹æ•°ç»„ï¼Œè€Œ Polarsï¼ˆè§ä¸‹æ–‡ï¼‰æ˜¯ç”¨ Rust ç¼–å†™çš„ï¼Œå¹¶é’ˆå¯¹é€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ–ã€‚&lt;/p>
&lt;h2 id="-3-ä½¿ç”¨-functoolslru_cache-åŠ é€Ÿçº¯å‡½æ•°">ğŸ§  3. ä½¿ç”¨ functools.lru_cache åŠ é€Ÿçº¯å‡½æ•°
&lt;/h2>&lt;p>å¦‚æœä½ æœ‰è®¡ç®—å¼€é”€å¤§çš„çº¯å‡½æ•°ï¼ˆå³ï¼Œç›¸åŒè¾“å…¥ â†’ ç›¸åŒè¾“å‡ºï¼‰ï¼Œè®°å¿†åŒ– (memoization) å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">functools&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">lru_cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@lru_cache&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">maxsize&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">128&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">expensive_computation&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™åœ¨è®¸å¤šæœºå™¨å­¦ä¹  (Machine Learning) ç®¡çº¿ä¸­è¢«ä¸¥é‡ä½ä¼°ã€‚&lt;/p>
&lt;h2 id="-4-ä½¿ç”¨-numba-å°†-python-ç¼–è¯‘æˆæœºå™¨ç --æ— éœ€æ›´æ”¹ä»£ç ">ğŸ 4. ä½¿ç”¨ Numba å°† Python ç¼–è¯‘æˆæœºå™¨ç  â€” æ— éœ€æ›´æ”¹ä»£ç 
&lt;/h2>&lt;p>è¿™æ˜¯ä¸€ä¸ªæ”¹å˜æ¸¸æˆè§„åˆ™çš„å·¥å…·ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">numba&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">jit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@jit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nopython&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">compute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¢« &lt;code>@jit&lt;/code> åŒ…è£…çš„å‡½æ•°å¯ä»¥è¿è¡Œå¾—&lt;strong>å¿« 100 å€&lt;/strong>ã€‚Numba ä½¿ç”¨ LLVM ç¼–è¯‘ä½ çš„ä»£ç ï¼Œåªéœ€æå°‘çš„è¯­æ³•æ”¹åŠ¨ã€‚å®ƒæœ€é€‚ç”¨äºå¾ªç¯å’Œæ•°å€¼è®¡ç®—ä»£ç ã€‚&lt;/p>
&lt;h2 id="-5-å°†-pandas-åˆ‡æ¢åˆ°-polars-å¤„ç†-dataframe">âš™ï¸ 5. å°† Pandas åˆ‡æ¢åˆ° Polars å¤„ç† DataFrame
&lt;/h2>&lt;p>Pandas å¾ˆæ£’ã€‚ä½†å¯¹äºå¤§å‹æ•°æ®é›†æ¥è¯´ï¼Œå®ƒé€Ÿåº¦æ…¢ä¸”æ˜¯å•çº¿ç¨‹çš„ã€‚æ­¤æ—¶ï¼Œè®©å¼€å‘è€…å¼•å…¥ &lt;code>[Polars](https://pola.rs/)&lt;/code>ï¼Œä¸€ä¸ªç”¨ Rust ç¼–å†™å¹¶æ”¯æŒåŸç”Ÿå¤šçº¿ç¨‹çš„æé€Ÿ DataFrame åº“ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">polars&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">pl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_csv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;data.csv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">df&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">df&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pl&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;sales&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å®é™…çš„ ETL (Extract, Transform, Load) ç®¡çº¿ä¸­ï¼ŒPolars çš„æ€§èƒ½å¯ä»¥æ¯” Pandas &lt;strong>é«˜ 10 å€ç”šè‡³æ›´å¤š&lt;/strong>ã€‚&lt;/p>
&lt;h2 id="-6-ä½¿ç”¨å†…ç½®æ€§èƒ½åˆ†æå·¥å…·--ä¸è¦ç›²ç›®ä¼˜åŒ–">ğŸ” 6. ä½¿ç”¨å†…ç½®æ€§èƒ½åˆ†æå·¥å…· â€” ä¸è¦ç›²ç›®ä¼˜åŒ–
&lt;/h2>&lt;p>åœ¨ä¼˜åŒ–ä»»ä½•ä¸œè¥¿ä¹‹å‰ï¼Œè¯·å…ˆè¿›è¡Œ&lt;strong>æ€§èƒ½åˆ†æ (Profiling)&lt;/strong>ã€‚ä½ æ— æ³•æ”¹è¿›æ— æ³•è¡¡é‡çš„äº‹ç‰©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">python -m cProfile my_script.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…æ›´å¥½çš„æ˜¯ï¼Œä½¿ç”¨ &lt;code>line_profiler&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pip install line_profiler
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">my_func&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kernprof -l my_script.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python -m line_profiler my_script.py.lprof
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ˜¾ç¤ºäº†é€è¡Œçš„ç“¶é¢ˆï¼Œæ˜¯æ€§èƒ½è°ƒè¯• (Performance Debugging) çš„åˆ©å™¨ã€‚&lt;/p>
&lt;h2 id="-7-åœ¨ç´§å¯†å¾ªç¯ä¸­æœ€å°åŒ–å±æ€§æŸ¥æ‰¾">â›ï¸ 7. åœ¨ç´§å¯†å¾ªç¯ä¸­æœ€å°åŒ–å±æ€§æŸ¥æ‰¾
&lt;/h2>&lt;p>è¿™ä¸€ä¸ªç»†å¾®ä½†éå¸¸çœŸå®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Bad&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">my_object&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">some_attribute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Better&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">attr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">my_object&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">some_attribute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">value&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">attr&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¯ä¸€æ¬¡å±æ€§è®¿é—® (attribute access) éƒ½æ˜¯ä¸€æ¬¡å­—å…¸æŸ¥æ‰¾ (dictionary lookup)ã€‚åœ¨å¤§å‹å¾ªç¯ä¸­ï¼Œè¿™ä¼šç´¯ç§¯èµ·æ¥ã€‚&lt;/p>
&lt;h2 id="-8-é¢„åˆ†é…åˆ—è¡¨è€Œä¸æ˜¯åœ¨å¾ªç¯ä¸­è¿½åŠ ">ğŸ§¬ 8. é¢„åˆ†é…åˆ—è¡¨è€Œä¸æ˜¯åœ¨å¾ªç¯ä¸­è¿½åŠ 
&lt;/h2>&lt;p>è¿½åŠ æ“ä½œæ–¹ä¾¿ï¼Œä½†åœ¨å¤§è§„æ¨¡æ“ä½œæ—¶ä¼šå¾ˆæ…¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Slow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Faster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="kc">None&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1000000&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™åœ¨æ•°æ®é¢„å¤„ç†ä¸­å°¤ä¸ºé‡è¦ã€‚&lt;/p>
&lt;h2 id="-9-å°è¯•-pydantic-v2-æˆ–-msgspec-è¿›è¡Œå¿«é€Ÿæ•°æ®éªŒè¯">ğŸ“¦ 9. å°è¯• Pydantic V2 (æˆ– msgspec) è¿›è¡Œå¿«é€Ÿæ•°æ®éªŒè¯
&lt;/h2>&lt;p>å¦‚æœä½ æ­£åœ¨æ„å»º API (Application Programming Interface) æˆ–æ‘„å–æ•°æ®ï¼Œä½ å¯èƒ½æ­£åœ¨ä½¿ç”¨ Pydanticã€‚ä½† v2 &lt;strong>ç”¨ Rust é‡å†™&lt;/strong>ï¼Œé€Ÿåº¦å¿«å¾—å¤šï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">pydantic&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">BaseModel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BaseModel&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ–è€…ï¼Œä¸ºäº†æè‡´æ€§èƒ½ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">msgspec&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">msgspec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Struct&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">id&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nb">str&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>msgspec&lt;/code> æ¯” Pydantic å’Œ dataclasses éƒ½å¿«ã€‚&lt;/p>
&lt;h2 id="-10-å°½å¯èƒ½ä½¿ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨">ğŸ§ª 10. å°½å¯èƒ½ä½¿ç”¨ç”Ÿæˆå™¨è€Œä¸æ˜¯åˆ—è¡¨
&lt;/h2>&lt;p>å¦‚æœä½ ä¸éœ€è¦ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ç»“æœï¼Œè¯·ä½¿ç”¨ç”Ÿæˆå™¨ (Generators)ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">slow&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">fast&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å†…å­˜ä½¿ç”¨é‡å°†ä»åƒå…†å­—èŠ‚é™åˆ°å‡ ä¹ä¸ºé›¶ã€‚&lt;/p>
&lt;h2 id="-é¢å¤–æç¤ºä½¿ç”¨-mypyc-ç¼–è¯‘ä½ çš„è„šæœ¬-å®éªŒæ€§ä½†æœ‰å‰æ™¯">âš™ï¸ é¢å¤–æç¤ºï¼šä½¿ç”¨ mypyc ç¼–è¯‘ä½ çš„è„šæœ¬ (å®éªŒæ€§ä½†æœ‰å‰æ™¯)
&lt;/h2>&lt;p>å¦‚æœä½ çš„æ¨¡å—ä¸­ä½¿ç”¨äº†ç±»å‹æç¤º (type hints)ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pip install mypy mypyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Compiles your script to C extension&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mypyc my_module.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™å¯¹äºæ•°å€¼è®¡ç®—ä»£ç å°¤å…¶å¼ºå¤§ï¼Œè€Œä¸”å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ç±»å‹æ ‡æ³¨ (typing)ï¼Œåªéœ€è¦è¿›è¡Œæå°çš„æ”¹åŠ¨ã€‚&lt;/p>
&lt;h2 id="æœ€ç»ˆæ€è€ƒ">æœ€ç»ˆæ€è€ƒ
&lt;/h2>&lt;p>å¤§å¤šæ•°å¼€å‘è€…è®¤ä¸º Python è¿è¡Œç¼“æ…¢ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨å¾—å½“ï¼ŒPython çš„é€Ÿåº¦ä¼š&lt;strong>å‡ºäººæ„æ–™åœ°å¿«&lt;/strong>ã€‚çœŸæ­£çš„ç“¶é¢ˆä¸åœ¨äºè¯­è¨€æœ¬èº«ï¼Œè€Œåœ¨äºæˆ‘ä»¬çš„ä½¿ç”¨ä¹ æƒ¯ã€‚é€šè¿‡ç»“åˆæ™ºèƒ½åˆ©ç”¨åŸç”Ÿç‰¹æ€§ã€æœªè¢«å……åˆ†åˆ©ç”¨çš„åº“ä»¥åŠæ€§èƒ½ä¼˜å…ˆçš„æ€ç»´æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é«˜ååé‡çš„ç”Ÿäº§å·¥ä½œè´Ÿè½½ä¸­ï¼Œä¹Ÿèƒ½å®ç°å…¨æ–°çš„é€Ÿåº¦æ°´å¹³ã€‚&lt;/p>
&lt;p>åœ¨è‡ªå·±çš„æ¡ˆä¾‹ä¸­ï¼Œä¼˜åŒ–äº†ç”Ÿäº§ç¯å¢ƒä¸­å‡ ä¸ªå…³é”®çš„æ¨ç†è¯„åˆ†å’Œæ•°æ®è½¬æ¢æµæ°´çº¿ï¼Œå°†è¿è¡Œæ—¶é—´ä»&lt;strong>æ•°åˆ†é’Ÿç¼©çŸ­åˆ°æ•°ç§’&lt;/strong>ã€‚æœ€æ£’çš„æ˜¯ä»€ä¹ˆï¼Ÿä¸è¦æ›´æ¢è¯­è¨€ï¼Œä¹Ÿä¸è¦ç”¨ C++ é‡å†™ä¸€åˆ‡ã€‚ä½ åªéœ€è¦å¼€å§‹å°† Python è§†ä¸ºå®ƒæœ¬åº”æœ‰çš„å¼ºå¤§è¯­è¨€â€”â€”åªè¦ä½¿ç”¨å¾—å½“ã€‚&lt;/p>
&lt;p>å¦‚æœä½ è®¤çœŸæƒ³è¦ä» Python ä¸­æ¦¨å–æ€§èƒ½ï¼Œè¯·ä»è¿™äº›å»ºè®®å¼€å§‹ã€‚ç„¶åè¿›è¡Œæ€§èƒ½åˆ†æ (profile)ã€æµ‹è¯•ï¼Œå¹¶æŒç»­å­¦ä¹ ã€‚æ€»ä¼šæœ‰æ›´å¿«çš„æ–¹æ³•ã€‚&lt;/p></description></item><item><title>Pulumi IaC ä¹‹ Azure å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼ˆMacOS &amp; Python æœ¬åœ°ï¼‰</title><link>https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/</link><pubDate>Sat, 12 Oct 2024 11:49:22 +0800</pubDate><guid>https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/</guid><description>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/azure-nextgen.webp" alt="Featured image of post Pulumi IaC ä¹‹ Azure å¿«é€Ÿå…¥é—¨æŒ‡å—ï¼ˆMacOS &amp; Python æœ¬åœ°ï¼‰" />&lt;p>æœ¬å¿«é€Ÿä¸Šæ‰‹æŒ‡å—åŒ…å«çš„å†…å®¹ï¼š&lt;/p>
&lt;ul>
&lt;li>å®‰è£…å’Œå‡†å¤‡ Pulumi CLI å·¥å…·&lt;/li>
&lt;li>å‡†å¤‡ Pulumi Cloud è´¦å·ï¼Œå¹¶åˆ›å»ºä¸ªäººçš„ Access Token&lt;/li>
&lt;li>å‡†å¤‡ Azure çš„è´¦å·ï¼Œç”¨äº¤äº’çš„æ–¹å¼ç™»å½• Azure CLI&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ªç®€å•çš„ Pulumi é¡¹ç›®ï¼Œç”¨äº Python è¯­è¨€çš„ä¸»ç¨‹åºéƒ¨ç½² Azure èµ„æº&lt;/li>
&lt;li>åˆ é™¤ç¯å¢ƒä¸­çš„æ‰€æœ‰èµ„æº&lt;/li>
&lt;/ul>
&lt;h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ
&lt;/h2>&lt;p>åœ¨ MacOS ç¯å¢ƒä¸­å®‰è£… Pulumi CLI å¯ä»¥é€šè¿‡ Homebrew å®‰è£…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€‚Pulumi CLI åœ¨æœ¬åœ°ç¯å¢ƒä¸­ç”¨äºåˆ›å»ºã€éƒ¨ç½²å’Œç®¡ç† Pulumi é¡¹ç›®ã€‚å®ƒéœ€è¦ä¾èµ–äº Pulumi Cloud æœåŠ¡ï¼Œä½œä¸ºå‘½ä»¤è¡Œå·¥å…·äº¤äº’çš„åç«¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">brew install pulumi/tap/pulumi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ &lt;code>pulumi version&lt;/code> å‘½ä»¤æŸ¥çœ‹ Pulumi CLI çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/p>
&lt;p>Pulumi Cloud æ˜¯ Pulumi çš„åç«¯æœåŠ¡ï¼Œç”¨äºå­˜å‚¨ Pulumi é¡¹ç›®çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠæä¾›ä¸€äº›å…¶ä»–çš„æœåŠ¡ã€‚åœ¨ä½¿ç”¨ Pulumi CLI ä¹‹å‰ï¼Œéœ€è¦å…ˆç™»å½• Pulumi Cloud æœåŠ¡ã€‚&lt;/p>
&lt;p>Pulumi CLI åœ¨æœ¬åœ°ç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ â€˜pulumi loginâ€™ é»˜è®¤çš„äº¤äº’æ–¹å¼ï¼Œå®Œæˆåœ¨å‘½ä»¤è¡Œä¸­çš„ç”¨æˆ·è®¤è¯ï¼›æˆ‘æ¨èä½¿ç”¨Pulumi çš„ Access Token æ¥åœ¨æœ¬åœ° å®Œæˆå‘½ä»¤è¡Œçš„ç™»å½•è®¤è¯è¿‡ç¨‹ã€‚è¿™ç§éäº¤ä»˜æ–¹å¼ï¼Œå¯ä»¥åœ¨åç»­çš„ CI/CD ç¯å¢ƒä¸­ä½¿ç”¨ã€‚&lt;/p>
&lt;p>å‚è€ƒä¸‹å›¾ï¼Œç™»å½• Pulumi Cloud æœåŠ¡ï¼Œè·å– Access Tokenã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-login-access-token.webp"
width="1146"
height="574"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-login-access-token_hu_eb87a597dc624bb5.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-login-access-token_hu_fbb37aa764933137.webp 1024w"
loading="lazy"
alt="ä¸ªäºº Access Token"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="479px"
>&lt;/p>
&lt;p>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå°† Access Token è®¾ç½®ä¸ºç¯å¢ƒå˜é‡ï¼Œç”¨äºåç»­çš„ç™»å½•è®¤è¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PULUMI_ACCESS_TOKEN&lt;/span>&lt;span class="o">=&lt;/span>pul-ACT+++++++++++++++++++++++++++++++++++++++++++++++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pulumi whoami
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martinliu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®é™…ä¸Šï¼ŒPulumi CLI ä¼šå…ˆåœ¨ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾ &lt;code>PULUMI_ACCESS_TOKEN&lt;/code>ï¼Œå¦‚æœæ‰¾åˆ°äº†å°±ç›´æ¥ä½¿ç”¨ Token å®Œæˆç™»å½•è®¤è¯çš„è¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ â€˜pulumi whoamiâ€™ å‘½ä»¤ç¡®è®¤æ˜¯å¦ç™»å½•æˆåŠŸï¼Œä»¥åŠå½“å‰æ‰€ä½¿ç”¨çš„ Pulumi Cloud çš„ç”¨æˆ·åã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code>pulumi login&lt;/code> å‘½ä»¤ï¼Œé€šè¿‡äº¤äº’çš„æ–¹å¼ç™»å½• Pulumi Cloud æœåŠ¡ã€‚&lt;/p>
&lt;p>Azure CLI æ˜¯ Azure çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨æœ¬åœ°ç¯å¢ƒä¸­ä¸ Azure äº‘æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æœ¬æ–‡çœç•¥äº† Azure CLI çš„ç™»å½•è®¤è¯è¿‡ç¨‹ï¼Œä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code>az login&lt;/code> å‘½ä»¤ï¼Œç”¨ç½‘é¡µäº¤äº’çš„æ–¹å¼ï¼Œå®Œæˆå‘½ä»¤è¡Œä¸­æœ¬åœ° Azure CLI çš„ç™»å½•è®¤è¯ã€‚&lt;/p>
&lt;p>å¯ä»¥æ ¡éªŒä¸€ä¸‹ Azure CLI çš„ç™»å½•è®¤è¯æ˜¯å¦æˆåŠŸã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">az account show
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä¸Šé¢çš„ä¿¡æ¯è¾“å‡ºä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å½“å‰çš„ Azure è´¦å·è®¢é˜…ç­‰ä¿¡æ¯ã€‚Pulumi CLI ä¼šä½¿ç”¨ Azure CLI çš„ç™»å½•è®¤è¯ä¿¡æ¯ï¼Œæ¥å®Œæˆ Azure äº‘æœåŠ¡çš„èµ„æºéƒ¨ç½²ã€‚&lt;/p>
&lt;p>åœ¨å®Œæˆäº†ä¸Šè¿°çš„ Pulumi CLI å’Œ Azure CLI çš„å‡†å¤‡å·¥ä½œåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹åˆ›å»ºä¸€ä¸ªç®€å•çš„ Pulumi é¡¹ç›®ï¼Œç”¨äºéƒ¨ç½² Azure èµ„æºã€‚&lt;/p>
&lt;h2 id="åˆ›å»º-pulumi-é¡¹ç›®">åˆ›å»º Pulumi é¡¹ç›®
&lt;/h2>&lt;p>åœ¨æœ¬åœ°ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ Pulumi å‘½ä»¤ â€˜pulumi new azure-pythonâ€™ åˆ›å»ºä¸€ä¸ªæ–°çš„ Pulumi é¡¹ç›®ï¼Œç”¨äºéƒ¨ç½² Azure èµ„æºã€‚&lt;/p>
&lt;p>â€˜pulumi new&amp;rsquo; å‘½ä»¤ä¼šåœ¨ä¸€ä¸ªç©ºç›®å½•ä¸­åˆå§‹åŒ–ä¸€ä¸ª Pulumi é¡¹ç›®ã€‚åœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼ŒPulumi CLI ä¼šè¯¢é—®ä¸€äº›é—®é¢˜ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªç®€å•çš„ Python ä»£ç æ–‡ä»¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘åªæ˜¯åˆ¶å®šäº† Azure çš„åŒºåŸŸä¸º &amp;lsquo;East Asia&amp;rsquo;ï¼Œå…¶ä»–çš„éƒ½ä½¿ç”¨é»˜è®¤å€¼ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project pulumi new azure-python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Logging in using access token from PULUMI_ACCESS_TOKEN
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">This &lt;span class="nb">command&lt;/span> will walk you through creating a new Pulumi project.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter a value or leave blank to accept the &lt;span class="o">(&lt;/span>default&lt;span class="o">)&lt;/span>, and press &amp;lt;ENTER&amp;gt;.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Press ^C at any &lt;span class="nb">time&lt;/span> to quit.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Project name &lt;span class="o">(&lt;/span>first-project&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Project description &lt;span class="o">(&lt;/span>A minimal Azure Native Python Pulumi program&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created project &lt;span class="s1">&amp;#39;first-project&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter your desired stack name.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To create a stack in an organization, use the format &amp;lt;org-name&amp;gt;/&amp;lt;stack-name&amp;gt; &lt;span class="o">(&lt;/span>e.g. &lt;span class="sb">`&lt;/span>acmecorp/dev&lt;span class="sb">`&lt;/span>&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stack name &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created stack &lt;span class="s1">&amp;#39;dev&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The toolchain to use &lt;span class="k">for&lt;/span> installing dependencies and running the program pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The Azure location to use &lt;span class="o">(&lt;/span>azure-native:location&lt;span class="o">)&lt;/span> &lt;span class="o">(&lt;/span>WestUS2&lt;span class="o">)&lt;/span>: eastasia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Saved config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing dependencies...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating virtual environment...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finished creating virtual environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating pip, setuptools, and wheel in virtual environment...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Requirement already satisfied: pip in ./venv/lib/python3.10/site-packages &lt;span class="o">(&lt;/span>22.3.1&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached pip-24.2-py3-none-any.whl &lt;span class="o">(&lt;/span>1.8 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Requirement already satisfied: setuptools in ./venv/lib/python3.10/site-packages &lt;span class="o">(&lt;/span>65.5.0&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting setuptools
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached setuptools-75.1.0-py3-none-any.whl &lt;span class="o">(&lt;/span>1.2 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting wheel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached wheel-0.44.0-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">67&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing collected packages: wheel, setuptools, pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Attempting uninstall: setuptools
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Found existing installation: setuptools 65.5.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Uninstalling setuptools-65.5.0:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Successfully uninstalled setuptools-65.5.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Attempting uninstall: pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Found existing installation: pip 22.3.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Uninstalling pip-22.3.1:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Successfully uninstalled pip-22.3.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully installed pip-24.2 setuptools-75.1.0 wheel-0.44.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finished updating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing dependencies in virtual environment...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0 &lt;span class="o">(&lt;/span>from -r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached pulumi-3.136.1-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>&lt;span class="m">11&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting pulumi-azure-native&amp;lt;3.0.0,&amp;gt;&lt;span class="o">=&lt;/span>2.0.0 &lt;span class="o">(&lt;/span>from -r requirements.txt &lt;span class="o">(&lt;/span>line 2&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached pulumi_azure_native-2.66.0-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>4.2 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting protobuf~&lt;span class="o">=&lt;/span>4.21 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached protobuf-4.25.5-cp37-abi3-macosx_10_9_universal2.whl.metadata &lt;span class="o">(&lt;/span>&lt;span class="m">541&lt;/span> bytes&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting grpcio~&lt;span class="o">=&lt;/span>1.66.2 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached grpcio-1.66.2-cp310-cp310-macosx_12_0_universal2.whl.metadata &lt;span class="o">(&lt;/span>3.9 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting dill~&lt;span class="o">=&lt;/span>0.3 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached dill-0.3.9-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>&lt;span class="m">10&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting six~&lt;span class="o">=&lt;/span>1.12 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached six-1.16.0-py2.py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>1.8 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting semver~&lt;span class="o">=&lt;/span>2.13 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached semver-2.13.0-py2.py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>5.0 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting pyyaml~&lt;span class="o">=&lt;/span>6.0 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached PyYAML-6.0.2-cp310-cp310-macosx_11_0_arm64.whl.metadata &lt;span class="o">(&lt;/span>2.1 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting debugpy~&lt;span class="o">=&lt;/span>1.8.5 &lt;span class="o">(&lt;/span>from pulumi&amp;lt;4.0.0,&amp;gt;&lt;span class="o">=&lt;/span>3.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 1&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached debugpy-1.8.7-py2.py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>1.1 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting parver&amp;gt;&lt;span class="o">=&lt;/span>0.2.1 &lt;span class="o">(&lt;/span>from pulumi-azure-native&amp;lt;3.0.0,&amp;gt;&lt;span class="o">=&lt;/span>2.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 2&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached parver-0.5-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>2.7 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting typing-extensions&amp;gt;&lt;span class="o">=&lt;/span>4.11 &lt;span class="o">(&lt;/span>from pulumi-azure-native&amp;lt;3.0.0,&amp;gt;&lt;span class="o">=&lt;/span>2.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 2&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached typing_extensions-4.12.2-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>3.0 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting arpeggio&amp;gt;&lt;span class="o">=&lt;/span>1.7 &lt;span class="o">(&lt;/span>from parver&amp;gt;&lt;span class="o">=&lt;/span>0.2.1-&amp;gt;pulumi-azure-native&amp;lt;3.0.0,&amp;gt;&lt;span class="o">=&lt;/span>2.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 2&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached Arpeggio-2.0.2-py2.py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>2.4 kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting attrs&amp;gt;&lt;span class="o">=&lt;/span>19.2 &lt;span class="o">(&lt;/span>from parver&amp;gt;&lt;span class="o">=&lt;/span>0.2.1-&amp;gt;pulumi-azure-native&amp;lt;3.0.0,&amp;gt;&lt;span class="o">=&lt;/span>2.0.0-&amp;gt;-r requirements.txt &lt;span class="o">(&lt;/span>line 2&lt;span class="o">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Using cached attrs-24.2.0-py3-none-any.whl.metadata &lt;span class="o">(&lt;/span>&lt;span class="m">11&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached pulumi-3.136.1-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">274&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached pulumi_azure_native-2.66.0-py3-none-any.whl &lt;span class="o">(&lt;/span>89.7 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached debugpy-1.8.7-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>5.2 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached dill-0.3.9-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">119&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached grpcio-1.66.2-cp310-cp310-macosx_12_0_universal2.whl &lt;span class="o">(&lt;/span>10.7 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached parver-0.5-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">15&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached protobuf-4.25.5-cp37-abi3-macosx_10_9_universal2.whl &lt;span class="o">(&lt;/span>&lt;span class="m">394&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached PyYAML-6.0.2-cp310-cp310-macosx_11_0_arm64.whl &lt;span class="o">(&lt;/span>&lt;span class="m">171&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached semver-2.13.0-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">12&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached six-1.16.0-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">11&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached typing_extensions-4.12.2-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">37&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached Arpeggio-2.0.2-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">55&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cached attrs-24.2.0-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">63&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing collected packages: arpeggio, typing-extensions, six, semver, pyyaml, protobuf, grpcio, dill, debugpy, attrs, pulumi, parver, pulumi-azure-native
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully installed arpeggio-2.0.2 attrs-24.2.0 debugpy-1.8.7 dill-0.3.9 grpcio-1.66.2 parver-0.5 protobuf-4.25.5 pulumi-3.136.1 pulumi-azure-native-2.66.0 pyyaml-6.0.2 semver-2.13.0 six-1.16.0 typing-extensions-4.12.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finished installing dependencies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finished installing dependencies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your new project is ready to go! âœ¨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To perform an initial deployment, run &lt;span class="sb">`&lt;/span>pulumi up&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸‹å›¾æ˜¯åˆå§‹åŒ–åçš„é¡¹ç›®ç›®å½•ç»“æ„ã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-project-structure.webp"
width="585"
height="271"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-project-structure_hu_d86091b7db897651.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-project-structure_hu_b5fbef00498e59ca.webp 1024w"
loading="lazy"
alt="Pulumi é¡¹ç›®ç›®å½•ç»“æ„"
class="gallery-image"
data-flex-grow="215"
data-flex-basis="518px"
>&lt;/p>
&lt;p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ª &lt;code>Pulumi.yaml&lt;/code> æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚é¡¹ç›®åç§°ã€æè¿°ã€ç¼–ç¨‹è¯­è¨€ç­‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">first-project&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">A minimal Azure Native Python Pulumi program&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">runtime&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">python&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">options&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">toolchain&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pip&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">virtualenv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">venv&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pulumi:tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pulumi:template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">azure-python&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ª &lt;code>Pulumi.dev.yaml&lt;/code> æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚ Azure çš„è®¢é˜… IDã€èµ„æºç»„åç§°ã€åŒºåŸŸç­‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">azure-native:location&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">eastasia&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ª &lt;code>__main__.py&lt;/code> æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„ä¸»ç¨‹åºï¼Œç”¨äºéƒ¨ç½² Azure èµ„æºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;An Azure RM Python Pulumi program&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pulumi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">pulumi_azure_native&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">storage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">pulumi_azure_native&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">resources&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create an Azure Resource Group åˆ›å»ºä¸€ä¸ª Azure èµ„æºç»„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">resource_group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">resources&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ResourceGroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;resource_group&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create an Azure resource (Storage Account) åˆ›å»ºä¸€ä¸ª Azure èµ„æºï¼ˆå­˜å‚¨è´¦æˆ·ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">account&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StorageAccount&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sa&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resource_group_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">resource_group&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sku&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SkuName&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">STANDARD_LRS&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">kind&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Kind&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">STORAGE_V2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Export the primary key of the Storage Account å¯¼å‡ºå­˜å‚¨è´¦æˆ·çš„ä¸»é”®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">primary_key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pulumi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Output&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">resource_group&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">account&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">lambda&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">list_storage_account_keys&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resource_group_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">account_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">.&lt;/span>&lt;span class="n">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">accountKeys&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">accountKeys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pulumi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">export&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;primary_storage_key&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">primary_key&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæœ‰ä¸€ä¸ª &lt;code>requirements.txt&lt;/code> æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„ä¾èµ–ä¿¡æ¯ï¼Œå¦‚ Pulumi å’Œ Azure Native SDK çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">pulumi&amp;gt;=3.0.0,&amp;lt;4.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pulumi-azure-native&amp;gt;=2.0.0,&amp;lt;3.0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä½¿ç”¨ &lt;code>pulumi new&lt;/code> åˆ›å»ºæ–°é¡¹ç›®æ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š &lt;code>--language&lt;/code> å‚æ•°æ¥é€‰æ‹©æ‰€éœ€çš„è¯­è¨€ã€‚ä¾‹å¦‚ï¼Œé»˜è®¤è¯­è¨€ç¡®å®æ˜¯ Pythonï¼Œä½†ä½ å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©å…¶ä»–æ”¯æŒçš„è¯­è¨€ï¼Œå¦‚ TypeScriptã€JavaScriptã€Go æˆ– C#ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ç”¨æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pulumi new &amp;lt;template-name&amp;gt; --language &amp;lt;language&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­ &lt;code>&amp;lt;language&amp;gt;&lt;/code> å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>typescript&lt;/code>ï¼ˆTypeScriptï¼‰&lt;/li>
&lt;li>&lt;code>javascript&lt;/code>ï¼ˆJavaScriptï¼‰&lt;/li>
&lt;li>&lt;code>python&lt;/code>ï¼ˆPythonï¼‰&lt;/li>
&lt;li>&lt;code>go&lt;/code>ï¼ˆGoï¼‰&lt;/li>
&lt;li>&lt;code>csharp&lt;/code>ï¼ˆC#ï¼‰&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ª TypeScript é¡¹ç›®ï¼Œå‘½ä»¤å¯ä»¥å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pulumi new &amp;lt;template-name&amp;gt; --language typescript
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæ²¡æœ‰æŒ‡å®šè¯­è¨€ï¼Œåˆ™ä¼šé»˜è®¤ä½¿ç”¨ Pythonã€‚&lt;/p>
&lt;p>å½“å‰ç”Ÿæˆäº†ä¸€ä¸ªé»˜è®¤çš„ Python ä¸»ç¨‹åºæ¨¡æ¿ï¼ŒPulumi CLI ä¼šå¯åŠ¨æœ¬åœ°çš„è¯­è¨€æœåŠ¡å™¨ï¼Œæ‰§è¡Œæ­¤ Python ç¨‹åºï¼Œå®Œæˆå’Œ Azure Cloud çš„äº¤äº’å·¥ä½œï¼Œå®ç° Python ç¨‹åºä¸­èµ„æºéƒ¨ç½²çš„æ„å›¾ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œä¿®æ”¹å’Œæ‰©å±• Python ä»£ç ï¼Œå®ç°å¯¹ Azure èµ„æºçš„éƒ¨ç½²å’Œæ›´æ–°ã€‚æ¨¡æ¿ Python ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Azure èµ„æºç»„å’Œä¸€ä¸ª Azure å­˜å‚¨è´¦ï¼Œåœ¨æœ€åå°† â€˜primary_keyâ€™å¯¼å‡ºæ˜¾ç¤ºåœ¨å‘½ä»¤ä¸­ï¼Œå®ç°äº† Python ç¨‹åºå¯¹å¤–çš„è¾“å‡ºã€‚&lt;/p>
&lt;h2 id="éƒ¨ç½²-pulumi-é¡¹ç›®">éƒ¨ç½² Pulumi é¡¹ç›®
&lt;/h2>&lt;p>åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œä½¿ç”¨ &lt;code>pulumi up&lt;/code> å‘½ä»¤ï¼Œå®Œæˆ Azure èµ„æºçš„éƒ¨ç½²ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project pulumi up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Previewing update &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/previews/539d74d9-64ec-4fb8-aa69-eb08ddbe4eea
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Plan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + pulumi:pulumi:Stack first-project-dev create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â”œâ”€ azure-native:resources:ResourceGroup resource_group create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â””â”€ azure-native:storage:StorageAccount sa create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> primary_storage_key: output&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + &lt;span class="m">3&lt;/span> to create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Do you want to perform this update? yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/updates/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + pulumi:pulumi:Stack first-project-dev created &lt;span class="o">(&lt;/span>36s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â”œâ”€ azure-native:resources:ResourceGroup resource_group created &lt;span class="o">(&lt;/span>3s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â””â”€ azure-native:storage:StorageAccount sa created &lt;span class="o">(&lt;/span>29s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> primary_storage_key: &lt;span class="s2">&amp;#34;key++++++++++++++++++++++++++++++++++++++++++++++++++++++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + &lt;span class="m">3&lt;/span> created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Duration: 38s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Š &lt;code>pulumi up&lt;/code> å‘½ä»¤æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ &lt;code>yes&lt;/code>ï¼Œç¡®è®¤æ˜¯å¦æ‰§è¡Œèµ„æºçš„åˆ›å»ºã€‚åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒPulumi CLI ä¼šç”Ÿæˆä¸€ä¸ªæ›´æ–°ä¿¡æ¯ï¼Œç”¨äºå±•ç¤ºèµ„æºçš„åˆ›å»ºçŠ¶æ€ï¼Œä»¥åŠèµ„æºçš„çŠ¶æ€ã€‚åœ¨æ›´æ–°ä¿¡æ¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»åˆ›å»ºçš„èµ„æºç±»å‹ã€åç§°ã€çŠ¶æ€ç­‰ä¿¡æ¯ã€‚åœ¨æ›´æ–°ä¿¡æ¯ä¸­ï¼Œè¿˜ä¼šæ˜¾ç¤ºä¸€ä¸ª URLï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹æ›´æ–°ä¿¡æ¯ã€‚&lt;/p>
&lt;p>åœ¨éƒ¨ç½²å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Pulumi Cloud ç½‘é¡µä¸­çœ‹åˆ°æ­¤é¡¹ç›®çš„éƒ¨ç½²è¿‡ç¨‹ï¼Œä»¥åŠèµ„æºçš„çŠ¶æ€ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-cloud-project-deploy.webp"
width="1465"
height="969"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-cloud-project-deploy_hu_84c6ac43a7bb9a0e.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/pulumi-cloud-project-deploy_hu_cf6224f0e6dfadca.webp 1024w"
loading="lazy"
alt="Pulumi Cloud é¡¹ç›®éƒ¨ç½²"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="362px"
>&lt;/p>
&lt;p>ä¸‹é¢åœ¨ Azure é—¨æˆ·ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºçš„èµ„æºç»„å’Œå­˜å‚¨è´¦æˆ·ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œèµ„æºç»„çš„åç§°æ˜¯ &lt;code>resource_group&lt;/code>ï¼Œå­˜å‚¨è´¦æˆ·çš„åç§°æ˜¯ &lt;code>sa&lt;/code>å¼€å¤´çš„èµ„æºï¼Œåé¢è·Ÿéšç€ä¸€äº›éšæœºå­—ç¬¦ã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/azure-portal-resources.webp"
width="1463"
height="868"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/azure-portal-resources_hu_530750cd313da8e2.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/azure-portal-resources_hu_bd89b5800882abc.webp 1024w"
loading="lazy"
alt="Azure é—¨æˆ·ä¸­çš„èµ„æº"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="404px"
>&lt;/p>
&lt;p>æ ¹æ®ä»¥ä¸Šçš„æ“ä½œä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒä¸‹å›¾ï¼Œç†è§£ Pulumi CLI å’Œ Azure äº‘æœåŠ¡ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/engine-block-diagram.webp"
width="1686"
height="1186"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/engine-block-diagram_hu_e10293342bdc6b98.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/engine-block-diagram_hu_fdadfd47ae52d92d.webp 1024w"
loading="lazy"
alt="Pulumi CLI å’Œ Azure äº‘æœåŠ¡äº¤äº’"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="341px"
>&lt;/p>
&lt;p>pulumi å‘½ä»¤è¡Œå·¥å…·æœ¬èº«æ˜¯ä¸€ä¸ªéƒ¨ç½²å¼•æ“ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„è¯­è¨€æœåŠ¡å™¨ï¼Œç”¨äºæ‰§è¡Œ Python ç¨‹åºï¼Œå®Œæˆå¯¹ Azure äº‘æœåŠ¡çš„èµ„æºéƒ¨ç½²ã€‚&lt;/p>
&lt;p>æœ¬ Python æµ‹è¯•é¡¹ç›®æ˜¯ä¸€ä¸ªå…¸å‹çš„ Pulumi é¡¹ç›®æ¨¡æ¿ï¼Œå®ƒä½¿ç”¨ IaC çš„æ–¹å¼ï¼Œå°† Azure èµ„æºçš„éƒ¨ç½²å’Œæ›´æ–°ï¼Œé€šè¿‡ Python ä»£ç çš„æ–¹å¼ï¼Œå®ç°äº†å¯¹ Azure èµ„æºçš„ç®¡ç†ã€‚è¿™ä¸ª Pulumi é¡¹ç›®çš„éƒ¨ç½²ç»“æœç§°ä¸º â€˜Stackâ€™ï¼Œæ˜¯ä¸€ä¸ª Azure åŸºç¡€è®¾æ–½çš„æŠ€æœ¯æ ˆï¼Œæœ¬é¡¹ç›®æ¨¡æ¿ç›®å½•å¯ä»¥åœ¨ä½ çš„ä¸šåŠ¡åº”ç”¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå­ç›®å½•ï¼Œç”¨äºç®¡ç† Azure èµ„æºçš„éƒ¨ç½²å’Œæ›´æ–°ã€‚éšç€ä¸šåŠ¡é¡¹ç›®çš„å¼€å‘å’Œè¿­ä»£ï¼Œå¯ä»¥é€šè¿‡ Pulumi CLI å·¥å…·ï¼Œå®Œæˆ Azure å¤šä¸ªç¯å¢ƒèµ„æºçš„éƒ¨ç½²å’Œæ›´æ–°ï¼Œä¾‹å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/infra-project.webp"
width="743"
height="454"
srcset="https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/infra-project_hu_9af4161a74bb9d6.webp 480w, https://martinliu.cn/blog/pulumi-azure-quickstart-guide-macos-local/infra-project_hu_b7ca6c4c1b313945.webp 1024w"
loading="lazy"
alt="Pulumi é¡¹ç›®æ¨¡æ¿"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="392px"
>&lt;/p>
&lt;h2 id="æ›´æ–°-pulumi-é¡¹ç›®">æ›´æ–° Pulumi é¡¹ç›®
&lt;/h2>&lt;p>åœ¨å‡†å¤‡å¥½ä»¥ä¸Šçš„ç¯å¢ƒåï¼Œå‡è®¾æˆ‘ä»¬æ”¶åˆ°äº†ä¸€ä¸ªæ–°çš„ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦åœ¨ Azure å­˜å‚¨è´¦æˆ·ä¸­éƒ¨ç½²ä¸€ä¸ª &lt;code>index.html&lt;/code> æ–‡ä»¶ï¼Œç”¨äºå±•ç¤ºä¸€ä¸ªç®€å•çš„é™æ€ç½‘é¡µã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ &lt;code>__main__.py&lt;/code> æ–‡ä»¶ï¼Œå¢åŠ ä¸€ä¸ª Azure Blob å­˜å‚¨çš„èµ„æºï¼Œç”¨äºéƒ¨ç½² &lt;code>index.html&lt;/code> æ–‡ä»¶ã€‚&lt;/p>
&lt;p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ç°åœ¨å‘½ä»¤ï¼Œåœ¨å½“å‰çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª &lt;code>index.html&lt;/code> æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cat &lt;span class="s">&amp;lt;&amp;lt;EOT &amp;gt; index.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;h1&amp;gt;Hello, Pulumi!&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> &amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOT&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œè¿™ä¸ª &lt;code>index.html&lt;/code> æ–‡ä»¶æ˜¯ä¸šåŠ¡éœ€æ±‚æˆæœï¼Œæ˜¯ä¸åº”è¯¥æ”¾åœ¨ IaC ç¨‹åºä»£ç çš„ç›®å½•ä¸­çš„ã€‚&lt;/p>
&lt;p>ä¸‹é¢éœ€è¦åœ¨ &lt;code>__main__.py&lt;/code> æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ Azure Blob å­˜å‚¨çš„èµ„æºå±æ€§ï¼Œç”¨äºéƒ¨ç½² &lt;code>index.html&lt;/code> æ–‡ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Enable static website support å¯ç”¨é™æ€ç½‘ç«™æ”¯æŒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">static_website&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">StorageAccountStaticWebsite&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;staticWebsite&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">account_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">account&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resource_group_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">resource_group&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index_document&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;index.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Upload the file å°†æ–‡ä»¶ä¸Šä¼ åˆ°å­˜å‚¨è´¦æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">index_html&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Blob&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;index.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">resource_group_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">resource_group&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">account_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">account&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">container_name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">static_website&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">container_name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pulumi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FileAsset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;index.html&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content_type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Web endpoint to the website åœ¨å‘½ä»¤è¡Œä¸­å¯¼å‡ºç½‘ç«™çš„ Web ç«¯ç‚¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pulumi&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">export&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;staticEndpoint&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">account&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">primary_endpoints&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">web&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨å®Œæˆäº†ä»¥ä¸Šçš„ä¿®æ”¹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>pulumi up&lt;/code> å‘½ä»¤ï¼Œå®Œæˆ Azure èµ„æºçš„æ›´æ–°ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pulumi.dev.yaml __main__.py index.html venv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Pulumi.yaml __pycache__ requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project pulumi up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Previewing update &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/previews/613fd4dc-ce8b-4a32-a8f6-713c2e4dc839
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Plan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pulumi:pulumi:Stack first-project-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â”œâ”€ azure-native:storage:StorageAccountStaticWebsite staticWebsite create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â””â”€ azure-native:storage:Blob index.html create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + staticEndpoint : &lt;span class="s2">&amp;#34;https://sa4ecf74cb.z7.web.core.windows.net/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + &lt;span class="m">2&lt;/span> to create
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> unchanged
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Do you want to perform this update? yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Updating &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/updates/2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pulumi:pulumi:Stack first-project-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â”œâ”€ azure-native:storage:StorageAccountStaticWebsite staticWebsite created &lt;span class="o">(&lt;/span>5s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + â””â”€ azure-native:storage:Blob index.html created &lt;span class="o">(&lt;/span>3s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> primary_storage_key: &lt;span class="s2">&amp;#34;key++++++++++++++++++++++++++++++++++++++++++++++++++++++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + staticEndpoint : &lt;span class="s2">&amp;#34;https://sa4ecf74cb.z7.web.core.windows.net/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> + &lt;span class="m">2&lt;/span> created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> unchanged
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Duration: 13s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ Pulumi Cloud ç½‘é¡µä¸­çœ‹åˆ°æ­¤é¡¹ç›®çš„éƒ¨ç½²è¿‡ç¨‹ï¼Œä»¥åŠèµ„æºçš„çŠ¶æ€ä¿¡æ¯ã€‚è¿˜å¯ä»¥åœ¨ Azure é—¨æˆ·ä¸­ï¼Œçœ‹åˆ°æ›´æ–°åçš„èµ„æºç»„å’Œå­˜å‚¨è´¦æˆ·ã€‚&lt;/p>
&lt;p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­ï¼ŒæŸ¥çœ‹å¯¼å‡ºçš„ &lt;code>staticEndpoint&lt;/code> è¾“å‡ºï¼Œç”¨äºéªŒè¯æ‰€éƒ¨ç½²çš„é™æ€ç½‘ç«™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl &lt;span class="k">$(&lt;/span>pulumi stack output staticEndpoint&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project curl &lt;span class="k">$(&lt;/span>pulumi stack output staticEndpoint&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;h1&amp;gt;Hello, Pulumi!&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨æµè§ˆå™¨ä¸­ï¼Œè®¿é—® &lt;code>staticEndpoint&lt;/code> è¾“å‡ºçš„ URLï¼Œå¯ä»¥çœ‹åˆ°éƒ¨ç½²çš„é™æ€ç½‘ç«™ã€‚&lt;/p>
&lt;h2 id="åˆ é™¤-pulumi-é¡¹ç›®">åˆ é™¤ Pulumi é¡¹ç›®
&lt;/h2>&lt;p>å‡è®¾æˆ‘ä»¬å®Œæˆäº†ä»Šå¤©çš„å¼€å‘å’Œæµ‹è¯•å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code>pulumi destroy&lt;/code> å‘½ä»¤ï¼Œåˆ é™¤æ‰€æœ‰å½“å‰åœ¨ Azure ä¸Šæ‰€éƒ¨ç½²çš„èµ„æºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>base&lt;span class="o">)&lt;/span> âœ first-project pulumi destroy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Previewing destroy &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/previews/3d3257e7-c853-4d89-bfc0-461a37bf94ee
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Plan
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - pulumi:pulumi:Stack first-project-dev delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:Blob index.html delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:StorageAccountStaticWebsite staticWebsite delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:StorageAccount sa delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â””â”€ azure-native:resources:ResourceGroup resource_group delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - primary_storage_key: &lt;span class="s2">&amp;#34;key++++++++++++++++++++++++++++++++++++++++++++++++++++++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - staticEndpoint : &lt;span class="s2">&amp;#34;https://sa4ecf74cb.z7.web.core.windows.net/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &lt;span class="m">5&lt;/span> to delete
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Do you want to perform this destroy? yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Destroying &lt;span class="o">(&lt;/span>dev&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">View in Browser &lt;span class="o">(&lt;/span>Ctrl+O&lt;span class="o">)&lt;/span>: https://app.pulumi.com/martinliu/first-project/dev/updates/3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Name Status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - pulumi:pulumi:Stack first-project-dev deleted &lt;span class="o">(&lt;/span>0.69s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:Blob index.html deleted &lt;span class="o">(&lt;/span>5s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:StorageAccountStaticWebsite staticWebsite deleted &lt;span class="o">(&lt;/span>1s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â”œâ”€ azure-native:storage:StorageAccount sa deleted &lt;span class="o">(&lt;/span>7s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - â””â”€ azure-native:resources:ResourceGroup resource_group deleted &lt;span class="o">(&lt;/span>83s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - primary_storage_key: &lt;span class="s2">&amp;#34;key++++++++++++++++++++++++++++++++++++++++++++++++++++++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - staticEndpoint : &lt;span class="s2">&amp;#34;https://sa4ecf74cb.z7.web.core.windows.net/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - &lt;span class="m">5&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Duration: 1m42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The resources in the stack have been deleted, but the &lt;span class="nb">history&lt;/span> and configuration associated with the stack are still maintained.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you want to remove the stack completely, run &lt;span class="sb">`&lt;/span>pulumi stack rm dev&lt;span class="sb">`&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åœ¨ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ Pulumi Cloud ç½‘é¡µä¸­çœ‹åˆ°æ­¤é¡¹ç›®çš„éƒ¨ç½²è¿‡ç¨‹ï¼Œä»¥åŠèµ„æºçš„çŠ¶æ€ä¿¡æ¯ã€‚è¿˜å¯ä»¥åœ¨ Azure é—¨æˆ·ä¸­ï¼Œçœ‹åˆ°åˆ é™¤åçš„èµ„æºç»„å’Œå­˜å‚¨è´¦æˆ·ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“
&lt;/h2>&lt;p>æ‚¨å·²æˆåŠŸä½¿ç”¨ Pulumi éƒ¨ç½²äº†ä¸€äº›äº‘èµ„æºã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨å®Œæˆäº†ä»¥ä¸‹æ“ä½œï¼š&lt;/p>
&lt;ul>
&lt;li>åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Pulumi é¡¹ç›®ã€‚&lt;/li>
&lt;li>åœ¨ Azure ä¸Šéƒ¨ç½²äº†ä¸€ä¸ªæ–°çš„å­˜å‚¨è´¦æˆ·å’Œå®¹å™¨ã€‚&lt;/li>
&lt;li>å°†ä¸€ä¸ª index.html æ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚&lt;/li>
&lt;li>å°† index.html æ–‡ä»¶æ‰˜ç®¡ä¸ºé™æ€ç½‘ç«™ã€‚&lt;/li>
&lt;li>é”€æ¯äº†å·²éƒ¨ç½²çš„èµ„æºã€‚&lt;/li>
&lt;/ul>
&lt;p>åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæ‚¨äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Pulumi CLI å’Œ Azure CLI åœ¨æœ¬åœ° macOS ç¯å¢ƒä¸­ï¼Œéƒ¨ç½² Azure èµ„æºã€‚æ‚¨è¿˜äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Pulumi Cloud æœåŠ¡ï¼Œç”¨äºå­˜å‚¨ Pulumi é¡¹ç›®çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠæä¾›ä¸€äº›å…¶ä»–çš„æœåŠ¡ã€‚&lt;/p>
&lt;p>å‚è€ƒæ–‡æ¡£ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.pulumi.com/docs/" target="_blank" rel="noopener"
>Pulumi å®˜æ–¹æ–‡æ¡£&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.pulumi.com/docs/iac/get-started/azure/" target="_blank" rel="noopener"
>Get started with Pulumi &amp;amp; Azure&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>