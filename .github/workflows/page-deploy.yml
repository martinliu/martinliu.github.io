# 将 Hubo 博客构建后部署到 Github Pages
name: Deploy to CloudFlare

# 在pr发生的时候这个Action才会触发
on:
  push:
    branches:
      - main

# 以下是本串行执行工作流的所有组成部分
jobs:
  # 这里只定义了一个多步骤的作业
  build-deploy-to-github-pages:
    # 将后续的所有工作步骤都运行在最新版的 ubuntu 操作系统容器中
    runs-on: ubuntu-latest

    # 所有步骤Actions的定义如下
    steps:
      # Step 1 - CloudFlare发布到 Pages CDN 的生产环境
      - name: Triger CloudFlare hook
        run: curl -X POST "https://api.cloudflare.com/client/v4/pages/webhooks/deploy_hooks/b1b6b15d-b582-4304-bb0a-238b32bc3eb7"