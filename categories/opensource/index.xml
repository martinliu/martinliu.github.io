<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>开源 on Martin Liu's Blog</title><link>https://martinliu.cn/categories/opensource/</link><description>Recent content in 开源 on Martin Liu's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://martinliu.cn/categories/opensource/index.xml" rel="self" type="application/rss+xml"/><item><title>Kops on Aws</title><link>https://martinliu.cn/blog/kops-on-aws/</link><pubDate>Mon, 02 Apr 2018 00:22:44 +0800</pubDate><guid>https://martinliu.cn/blog/kops-on-aws/</guid><description>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/BingWallpaper-2018-03-17.jpg" alt="Featured image of post Kops on Aws" />&lt;p>kops这种方式是我找到的最佳的，最适合于培训课堂需要的安装方式，当然对有类似需求的人有帮助。&lt;/p>
&lt;h2 id="route53-dns配置">Route53 DNS配置
&lt;/h2>&lt;p>kops需要使用DNS服务，用主机名提供k8s的相关服务访问。配置的注意点：&lt;/p>
&lt;ul>
&lt;li>域名还是有必要有一个的，没有的话注册一个也不贵，以后用着也方便&lt;/li>
&lt;li>建议在aws的Route53里做一个二级域名，例如：k8s.devopscoach.org&lt;/li>
&lt;li>这个二级域名最好是能被正常公网解析的，为了便于直接访问集群里的服务&lt;/li>
&lt;li>用 dig NS k8s.devopscoach.org 可以能正常解析（Mac上是这个命令）&lt;/li>
&lt;/ul>
&lt;p>由于全球的域名同步会需要一些时间，因此可以先做这一步，用到的时候，可能就已经同步好了。&lt;/p>
&lt;p>kops会将所有主机的域名解析都自动化的添加A记录到这里。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/dns.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="安装工具准备">安装工具准备
&lt;/h2>&lt;p>需要安装的工具包括 kubectl, kops 和 AWS CLI 工具。kops需要调用 AWS CLI来创建所需要的资源。我觉得简单的方法是：在目标的Region里创建一台Amazon AMI的虚拟机，这样AWS CLI就不用装了，而且在云里的话，执行kops的时候，由于有一大堆资源创建更新的api调用，感觉速度比在本机快很多，而且还用担心断网。&lt;/p>
&lt;p>可以启动一台t2.micro规格的Amazon AMI即可，另外需要给这个实例配置如下IAM用户权限，在启动的时候选择合适的IAM Role。&lt;/p>
&lt;ul>
&lt;li>AmazonEC2FullAccess&lt;/li>
&lt;li>AmazonRoute53FullAccess&lt;/li>
&lt;li>AmazonS3FullAccess&lt;/li>
&lt;li>IAMFullAccess&lt;/li>
&lt;li>AmazonVPCFullAccess&lt;/li>
&lt;/ul>
&lt;p>这台虚拟机启动之后，安装kubectl和kops。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">LO&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">googleapis&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">storage&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">googleapis&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">release&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">amd64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">kubectl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">mv&lt;/span> &lt;span class="n">kubectl&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubectl&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">wget&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kubernetes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kops&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">releases&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.8&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kops&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">kops&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">mv&lt;/span> &lt;span class="n">kops&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">amd64&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">kops&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>准备ssh登陆秘钥，用户ssh登录各个ec2实例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ ssh-keygen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter file in which to save the key (/home/ec2-user/.ssh/id_rsa):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter passphrase (empty for no passphrase):
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your identification has been saved in /home/ec2-user/.ssh/id_rsa.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your public key has been saved in /home/ec2-user/.ssh/id_rsa.pub.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key fingerprint is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">SHA256:oSPZf85vNsC7l9z24umLJs4tQ6qDMCrWfqAVXGYoA34 ec2-user@ip-172-31-27-182
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The key&amp;#39;s randomart image is:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+---[RSA 2048]----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|o . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|.o . + |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .+E+ . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .o o . . |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| + + S. |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| oo . o + |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">| .+o.. .o.+ o |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|oo .... .==.O.+. |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">|o ... .o .*@+==+.|
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+----[SHA256]-----+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建s3-bucket">创建S3 bucket
&lt;/h2>&lt;p>这是用来存储Kubernetes群集的配置信息的，kops在创建、运行、更新和管理它创建的群集过程中，没个Cluster的信息可以保存在bucket的一个目录中。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ec2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">182&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">aws&lt;/span> &lt;span class="n">s3&lt;/span> &lt;span class="n">mb&lt;/span> &lt;span class="n">s3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">clusters&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">devopscoach&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">make_bucket&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">clusters&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">devopscoach&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">ec2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">31&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">182&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">KOPS_STATE_STORE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">s3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">clusters&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">k8s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">devopscoach&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>创建完成后，将其放入环境变量中待用。&lt;/p>
&lt;p>在集群安装完成之后，bucket里面的文件如下：&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/s3.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="创建kubernetes-cluster">创建Kubernetes Cluster
&lt;/h2>&lt;p>命令行参数如下：&lt;/p>
&lt;ul>
&lt;li>kops create cluster //创建集群&lt;/li>
&lt;li>&amp;ndash;cloud=aws //使用aws&lt;/li>
&lt;li>&amp;ndash;zones=ap-northeast-1a //使用这个指定的zone&lt;/li>
&lt;li>&amp;ndash;name=dev.k8s.devopscoach.org //集群的名字&lt;/li>
&lt;li>&amp;ndash;dns-zone=k8s.devopscoach.org //集群所使用的DNS解析区&lt;/li>
&lt;li>&amp;ndash;dns public //对公可访问&lt;/li>
&lt;/ul>
&lt;p>命令的执行结果如下。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops create cluster --cloud=aws --zones=ap-northeast-1a --name=dev.k8s.devopscoach.org --dns-zone=k8s.devopscoach.org --dns public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:06.003257 30031 create_cluster.go:971] Using SSH public key: /home/ec2-user/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:07.132058 30031 subnets.go:184] Assigned CIDR 172.20.32.0/19 to subnet ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Previewing changes that will be made:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A new kops version is available: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Upgrading is recommended
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">More information: https://github.com/kubernetes/kops/blob/master/permalinks/upgrade_kops.md#1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:12.605297 30031 executor.go:91] Tasks: 0 done / 73 total; 31 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:05:13.546597 30031 executor.go:91] Tasks: 31 done / 73 total; 24 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-----此处删除了n个字符------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPC/dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CIDR 172.20.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> EnableDNSHostnames true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> EnableDNSSupport true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Shared false
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tags {Name: dev.k8s.devopscoach.org, KubernetesCluster: dev.k8s.devopscoach.org, kubernetes.io/cluster/dev.k8s.devopscoach.org: owned}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPCDHCPOptionsAssociation/dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> VPC name:dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DHCPOptions name:dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Must specify --yes to apply changes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cluster configuration has been created.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Suggestions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list clusters with: kops get cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit this cluster with: kops edit cluster dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit your node instance group: kops edit ig --name=dev.k8s.devopscoach.org nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * edit your master instance group: kops edit ig --name=dev.k8s.devopscoach.org master-ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Finally configure your cluster with: kops update cluster dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>kops命令列出了所有需要建立的资源清单。而真实的开始资源创建，并搭建和配置Kubernetes集群还需要执行，以上输出中提示的最后一条命令: &lt;code>kops update cluster dev.k8s.devopscoach.org --yes &lt;/code>&lt;/p>
&lt;p>执行结果如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops update cluster dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">A new kops version is available: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Upgrading is recommended
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">More information: https://github.com/kubernetes/kops/blob/master/permalinks/upgrade_kops.md#1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*********************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:02.482203 30077 executor.go:91] Tasks: 0 done / 73 total; 31 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:04.389402 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-aggregator-ca&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:04.628667 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;ca&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:07.291294 30077 executor.go:91] Tasks: 31 done / 73 total; 24 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.273293 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubelet-api&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.803612 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubelet&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.809131 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-scheduler&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:09.973826 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-proxy-client&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.317412 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kops&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.321177 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;apiserver-aggregator&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.440919 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-controller-manager&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:10.630182 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kubecfg&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:11.020560 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;master&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:11.040010 30077 vfs_castore.go:430] Issuing new certificate: &amp;#34;kube-proxy&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:12.698208 30077 executor.go:91] Tasks: 55 done / 73 total; 16 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:13.609559 30077 launchconfiguration.go:333] waiting for IAM instance profile &amp;#34;nodes.dev.k8s.devopscoach.org&amp;#34; to be ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:13.656221 30077 launchconfiguration.go:333] waiting for IAM instance profile &amp;#34;masters.dev.k8s.devopscoach.org&amp;#34; to be ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.156701 30077 executor.go:91] Tasks: 71 done / 73 total; 2 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.864262 30077 executor.go:91] Tasks: 73 done / 73 total; 0 can run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:24.864379 30077 dns.go:153] Pre-creating DNS records
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0401 17:13:26.454177 30077 update_cluster.go:248] Exporting kubecfg for cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kops has set your kubectl context to dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cluster is starting. It should be ready in a few minutes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Suggestions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * validate cluster: kops validate cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * list nodes: kubectl get nodes --show-labels
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * ssh to the master: ssh -i ~/.ssh/id_rsa admin@api.dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The admin user is specific to Debian. If not using Debian please use the appropriate user based on your OS.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * read about installing addons: https://github.com/kubernetes/kops/blob/master/docs/addons.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上这套组合拳打出去之后，需要等几分钟才能完成Kubernetes集群的部署。&lt;/p>
&lt;p>在以上实例中创建的Ec2实例如下：&lt;/p>
&lt;ul>
&lt;li>master-ap-northeast-1a.masters.dev.k8s.devopscoach.org //m3.medium&lt;/li>
&lt;li>nodes.dev.k8s.devopscoach.org //t2.medium&lt;/li>
&lt;li>nodes.dev.k8s.devopscoach.org //t2.medium&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/ec2.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;p>也创建了两个ASG：&lt;/p>
&lt;ul>
&lt;li>一个是针对master的扩容规则&lt;/li>
&lt;li>另外一个是针对worker node的扩容规则&lt;/li>
&lt;/ul>
&lt;p>从扩容规则为空可以看出，它主要是用于定义集群规格的，而非自动化扩容的。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/asg.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;p>在安装完成之后，用一下命令确认集群状态如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kops validate cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using cluster from kubectl context: dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Validating cluster dev.k8s.devopscoach.org
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">INSTANCE GROUPS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME ROLE MACHINETYPE MIN MAX SUBNETS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master-ap-northeast-1a Master m3.medium 1 1 ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodes Node t2.medium 2 2 ap-northeast-1a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NODE STATUS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME ROLE READY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-38-48.ap-northeast-1.compute.internal master True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-45-235.ap-northeast-1.compute.internal node True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-63-157.ap-northeast-1.compute.internal node True
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your cluster dev.k8s.devopscoach.org is ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get nodes --show-labels
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION LABELS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-38-48.ap-northeast-1.compute.internal Ready master 5m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=m3.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=master-ap-northeast-1a,kubernetes.io/hostname=ip-172-20-38-48.ap-northeast-1.compute.internal,kubernetes.io/role=master,node-role.kubernetes.io/master=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-45-235.ap-northeast-1.compute.internal Ready node 4m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=t2.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=nodes,kubernetes.io/hostname=ip-172-20-45-235.ap-northeast-1.compute.internal,kubernetes.io/role=node,node-role.kubernetes.io/node=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip-172-20-63-157.ap-northeast-1.compute.internal Ready node 4m v1.8.7 beta.kubernetes.io/arch=amd64,beta.kubernetes.io/instance-type=t2.medium,beta.kubernetes.io/os=linux,failure-domain.beta.kubernetes.io/region=ap-northeast-1,failure-domain.beta.kubernetes.io/zone=ap-northeast-1a,kops.k8s.io/instancegroup=nodes,kubernetes.io/hostname=ip-172-20-63-157.ap-northeast-1.compute.internal,kubernetes.io/role=node,node-role.kubernetes.io/node=
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="创建并访问服务">创建并访问服务
&lt;/h2>&lt;p>如下所示的创建两副本的nginx部署，部署的命令 sample-nginx。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl run sample-nginx --image=nginx --replicas=2 --port=80
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps &amp;#34;sample-nginx&amp;#34; created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get pods
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx-7588757c8f-jvkjt 1/1 Running 0 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx-7588757c8f-zq8tj 1/1 Running 0 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get deployments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx 2 2 2 2 13s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后将这个部署暴露为服务，使用到Kubernetes的命令如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl expose deployment sample-nginx --port=80 --type=LoadBalancer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service &amp;#34;sample-nginx&amp;#34; exposed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">[ec2-user@ip-172-31-27-182 ~]$ kubectl get services -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes ClusterIP 100.64.0.1 &amp;lt;none&amp;gt; 443/TCP 10m &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample-nginx LoadBalancer 100.64.127.19 ae3a1ca9235d111e890d706038dd676b-392190656.ap-northeast-1.elb.amazonaws.com 80:30363/TCP 25s run=sample-nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这条命令 &lt;code>ubectl expose deployment sample-nginx --port=80 --type=LoadBalancer &lt;/code> 会创建一个ELB并将，集群里容正在运行的 sample—nginx 服务注册到这个ELB，然后就可以访问浏览到Nginx的默认页面了。&lt;/p>
&lt;p>&lt;img src="https://res.cloudinary.com/martinliu/image/upload/nginx.png"
loading="lazy"
alt="kops On aws"
>&lt;/p>
&lt;h2 id="删除集群">删除集群
&lt;/h2>&lt;p>用一条命令就能删除以上所建立的Kubernetes集群。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">kops delete cluster --name=dev.k8s.devopscoach.org --yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>EXIN DevOps Master 认证考试</title><link>https://martinliu.cn/2016/11/07/exin-devops-master-e8aea4e8af81e88083e8af95/</link><pubDate>Mon, 07 Nov 2016 15:19:08 +0000</pubDate><guid>https://martinliu.cn/2016/11/07/exin-devops-master-e8aea4e8af81e88083e8af95/</guid><description>&lt;p>DevOps 这个词在去年参加红帽全球用户大会的时候就深深吸引了我，实际上哪个会上 Docker 容器的概念要比 DevOps 还火爆。Docker／openshift 相关的 session 都尝尝是爆满的。从那里开始我逐渐感觉到了开源容器技术的强大和吸引力。&lt;/p>
&lt;p>从红帽开始 OpenShift 的考试就是我在完成 RHCA 红帽认证架构师之后的一个心结，至今也没有完成。不过这根草我早晚是要拔掉的。主要是由于 OpenShift 是 Docker ＋ kubernetes 的组合；是如今企业级 PaaS 容器平台的主要技术路线。总之离开红帽是如此的仓促，说实话这也是我职业生涯中的一个不小的遗憾。当时确实觉得 kubernetes 的命令行操作不是很方便，而且在 OpenShift 并没有降低这个门槛，也即是说在 OpenShift 里面还是要有一定的工作量和技能的要求在编写 kubernetes 的 yml 文件上。在这一点上，及时我熟练掌握了 Rancher 之后，同样发现编写 compose file 也是难以逃避的。在推广一步，大部分 Docker PaaS 平台也都是这样，很多产品也是在界面上提供一个文本输入框，让人输入容器服务定义文件的内容。&lt;/p>
&lt;p>在最近的半年中，我的所有技术研究都集中在 Docker 和其服务编排技术上。与很多用户做过技术交流，PoC 测试，有些单子也落地。总结后，有些结果让我感叹。国内的所有企业不区分规模和行业，其实他们对国内原生的创业公司是欢迎的，由于这些公司提供的是国产软件和技术服务。在 Docker 这个火热的领域中，已经有 20 多家国内创业公司，我想所有的公司也都已经接受到了这一点的福利了。外国软件通常给人的感觉是：不是国产软件（不要小看国内公司对国产软件的诉求），纯英文操作界面和文档，可能的水土不服，高昂的软件价格和服务费，如果技术太新的化很可能厂商也不具备足够的技术实力和服务力量。&lt;/p>
&lt;p>经过了一些 Docker 容器项目之后，可以断言的是容器市场的火爆和它的技术优势是直接相关的。容器化之后的应用可以通过服务编排工具快速地部署／更新、弹性地伸缩和使用资源，优化其传统应用运维的若干缺陷。容器的轻量和 just enough 的隔离技术让资源池的管理更加简单，利用率大幅度提升，这对研发部门的环境管理是不小的提升，使 CI 的过程更加高效和经济。Docker 对微服务的支持也深深地诱惑了所有开发者，做系统微服务实施开发者能想到的实施技术大多数会是容器。&lt;/p>
&lt;p>以上容器的优势和特性使得国内的这些项目落地和实施的可能性进一步提高，甚至很多项目的速度远远超预期；按照我多年的经验看，一个软件技术型的项目，用户纠结半年到一年以上是很正常的。可能也跟国内企业包容本土化软件公司，追捧新潮技术直接相关；我观察到的一些项目，在 2 ～ 4 个月内落单的屡见不鲜。有些试点的 DevOps 咨询项目也落地很快。&lt;/p>
&lt;p>这些项目都殊途同归地指向了 DevOps 这个关键词，这让我不得不从去年开始就关注和学习这个最佳实践。当然，我对 DevOps 的前途非常看好，因此当我听说业内出现了相关认证考试之后，我毫不犹豫地报名参加了。经过 2 个多月的缜密的准备，我终于幸运地一次通过了这个考试。考试获得了两个证书。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/EXIN-DevOps-Master-Cert-Martin-Liu.jpg"
loading="lazy"
alt="exin-devops-master-cert-martin-liu"
> DevOps Master&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/certificate-devops-freelance-trainer-Liu-Zheng.jpg"
loading="lazy"
alt="DevOps Master 认证自由讲师"
> DevOps Master 认证自由讲师&lt;/p>
&lt;p>我参加的是讲师认证培训 TTT，很高兴能成为 Exin 在国内的首批 5 个认证人员之一。在准备这个考试的过程中我学习了一些书籍，现在还在深度学习的书有两本。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/14678659256890.jpg"
loading="lazy"
alt="14678659256890"
>&lt;/p>
&lt;p>我完成了这本黑皮书的读书笔记，很遗憾的是，我发现它的最新版，把封面改成了白底的了，我不能在叫它黑皮书／黑宝书了。这本书我起码看了两遍；目前正在调试它的书中的代码，代码中的营养还是很高的，计划尽快把所有代码调试通过；从而完成我许下多次的线上分享本书的诺言。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/11/14749866044733.jpg"
loading="lazy"
alt="14749866044733"
>&lt;/p>
&lt;p>这本书被我称为 CD 红皮书／红宝书。本书早在 10 年就出版了，也就是说比 Docker 早好多年。他给我最大的印象就是，作者每一页上似乎都在介绍这做事情的原则和规矩是什么？我一点也不夸张，他对 CD 的介绍，就是通过讲解一系列在项目上的经验总结。对作者这种级别的经验，和写书的房子只能用一个词总结“服”。这本书太干，我至今还没有消化完。他让我看到了解决发布和变更风险的终极解决方案，没有一次性解决问题的部署／配置／发布工具，有的是历练和打磨了千万次的持续部署流水线；隐约地觉得没用入手的企业都会慢慢跟上的。&lt;/p>
&lt;p>以上是我对 DevOps 的阶段性总结，跨度有半年之久。这半年中我逐渐看清了我的主要兴趣点，抛除所有其他主题，目前剩下的就是：云计算和 DevOps。一方面觉得年纪不饶人，不能可能在和年轻人拼精力、体力和创意；我的背景和经验都让我感觉，在这两个话题上，我还是有很多年的经验和技术积累和总结的。云计算是（公有云＋私有云）未来企业 IT 基础架构的走向；DevOps 是目前看比较正确的运作实践。一个便技术，一个便管理，正好完整覆盖了我的经验；在其对应的开源技术这个分支里，我想它们都还有这很多的为探索和研究的项目。&lt;/p></description></item><item><title>DevOps 的起点-入手微型数据中心</title><link>https://martinliu.cn/2016/07/01/devops-in-a-box/</link><pubDate>Fri, 01 Jul 2016 03:11:10 +0000</pubDate><guid>https://martinliu.cn/2016/07/01/devops-in-a-box/</guid><description>&lt;h2 id="测试环境说明">测试环境说明
&lt;/h2>&lt;p>我的笔记本电脑的环境描述如下。&lt;/p>
&lt;h3 id="os">OS
&lt;/h3>&lt;p>MacBook Pro 2011 版， 2.3 GHz Intel Core i5， 8GB DDR3， 256 GB SSD。 OS X EI Capitan version 10.11.5&lt;/p>
&lt;h3 id="docker">Docker
&lt;/h3>&lt;p>Docker for Mac Version 1.12.0-rc2-beta17 (build: 9779)&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Client:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: 906eacd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Fri Jun 17 20:35:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: darwin/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Version: 1.12.0-rc2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> API version: 1.24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Go version: go1.6.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Git commit: a7119de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Built: Wed Jun 29 10:03:33 2016
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> OS/Arch: linux/amd64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Experimental: true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-machine version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-machine version 0.8.0-rc1, build fffa6c9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents [9:38:31]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ docker-compose version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose version 1.8.0-rc1, build 9bf6bc6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-py version: 1.8.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CPython version: 2.7.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OpenSSL version: OpenSSL 1.0.2h 3 May 2016
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>VirtualBox version 5.0.22r108108&lt;/p>
&lt;h3 id="本机下载的-docker-镜像">本机下载的 Docker 镜像
&lt;/h3>&lt;p>/Users/martin/Downloads/1.12.0-rc2/boot2docker.iso&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-v1.0.1.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-agent-instance-v0.8.1.tar&lt;/p>
&lt;p>~/Downloads/habitat-docker-registry.bintray.io-studio.tar&lt;/p>
&lt;p>~/Downloads/rancher-all/rancher-server-stable.tar&lt;/p>
&lt;p>我本机还有一个 Docker Registry 的 vm，这里面提供了我需要积累以后用的镜像存储，想象一下你在飞机上的时候去哪里拉取镜像 ：）&lt;/p>
&lt;h3 id="本机下载的代码">本机下载的代码
&lt;/h3>&lt;p>&lt;a class="link" href="https://github.com/habitat-sh/habitat-example-plans" target="_blank" rel="noopener"
>https://github.com/habitat-sh/habitat-example-plans&lt;/a> &lt;a class="link" href="https://github.com/janeczku/habitat-plans" target="_blank" rel="noopener"
>https://github.com/janeczku/habitat-plans&lt;/a> &lt;a class="link" href="https://github.com/chrisurwin/may2016-demo" target="_blank" rel="noopener"
>https://github.com/chrisurwin/may2016-demo&lt;/a> &lt;a class="link" href="https://github.com/docker/example-voting-app" target="_blank" rel="noopener"
>https://github.com/docker/example-voting-app&lt;/a>&lt;/p>
&lt;p>注意以上代码可能需要修改才能在本机调试成功。&lt;/p>
&lt;h2 id="创建-rancher-服务器">创建 Rancher 服务器
&lt;/h2>&lt;h3 id="生成虚拟机">生成虚拟机
&lt;/h3>&lt;p>用 docker-machine 创建 rancher 服务器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">rancher&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">driver&lt;/span> &lt;span class="n">virtualbox&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">count&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">disk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="s2">&amp;#34;8000&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">memory&lt;/span> &lt;span class="s2">&amp;#34;1024&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rc2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">eval&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">env&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="导入-rancher-服务器镜像">导入 Rancher 服务器镜像
&lt;/h3>&lt;p>用 docker-machine ls 应该看到 rancher 这个节点打了星号。否则 docker 命令会执行失败或者错误。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stable&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">always&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">srv&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">8080&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">stable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">logs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">srv&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 rancher 服务器的 ip 地址。 docker-machine ip rancher&lt;/p>
&lt;p>用浏览器打开 Rancher 服务器的登录页面。 open http://Rancher_Server_IP:8080&lt;/p>
&lt;p>下面是一些如何让虚拟机保持固定 IP 和 rancher 容器存储的数据持久存在的代码，我没有测试成功，留下大家一起搞，成功了，给我一个回复。另外还有关于稿 jekins 和 mirror 的代码。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;ifconfig eth1 192.168.99.60 netmask 255.255.255.0 broadcast 192.168.99.255 up&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">ssh&lt;/span> &lt;span class="n">node1&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">tee&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bootsync&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">regenerate&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certs&lt;/span> &lt;span class="n">node1&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">ssh&lt;/span> &lt;span class="n">ndoe1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sda1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">node1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sda1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">$&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="n">bootsync&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ifconfig&lt;/span> &lt;span class="n">eth1&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">99.60&lt;/span> &lt;span class="n">netmask&lt;/span> &lt;span class="mf">255.255&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">255.0&lt;/span> &lt;span class="n">broadcast&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">99.255&lt;/span> &lt;span class="n">up&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sda1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sudo&lt;/span> &lt;span class="n">ln&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">mnt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sda1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jenkins&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">jekins&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">9001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib64&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdevmapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libdevmapper&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.02&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">label&lt;/span> &lt;span class="n">io&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">network&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="bp">true&lt;/span> &lt;span class="n">jenkins&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">mirror&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">driver&lt;/span> &lt;span class="n">virtualbox&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">count&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">disk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="s2">&amp;#34;8000&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">memory&lt;/span> &lt;span class="s2">&amp;#34;512&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">always&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">registry&lt;/span> &lt;span class="n">registry&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="容器运行节点-rancher-agent-节点">容器运行节点 Rancher Agent 节点
&lt;/h2>&lt;h3 id="创建-node1-虚拟机">创建 node1 虚拟机
&lt;/h3>&lt;p>使用 docker-machine 命令创建容器运行节点。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">node1&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">driver&lt;/span> &lt;span class="n">virtualbox&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">engine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">99.20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">count&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">disk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="s2">&amp;#34;80000&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">memory&lt;/span> &lt;span class="s2">&amp;#34;1024&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rc2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">machine&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="n">node2&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">driver&lt;/span> &lt;span class="n">virtualbox&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">engine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">insecure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">99.20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cpu&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">count&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">disk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span> &lt;span class="s2">&amp;#34;80000&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">memory&lt;/span> &lt;span class="s2">&amp;#34;1024&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtualbox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">rc2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">boot2docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iso&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 node1 或者 node2 测试运行一个容器，使用 mirror 中的 busybox 镜像。如果你的笔记本内存小于 8GB 的话，node2 就别搞了。一个 node 也够用了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker pull 192.168.99.20:5000/busybox:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>docker run 一下这个镜像，验证 node1 工作正常。&lt;/p>
&lt;h3 id="加载-rancher-agent-的镜像">加载 Rancher Agent 的镜像
&lt;/h3>&lt;p>确保 node1 是 docker-machine ls 中打星号的。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">instance&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">v0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">8.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="nb">load&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">registry&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bintray&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>你翻墙下载回来的 habitat-docker-registry.bintray.io/studio 镜像可能需要打标签，否则回头 hab 命令执行失败。 先用 docer images 看下是否所有 image 的标签信息正确。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">docker tag fc27342e5e0e habitat-docker-registry.bintray.io/studio:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="添加-node1-节点到-rancher-server">添加 node1 节点到 Rancher Server。
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">docker&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">privileged&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sock&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">v&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rancher&lt;/span> &lt;span class="n">rancher&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">agent&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">192.168&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">99.100&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scripts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">33&lt;/span>&lt;span class="n">B68ED65CEF18F6D7BD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1466694000000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">lug2KswoXOOQV4d09ZNMGTphVs0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>现在在 Hosts 页面上应该能看到该刚创建的节点。在页面上创建一个最小化的容器（如 busybox），来拉起 Network Agent 容器。&lt;/p>
&lt;h2 id="调试-habitat-的测试程序">调试 habitat 的测试程序
&lt;/h2>&lt;p>参考的文档 &lt;a class="link" href="https://www.habitat.sh/tutorials/" target="_blank" rel="noopener"
>https://www.habitat.sh/tutorials/&lt;/a> 记得一定要把这一组文章先看完，在去调试它的代码，不懂这些基本概念的话，后面对了错了都不知道该怎么搞。&lt;/p>
&lt;p>前置条件，翻墙下载 habitat studio 的 docker image 镜像，load 到 node1 上，下面的所有测试都是在 node1 上完成的。&lt;/p>
&lt;h3 id="安装-hab">安装 hab
&lt;/h3>&lt;p>habitat 的程序只有一个可执行程序， 目前支持 mac 和 linux 版本。下载地址： &lt;a class="link" href="https://www.habitat.sh/docs/get-habitat" target="_blank" rel="noopener"
>https://www.habitat.sh/docs/get-habitat&lt;/a> 就是一个 tag 包，解压缩后放到 shell 的 PATH 里面就安装完了。&lt;/p>
&lt;h3 id="配置-hab-cli">配置 hab cli
&lt;/h3>&lt;p>运行 hab setup&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">martin&lt;/span>&lt;span class="o">@&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">~/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">=================&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Welcome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Let&lt;/span>&lt;span class="s1">&amp;#39;s get started.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Every package in Habitat belongs to an origin, which indicates the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> person or organization responsible for maintaining that package. Each
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin also has a key used to cryptographically sign packages in that
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> origin.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Selecting a default origin tells package building operations such as
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="s1">&amp;#39; what key should be used to sign the packages produced.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> If you do not set a default origin now, you will have to tell package
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> building commands each time what origin to use.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> For more information on origins and how they are used in building
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> packages, please consult the docs at
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> https://www.habitat.sh/docs/build-packages-overview/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Set up a default origin? [Yes/no/quit] yes 这里输入 yes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> Enter the name of your origin. If you plan to publish your packages
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> publicly, we recommend that you select one that is not already in use on
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> the Habitat build service found at https://app.habitat.sh/.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> You already have a default origin set up as `martin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这是用来做&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">包签名和加密用的标识，在代码里面会用到。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">origin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">key&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">installed&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Great&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">work&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">While&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">them&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">doing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">allows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">collaborate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">community&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">In&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">addition&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">can&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">perform&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">continuous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">uses&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">authentication&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">token&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">help&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">articles&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">creating&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">an&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">If&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Otherwise&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">information&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">depot&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">documentation&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">overview&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kt">Set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">Yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">your&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">You&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">already&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">have&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">auth&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">but&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">feel&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">free&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">change&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">it&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">wish&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这个&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">token&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">需要自己去&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">github&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">里面生成&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tool&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">will&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">optionally&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">send&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymous&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">usage&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Habitat&lt;/span>&lt;span class="s1">&amp;#39;s Google Analytics account. This is a strictly opt-in activity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> and no tracking will occur unless you respond affirmatively to the
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> question below.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> We collect this data to help improve Habitat&amp;#39;&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">user&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">experience&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">For&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">would&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">like&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">know&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">category&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">tasks&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">performing&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">which&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ones&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">having&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">trouble&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mistyping&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">arguments&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">To&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">see&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">what&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">kinds&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">and&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">how&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">they&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">are&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">anonymized&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">please&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">read&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">more&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">our&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">here&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">docs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">about&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">yes&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">No&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">这里选择&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">»&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Opting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">☑&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Creating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">analytics&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">OPTED_OUT&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">★&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Analytics&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">opted&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">out&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">we&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">salute&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">you&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">just&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">the&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">same&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">CLI&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Setup&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Complete&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">That&lt;/span>&lt;span class="s1">&amp;#39;s all for now. Thanks for using Habitat!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">martin@localhost ~/Documents $
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>该注意的都写到上面的代码里面了。这个配置的结果在这里&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ cat ~/.hab/etc/cli.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auth_token = &amp;#34;martin-github-token&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">origin = &amp;#34;martin&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="调试-habitat-demo-应用">调试 Habitat demo 应用
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/habitat-sh/habitat-example-plans
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入到 mytutorialapp 目录，修改 plan.sh 的 第二行代码，我改后的代码是&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">pkg_origin=martin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>martin 是我在 hab cli 里面配置的 origin。&lt;/p>
&lt;p>其实下面的测试就执行了两个 hab 的命令，都是在 hab studi 的 shell 里面执行的，这个 shell 其实就是一个 studio 容器的 shell。&lt;/p>
&lt;p>在运行下面的命令，确保你是和 node1 正常通讯的，下面我用 default 节点做演示。做完的演示环境我已经删除了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker-machine ls NAME ACTIVE DRIVER STATE URL SWARM DOCKER ERRORS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default - virtualbox Running tcp://192.168.99.100:2376 v1.11.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常的意思是执行所有 docker 命令不报错。&lt;/p>
&lt;h3 id="build-habitat-demo-代码">build habitat demo 代码
&lt;/h3>&lt;p>进入到代码的 plan.sh 的目录 执行 hab studio enter 命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">martin&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">localhost&lt;/span> &lt;span class="o">~/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">habitat&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plans&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">$&lt;/span> &lt;span class="n">hab&lt;/span> &lt;span class="n">studio&lt;/span> &lt;span class="n">enter&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="err">±&lt;/span>&lt;span class="n">master&lt;/span> &lt;span class="err">●●&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">Studio&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Importing&lt;/span> &lt;span class="n">martin&lt;/span> &lt;span class="n">secret&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Importing&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">standard&lt;/span> &lt;span class="n">input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Imported&lt;/span> &lt;span class="n">secret&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">20160630040241.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Entering&lt;/span> &lt;span class="n">Studio&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">studios&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Exported&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">HAB_ORIGIN&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">martin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">:&lt;/span> &lt;span class="n">Loading&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">plan&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Plan&lt;/span> &lt;span class="n">loaded&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">build&lt;/span> &lt;span class="n">setup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">HAB_BIN&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">installs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">signing&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">hashing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Resolving&lt;/span> &lt;span class="n">dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.44&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">6.44&lt;/span> &lt;span class="n">MB&lt;/span> \ &lt;span class="p">[&lt;/span>&lt;span class="o">=======================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">457.82&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=============================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">575.13&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="n">Cached&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Install&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span> &lt;span class="n">complete&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="n">packages&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Resolved&lt;/span> &lt;span class="n">dependency&lt;/span> &lt;span class="s1">&amp;#39;core/node&amp;#39;&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232259&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bash&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">42&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075613&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">binutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.25&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064534&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">coreutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075329&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064523&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">findutils&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080341&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gawk&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075739&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">grep&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075540&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080637&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sed&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075228&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">unzip&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081414&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wget&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.16&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081342&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">acl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">52&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075215&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">attr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">47&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075207&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">less&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">481&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080021&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libcap&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.24&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075226&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libidn&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.32&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081104&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ncurses&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">6.0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075116&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pcre&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">8.38&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075520&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mkdir&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">created&lt;/span> &lt;span class="n">directory&lt;/span> &lt;span class="s1">&amp;#39;/hab/cache/src&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="s1">&amp;#39;https://s3-us-west-2.amazonaws.com/mytutorialapp/mytutorialapp-0.1.0.tar.gz&amp;#39;&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="s1">&amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">--&lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span> &lt;span class="mi">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">27&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">51&lt;/span>&lt;span class="o">--&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="n">amazonaws&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Resolving&lt;/span> &lt;span class="n">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="n">amazonaws&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="n">amazonaws&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mf">54.231&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">184.216&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Connecting&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="n">amazonaws&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">us&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">west&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">2.&lt;/span>&lt;span class="n">amazonaws&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="mf">54.231&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">184.216&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">443.&lt;/span>&lt;span class="o">..&lt;/span> &lt;span class="n">connected&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HTTP&lt;/span> &lt;span class="n">request&lt;/span> &lt;span class="n">sent&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">awaiting&lt;/span> &lt;span class="n">response&lt;/span>&lt;span class="o">...&lt;/span> &lt;span class="mi">200&lt;/span> &lt;span class="n">OK&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Length&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1041&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="n">K&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gzip&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Saving&lt;/span> &lt;span class="n">to&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">===================================================&amp;gt;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">1.02&lt;/span>&lt;span class="n">K&lt;/span> &lt;span class="o">--.-&lt;/span>&lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="n">s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">07&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">01&lt;/span> &lt;span class="mi">02&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">28&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">08&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">32.1&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="s1">&amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;&lt;/span> &lt;span class="n">saved&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1041&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Downloaded&lt;/span> &lt;span class="s1">&amp;#39;mytutorialapp-0.1.0.tar.gz&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Verifying&lt;/span> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Checksum&lt;/span> &lt;span class="n">verified&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Clean&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">cache&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Unpacking&lt;/span> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="n">environment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">PREFIX&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">LD_RUN_PATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">CFLAGS&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="n">I&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">include&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Setting&lt;/span> &lt;span class="n">LDFLAGS&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Preparing&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Building&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">npm&lt;/span> &lt;span class="n">WARN&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">repository&lt;/span> &lt;span class="n">field&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">npm&lt;/span> &lt;span class="n">WARN&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">No&lt;/span> &lt;span class="n">README&lt;/span> &lt;span class="n">data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">nconf&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.8&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span> &lt;span class="n">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nconf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="n">ini&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="n">secure&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">├──&lt;/span> &lt;span class="n">async&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.5&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">└──&lt;/span> &lt;span class="n">yargs&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.32&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">decamelize&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">camelcase&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">2.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">window&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y18n&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">locale&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.4&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cliui&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">3.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Installing&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;node_modules/nconf&amp;#39;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725/node_modules/nconf&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">忽略了好几百行输出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;node_modules/nconf/node_modules/secure-keys/test/simple-test.js&amp;#39;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725/node_modules/nconf/node_modules/secure-keys/test/simple-test.js&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;node_modules/nconf/node_modules/secure-keys/test/test.secret.key&amp;#39;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725/node_modules/nconf/node_modules/secure-keys/test/test.secret.key&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;node_modules/nconf/node_modules/secure-keys/package.json&amp;#39;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725/node_modules/nconf/node_modules/secure-keys/package.json&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Writing&lt;/span> &lt;span class="n">configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Writing&lt;/span> &lt;span class="n">service&lt;/span> &lt;span class="n">management&lt;/span> &lt;span class="n">scripts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Stripping&lt;/span> &lt;span class="n">unneeded&lt;/span> &lt;span class="n">symbols&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">binaries&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">libraries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">manifest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Building&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Generating&lt;/span> &lt;span class="n">blake2b&lt;/span> &lt;span class="n">hashes&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">package&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Generating&lt;/span> &lt;span class="n">signed&lt;/span> &lt;span class="n">metadata&lt;/span> &lt;span class="n">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Signing&lt;/span> &lt;span class="n">mytutorialapp_blake2bsums&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="n">Signing&lt;/span> &lt;span class="n">mytutorialapp_blake2bsums&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">FILES&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Signed&lt;/span> &lt;span class="n">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">FILES&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Generating&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="n">artifact&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.28&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075701&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Removing&lt;/span> &lt;span class="n">leading&lt;/span> &lt;span class="err">`&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="s1">&amp;#39; from member names&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">100&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">121.4&lt;/span> &lt;span class="n">KiB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">900.0&lt;/span> &lt;span class="n">KiB&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.135&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">☛&lt;/span> &lt;span class="n">Signing&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">xz&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160630040241&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">create&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Signed&lt;/span> &lt;span class="n">artifact&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">artifacts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hart&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;/hab/cache/artifacts/martin-mytutorialapp-0.1.0-20160701022725-x86_64-linux.hart&amp;#39;&lt;/span> &lt;span class="o">-&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;/src/results/martin-mytutorialapp-0.1.0-20160701022725-x86_64-linux.hart&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">plan&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">build&lt;/span> &lt;span class="n">cleanup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Source&lt;/span> &lt;span class="n">Cache&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="ne">Path&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160701022725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Artifact&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160701022725&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">x86_64&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Build&lt;/span> &lt;span class="n">Report&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">results&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">last_build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">env&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">SHA256&lt;/span> &lt;span class="n">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Blake2b&lt;/span> &lt;span class="n">Checksum&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">I&lt;/span> &lt;span class="n">love&lt;/span> &lt;span class="n">it&lt;/span> &lt;span class="n">when&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">plan&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span> &lt;span class="n">comes&lt;/span> &lt;span class="n">together&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mytutorialapp&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Build&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">m3s&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>检查结果，在代码的目录中可以看的 result 目录，关注一下这个目录，关键看 build 命令的最后一段。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mytutorialapp: hab-plan-build cleanup mytutorialapp: mytutorialapp: Source Cache: /hab/cache/src/mytutorialapp-0.1.0 mytutorialapp: Installed Path: /hab/pkgs/martin/mytutorialapp/0.1.0/20160701022725 mytutorialapp: Artifact: /src/results/martin-mytutorialapp-0.1.0-20160701022725-x86_64-linux.hart mytutorialapp: Build Report: /src/results/last_build.env mytutorialapp: SHA256 Checksum: d4bfb3a44989b8a5b1295eac2600d75f42dd2be6f537344312c8917cba47d05d mytutorialapp: Blake2b Checksum: fbff257eb36fffa61e6cbf5ec89fa3f507095f80f5cca610c2bb72685d758706 mytutorialapp: mytutorialapp: I love it when a plan.sh comes together. mytutorialapp: mytutorialapp: Build time: 1m3s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="昨晚分享的高潮部分-habitat-导出-docker-image">昨晚分享的高潮部分, habitat 导出 docker image
&lt;/h3>&lt;p>其实就是一条命令，在 habitat Studio 中执行 导出命令 hab pkg export docker martin/mytutorialapp&lt;/p>
&lt;p>导出 docker 镜像的过程和 build 的过程一样，都可能会失败；由于它需要到网上下载所需要的代码，下载所需要的 habitat 模块，core/ 开头的都是 habitat 出品的核心的模块，他们的想法基本也是说把所有的可能用到的模块都做封装，成为自己的 pkg 格式的内容。然后在用他们的 Habitat 服务来解析、部署和运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1"># hab pkg export docker martin/mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">studio&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Creating&lt;/span> &lt;span class="n">Studio&lt;/span> &lt;span class="n">at&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">baseimage&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Using&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Using&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span> &lt;span class="n">via&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Using&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span> &lt;span class="n">via&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Using&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span> &lt;span class="n">via&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Using&lt;/span> &lt;span class="n">local&lt;/span> &lt;span class="n">package&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span> &lt;span class="n">via&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.23&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.23&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=======================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">500.60&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">75&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">75&lt;/span> &lt;span class="n">B&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=============================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">378.76&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">☑&lt;/span> &lt;span class="n">Cached&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20160612031944&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="n">origin&lt;/span> &lt;span class="n">key&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Install&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span> &lt;span class="n">complete&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="n">packages&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Installing&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">510.89&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">510.89&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">====================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">89.61&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">141.05&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">141.05&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">===================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">349.94&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">132.32&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">132.32&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">===================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">370.21&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cacerts&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2016.04&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081125&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">gcc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075020&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">584.98&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">584.98&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">===================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">340.75&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libarchive&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">3.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140528&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">187.96&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">187.96&lt;/span> &lt;span class="n">KB&lt;/span> \ &lt;span class="p">[&lt;/span>&lt;span class="o">===================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">200.27&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libsodium&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612140317&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">→&lt;/span> &lt;span class="n">Using&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">headers&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.3&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063537&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.10&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">2.10&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=======================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">518.78&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">247.38&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">247.38&lt;/span> &lt;span class="n">KB&lt;/span> \ &lt;span class="p">[&lt;/span>&lt;span class="o">===================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">468.42&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">73.06&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">73.06&lt;/span> &lt;span class="n">KB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=====================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">315.44&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">zlib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612064520&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">↓&lt;/span> &lt;span class="n">Downloading&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.54&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mf">1.54&lt;/span> &lt;span class="n">MB&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">=======================================================================&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="mf">100.00&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mf">563.90&lt;/span> &lt;span class="n">KB&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="err">✓&lt;/span> &lt;span class="n">Installed&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Install&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sup&lt;/span> &lt;span class="n">complete&lt;/span> &lt;span class="n">with&lt;/span> &lt;span class="mi">12&lt;/span> &lt;span class="n">packages&lt;/span> &lt;span class="n">installed&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Symlinking&lt;/span> &lt;span class="n">hab&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span> &lt;span class="n">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Binary&lt;/span> &lt;span class="n">hab&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614230104&lt;/span> &lt;span class="n">symlinked&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Symlinking&lt;/span> &lt;span class="n">bash&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span> &lt;span class="n">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Binary&lt;/span> &lt;span class="n">bash&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="n">symlinked&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">»&lt;/span> &lt;span class="n">Symlinking&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span> &lt;span class="n">into&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">★&lt;/span> &lt;span class="n">Binary&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="n">from&lt;/span> &lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span> &lt;span class="n">symlinked&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pkg&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dockerize&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XxsS&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Sending&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="n">context&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">Docker&lt;/span> &lt;span class="n">daemon&lt;/span> &lt;span class="mf">194.3&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">FROM&lt;/span> &lt;span class="n">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ENV&lt;/span> &lt;span class="k">export&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612143531&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">0.7&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160614232939&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bzip2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612075040&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">glibc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">2.22&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612063629&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openssl&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081127&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">5.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612080402&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pkgs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">core&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">busybox&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mf">1.24&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">20160612081725&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="n">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="n">f33585a25ae&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="mf">117e90&lt;/span>&lt;span class="n">c151e7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="n">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">c0cf3715cbcf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="mi">952257966&lt;/span>&lt;span class="n">d96&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ADD&lt;/span> &lt;span class="n">rootfs&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">d2691da93ccf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="n">aa80e97ea57&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">5&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">VOLUME&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">data&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">hab&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">svc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">bd8888453939&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="n">f1edcb653432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">6&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">9631&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="mi">256&lt;/span>&lt;span class="n">a04cd0fe2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="n">ca7725ed13e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">7&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="n">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">d7bdec08530e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="mi">81930&lt;/span>&lt;span class="n">dff8f4e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Step&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">CMD&lt;/span> &lt;span class="n">start&lt;/span> &lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mytutorialapp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="n">Running&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">---&amp;gt;&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="n">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Removing&lt;/span> &lt;span class="n">intermediate&lt;/span> &lt;span class="n">container&lt;/span> &lt;span class="n">c8cc53d92bc8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Successfully&lt;/span> &lt;span class="n">built&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="n">d5e0fe85395&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看 docker 镜像是否存在。推出 studio 容器，运行 docker images&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[5][default:/src:0]# exit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin@localhost ~/Documents/GitHub/habitat-example-plans/mytutorialapp $ docker images [±master ●●]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp 0.1.0-20160701024401 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">martin/mytutorialapp latest 8d5e0fe85395 3 minutes ago 187.7 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="运行这个-demo">运行这个 demo
&lt;/h3>&lt;p>在命令行运行&lt;/p>
&lt;p>$ docker run -it -p 8080:8080 martin/mytutorialapp&lt;/p>
&lt;p>用浏览器打开 node1 的 ip 8080 端口，应该可以看到 hello world 页面。&lt;/p>
&lt;p>在 rancher web 页面添加测试&lt;/p>
&lt;h3 id="在-rancher-中上架这个-demo">在 rancher 中上架这个 demo
&lt;/h3>&lt;p>&lt;a class="link" href="https://github.com/martinliu/hab-catalog" target="_blank" rel="noopener"
>https://github.com/martinliu/hab-catalog&lt;/a> 以上代码是半成品，欢迎协助完成。&lt;/p>
&lt;h3 id="测试-rancher-官方的-redis-demo">测试 Rancher 官方的 redis demo
&lt;/h3>&lt;p>参考文章 &lt;a class="link" href="http://rancher.com/using-habitat-to-create-rancher-catalog-templates/" target="_blank" rel="noopener"
>http://rancher.com/using-habitat-to-create-rancher-catalog-templates/&lt;/a> 它的 demo 和上架的目录都可以正常测试通过，但是服务运行不起来，报主机名错误，redis 节点的群集建立不起来。&lt;/p>
&lt;p>如果您修复了，请回复贴出代码位置。&lt;/p>
&lt;h2 id="福利调试-docker-官方投票应用">福利：调试 docker 官方投票应用
&lt;/h2>&lt;p>下载投票实例程序。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git clone https://github.com/martinliu/example-voting-app.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>进入该程序的目录，修改所有 image 的来源镜像库，修改为指向本地的 mirror 服务器。 1. result/tests/Dcokerfile -&amp;gt; FROM 192.168.99.20:5000/node 2. result/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/node:5.11.0-slim 3. vote/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/python:2.7-alpine 4. worker/Dockerfile -&amp;gt; FROM 192.168.99.20:5000/microsoft/dotnet:1.0.0-preview1 5. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/redis:alpine 6. docker-compose.yml -&amp;gt; image: 192.168.99.20:5000/postgres:9.4&lt;/p>
&lt;p>由于以上应用在构建的过程中需要在线安装各种软件包，最好先翻墙，确认你有足够稳定的国外的互联网访问，建议翻墙到美国，然后在执行项目的构建命令。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ping facebook.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=0 ttl=79 time=4187.066 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=1 ttl=79 time=3186.904 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=2 ttl=79 time=2515.415 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=6 ttl=79 time=296.457 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">64 bytes from 173.252.90.132: icmp_seq=7 ttl=79 time=410.215 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- facebook.com ping statistics ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">8 packets transmitted, 5 packets received, 37.5% packet loss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">round-trip min/avg/max/stddev = 296.457/2119.211/4187.066/1537.275 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上结果表明，翻墙成功，以上结果显示翻墙的效果比较差，延迟和丢包都比较严重，可能到只构建的时候下载软件包失败。&lt;/p>
&lt;p>构建完毕之后，可以检查一下是否生产了目标镜像文件，如果输出如下所示，则表明本次本地的项目集成构建成功。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">$ docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REPOSITORY TAG IMAGE ID CREATED SIZE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_result latest 9bb4126b0905 5 minutes ago 225.8 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_worker latest 292396a5aba4 6 minutes ago 644.1 MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examplevotingapp_vote latest 28052191beea 10 minutes ago 68.31 MB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在当前 node1 节点上做本地的集成结果的功能测试，用 docker-compose 启动这个项目。先检查 compose 文件，然后运行 up。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">postgres&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">192&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;6379&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">py&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">vote&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">rw&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Users&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">martin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">Documents&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">GitHub&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">example&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">voting&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">worker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2.0&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="err">$&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compose&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">up&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">Starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Recreating&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Attaching&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_db_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_redis_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_worker_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_result_1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">examplevotingapp_vote_1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">00000000&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">64&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">bit&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-``&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-```&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">```&lt;/span>&lt;span class="err">\&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.,&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">was&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">shut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">down&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">58&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">UTC&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39; , .-` | `, ) Running in standalone mode
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | |`-._`-...-` __...-.``-._|&amp;#39;&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;| Port: 6379
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._ `._ / _.-&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; | http://redis.io
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;|
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">db_1 | LOG: MultiXact member wraparound protections are now enabled
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | | `-._`-._ _.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; |
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-._ `-._`-.__.-&amp;#39;&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">database&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">__&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39; _.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`-&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">redis_1 | `-.__.-&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># Server started, Redis version 3.2.1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &amp;#39;vm.overcommit_memory = 1&amp;#39; to /etc/sysctl.conf and then reboot or run the command &amp;#39;sysctl vm.overcommit_memory=1&amp;#39; for this to take effect.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">db_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LOG&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">autovacuum&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">launcher&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &amp;#39;echo never &amp;gt; /sys/kernel/mm/transparent_hugepage/enabled&amp;#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">redis_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">36&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">216&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">The&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ready&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">accept&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">connections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">6379&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Press&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">CTRL&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">quit&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Restarting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">stat&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">restart&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">any&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">time&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">rs&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">watching&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">nodemon&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">starting&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">debug&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">listening&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5858&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">vote_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Debugger&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pin&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">139&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">254&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">286&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">worker_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Found&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">redis&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">172&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">19&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bodyParser&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">individual&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">urlencoded&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">middlewares&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">67&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">9&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Mon&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Jun&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2016&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">40&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GMT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">deprecated&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">undefined&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">provide&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">extended&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">option&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">at&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">..&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">node_modules&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">parser&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">js&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">105&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">29&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">on&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">result_1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Connected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">to&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>打开浏览器测试 vote 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/voting-1.jpg"
loading="lazy"
alt="voting"
>&lt;/p>
&lt;p>打开浏览器测试 result 应用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">open http://192.168.99.114:5001
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>正常显示结果如下图所示： &lt;img src="http://yzd.io/images/result-1.jpg"
loading="lazy"
alt="result"
>&lt;/p>
&lt;p>在 Rancher 的 hosts 界面中应该看到这些运行的容器。 &lt;img src="http://yzd.io/images/voting-in-rancher-1.jpg"
loading="lazy"
alt="voting-in-ranche"
>&lt;/p>
&lt;p>至此所有关于应用构建和功能测试的过程完成，按 ctl + c 结束 docker-compose up 的运行。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">^CGracefully stopping... (press Ctrl+C again to force)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_worker_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_result_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_vote_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_db_1 ... done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Stopping examplevotingapp_redis_1 ... done
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>用 Docker 构建 Serverless 应用</title><link>https://martinliu.cn/2016/06/22/building-serverless-apps-docker/</link><pubDate>Wed, 22 Jun 2016 16:22:51 +0000</pubDate><guid>https://martinliu.cn/2016/06/22/building-serverless-apps-docker/</guid><description>&lt;h2 id="martin-解读-serverless">Martin 解读 Serverless
&lt;/h2>&lt;p>Serverless 不意味着没有服务器，而是从应用可以在一个抽象层上忽略它的存在，而只关注在功能实现上和自身的请求处理上；每一个功能实现在不是单纯的业务逻辑处理的代码，相反每个功能调用具有了 server 的特质，进化成为了一个具有自省、自知和自治的工作负载单元；他们更像是能够衍生出其它新功能单元的生物体。这样整个 Serverless 应用架构之内，每个生命可以衍生下去，子子孙孙无穷匮也。&lt;/p>
&lt;p>本文编译了：&lt;a class="link" href="https://blog.docker.com/2016/06/building-serverless-apps-with-docker/" target="_blank" rel="noopener"
>https://blog.docker.com/2016/06/building-serverless-apps-with-docker/&lt;/a>  一下是正文内容。&lt;/p>
&lt;p>处在这技术日新月异的时代里，新的技术浪潮经常对当前的技术产生着威胁和颠覆。在编写应用的时候我们目前经常谈论到“Serverless”技术。它的核心思想是把应用作为一系列的功能/function 来部署，这些功能在需要的时候被按需部署。服务器管理应该是不需要去操心的事情，所有功能被按需调用，被运行在群集之上。&lt;/p>
&lt;p>但是 Serverless 里不意味着没有 Docker，事实上 ”Docker 就是 Serverless”。你可以用 Docker 来容器化这些功能，然后按需地运行在 Swarm 群集上。Serverless 是一种构建分布式计算的应用的方法，而 Docker 是完美的构建和运行他们的平台。&lt;/p>
&lt;h2 id="从-server-到-serverless">从 Server 到 Serverless
&lt;/h2>&lt;p>那么我们如何来编写 Serverless 的应用？让我们先看下这个例子：&lt;a class="link" href="https://github.com/docker/example-voting-app" target="_blank" rel="noopener"
>“一个有 5 个子服务组成的投票应用”&lt;/a>：&lt;/p>
&lt;p>&lt;img src="https://media.licdn.com/mpr/mpr/shrinknp_800_800/AAEAAQAAAAAAAAlaAAAAJGI5NTZjMjRkLTRkNmYtNDEyOC04OTNiLTBmY2I5M2QyOTZiMQ.png"
loading="lazy"
>&lt;/p>
&lt;p>它的结构如下：&lt;/p>
&lt;ul>
&lt;li>两个 web 前端&lt;/li>
&lt;li>一个后台的处理投票的 worker 服务&lt;/li>
&lt;li>一个处理投票的消息队列&lt;/li>
&lt;li>一个数据库&lt;/li>
&lt;/ul>
&lt;p>那个后台处理投票的进程是非常容易成为转换为 Serverless 架构的目标。在投票应用内，我们可以运行一点类似于下面的代码，来执行后台任务：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import dockerrun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client = dockerrun.from_env()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">client.run(&amp;#34;bfirsh/serverless-record-vote-task&amp;#34;, [voter_id, vote], detach=True)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Worker 和消息队列能用按需在 Swarm 上运行的容器来替换，并自动地按需扩容。&lt;/p>
&lt;p>我们甚至可以消除掉 web 前端。我们可以这么做：用 Docker 容器来相应每一个 HTTP 请求，每个 HTTP 请求都用一个自生长的跑着轻量 HTTP 服务器的容器来处理。之前使用的是长时间持续运行的 HTTP 服务器，现在变成了具有 HTTP 相应和处理能力的按需跑起来的容器，而且他们能自动地扩容来支持所有访问请求。&lt;/p>
&lt;p>我们新的架构大概如下图所示：&lt;/p>
&lt;p>&lt;img src="https://media.licdn.com/mpr/mpr/shrinknp_800_800/AAEAAQAAAAAAAAjOAAAAJGQyYTVhZTFiLTRkZWQtNDE0Yi1iMzRkLWU4OWU5NjExZDc2OQ.png"
loading="lazy"
>&lt;/p>
&lt;p>其中红色的方块是需持续长期运行的服务，而绿色方块成了按需被调用的 Docker 容器。这样这个应用变成了只有少数几个需要被管理的 long-running 服务，在相应请求的时候使用原生的 Swarm 扩容能力，处理能力的上限是 Swarm 群集的上限。&lt;/p>
&lt;h2 id="具体如何实现">具体如何实现
&lt;/h2>&lt;p>这里有三个有用的技巧，可以在你的程序中使用：&lt;/p>
&lt;ol>
&lt;li>把你代码中的 function 作为按需拉起的 Docker 容器&lt;/li>
&lt;li>使用 Swarm 在群集上运行这些容器&lt;/li>
&lt;li>从容器里面运行这些功能容器，绕过了一个 Docker API socket&lt;/li>
&lt;/ol>
&lt;p>使用以上技术的组合，程序执行负载发生的可能性将和您如何架构你的应用相关。运行后台任务就是一个非常适合的例子，但是整个应用中的其它工作负载也是有可能的，例如：&lt;/p>
&lt;ul>
&lt;li>考虑到延迟，用启动一个容器来服务所有用户的 HTTP 请求可能是不现实的。可是你可以写一个内置的负载均衡逻辑，让它知道何时需要主动地自动扩容 Web 前端自身，通过在 Swarm 群集上运行更多 web 处理容器。&lt;/li>
&lt;li>一个 MongoDB 容器可以在 Swarm 上成为一个具有自省能力的架构，它能自动地运行出正确数量的 shard 和 replica 容器。&lt;/li>
&lt;/ul>
&lt;h2 id="接下来">接下来
&lt;/h2>&lt;p>我们已经得到了这些激进的新工具，用做构建应用的抽象层，我们隐约看到了如何深入下去的可能性。我们依然像长时间以来在一堆服务器上构建应用一样，而以后可以来利用 Swarm 能按需地在基础架构里的任何地方执行功能代码的能力。&lt;/p>
&lt;p>希望这些能够给您一些如何构建应用的新思路，但是我们还需要你们的帮助。我们已经有的是一些构建 Serverless 应用的基础功能，然而他们依然不是很完备，我们需要更好的工具、库、样例程序，文档等等。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/bfirsh/serverless-docker" target="_blank" rel="noopener"
>这个 Github 库有一些工具、库、代码和文章的链接。&lt;/a>基于此，如果您想学习更多的话，请共享任何相关的链接，这样我们可以开始协作在一起。&lt;/p>
&lt;p>大家一起来搞，并祝 hacking 愉快！&lt;/p></description></item><item><title>DockerCon 2016 D2 超萌码头酷黑客 大会圆满闭幕</title><link>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</link><pubDate>Wed, 22 Jun 2016 02:35:39 +0000</pubDate><guid>https://martinliu.cn/2016/06/22/closing-general-session-moby-docks-cool-hacks/</guid><description>&lt;p>Closing General Session 的主题是 Moby Dock‘s Cool Hacks ； 从字面意思上看，这个主题的意思是“超萌码头酷黑客”的意思。我已经看到了关于最后一天开幕主题演讲的评论，说是“剑指商业”什么的；而我认为 Docker 从开始的第一天，无论它是否开源，它都是为了商业利益而已。话在说回到开源，Docker 只是完美的应用了开源软件这种实践而已；而且 docker 把开源这种模式应用的如此成功，并在商业上也如此让人眼红和侧目，这也算是开源软件商业化登峰造极的一种极端性个案。个人认为开源无疑是在软件行业中做出爆款技术当之无愧的首选的实践方式。我在红帽碰到很多参与开源十几二十年的老黑客，他们不乏会表达关于开源纯洁性沦丧的抱怨；我对此也非常理解和认同。而我更认同开源可以对软件技术带来无比活力的这个积极的方面。&lt;/p>
&lt;p>言归正传，小编我还是“模拟现场”播报一下大会闭幕主题演讲的盛况。这是大会的结束的 session，现场的人数明显的少于第一天开幕式的人。在十几分钟内，人们稀稀拉拉的进入了会场。会场中的座位大约还有一部分空位。美女 Mano 和 黑客 Kristie 作为主要演讲人上台。美女上台后先用手机自拍了几下。两个人开始宣布，Docker 大会之后举行为期一个月的黑客大赛，这是我们的传统，Docker 大会虽然今天会结束，而 docer 黑客大赛将从今天开始。我们来请大家欣赏三个非常酷的黑客项目演示。&lt;/p>
&lt;p>本次大会的录音点这里  &lt;a class="link" href="http://www.ximalaya.com/32280565/sound/17388272" target="_blank" rel="noopener"
>http://www.ximalaya.com/32280565/sound/17388272&lt;/a>&lt;/p>
&lt;h2 id="黑客演示-1微服务自毁平台">黑客演示 1：微服务自毁平台
&lt;/h2>&lt;p>Jeff 登场。Jeff 开始讲述微服务的故事，我们都在试图让基础架构做到冗余，容所有的服务都冗余，让群集能够自愈；但是故障，断网，宕机还是会发生。我们所做的这些真的能够保证业务不宕机么，服务不终端么？你怎么能确认这一点？因此回归到故障的发生上吧？如果服务要出故障，请让它有规律的发生。请程序猿和 ops 都投入到故障处理的战斗中，以此为契机来优化和改造应用，让应用变的更加强壮。我们都听说过混乱猴子，而 Jeff 团队正式帮人们构建一堆这样的工具的人。&lt;/p>
&lt;p>有一个思路是：如何让我的系统的服务出故障，如何主动的在系统中注入故障。我们需要一种特殊的编排工具来在系统中模拟和触发故障的发生。我用容器做工具平台来触发故障注入的动作。当然这个故障是在容器架构的微服务系统中触发这个动作。&lt;/p>
&lt;p>Jeff 开始做这个  Demo。说：如果你的”网络没有故障，天下太平。“其实这很无聊的说，有木有？有木有？我现在开始用工具来注入 网络延迟的网络故障吧！ 。用一个基于策略的工具。配置一个网络故障模拟的策略，故障什么时间发生，发生多久。这里设计一个每 10 秒钟注入一次网络延迟故障提高到 600ms 的故障。然后配置故障影响的范围，这里使用 Docker 的 lable 来做故障发生节点的选择的条件。符合标签的系统将受到这次故障影响。我们的这个故障模拟编排系统，帮您提前体验故障的发生。现在你看故障发生了，从这些容器里面 ping google 的网络延迟比之前大多了， 目前延迟到了 600ms。希望你们能开始体验和使用这个而工具。&lt;/p>
&lt;h2 id="黑客演示-2serverless-架构的应用不是梦">黑客演示 2：Serverless 架构的应用不是梦
&lt;/h2>&lt;p>Ben 是大家在 Docker 大会喜闻乐见的一个黑客，他经常给做 demo 和 session。他绝对符合超萌的标准。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/40906-1.jpeg"
loading="lazy"
alt="40906 (1)"
>&lt;/p>
&lt;p>Ben 开讲，Serverless 是如何做的？ben 认为 Serverless 是一种全新的应用编程的思路，而 docer 可以很好的支持这种思路，并实现和执行这种思路。docer 群集可以让 Serverless 引用按需执行，并让该应用的底层变得资源冗余并路由可达。ben 开始演示   他的几张 slides， 说 Sererless == docker 这个概念。本开始讲解：如何用 Serverless 架构来实现投票应用的改造。如何把这个 5 个服务模块的纯粹容器微服务系统转换为 serverless 架构的应用。开始修改源代码，把发入队列的票，变成一个处理投票的容，把 http 服务器变成一个 CGIHander（）服务；但是  nodejs  不支持 CGIhander，肿么办？我用 perl 重写了这部分，为毛用 perl，被忘了它乃是古董级的黑客神器的好不好，呵呵！改造完之后的系统架构如下。架构是把处理 postgresql 意外的模块都重写了。数据库保留在最下层。这种 Serverless 重构实践遵从的原则如下。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/2-1.jpg"
loading="lazy"
alt="2"
>&lt;/p>
&lt;p>三个原则翻译一下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>把每个模块的核心功能打包，并作为容器来运行。解读：这意味着把所有服务模块组重构，把每个服务模块中的核心功能代码作为一个在容器里面跑的对象。这里其实牵扯到很深的业务重构和应用重构，程序猿或将抛弃以前的代码，甚至以前所习惯使用的程序开发堆栈。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>把这些容器用 Docker 的 Swarm 跑起来。解读：docker 原生的 Swarm 编排能力将为您的应用提供，功能的运行，workload 的分布，服务的冗余，服务的路由等等支持；这样的架构能支持到 Serverless 的应用的模型。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>从容器中去运行其它容器。解读：容器编排平台或将不是容器生命起源的唯一起点，容器里面的应用可能可以决定系统中需要滋生出什么样的容器，当然说的是需要实现和运行什么功能的容器。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>好了，目前为止，ben 的心的应用重构完成，还是用 docker-compose up 启动了改造之后的应用。现在看到了这个 serverless 的应用工作正常。&lt;/p>
&lt;p>Ben 说：我们在这 demo 了 serverless  应用的改造的过程，可以看到 docker 是如何支持这种应用架构的。你可以打包 web front 为服务，它自动的在 Swarm 群集上无限延展这个服务。成为分布式计算的架构。还可以打包微服务的其它应用模块为 Serverless 应用架构。欢迎大家 参与到我的 Serverless github 项目中，和我一起互动，把 Serverless 在 docker 上的应用搞起来。&lt;a class="link" href="https://github.com/bfirsh/serverless-docker" target="_blank" rel="noopener"
>https://github.com/bfirsh/serverless-docker&lt;/a>  这里包括了以上演示的应用。&lt;/p>
&lt;h2 id="黑客演示-3在线更新的无人机">黑客演示 3：在线更新的无人机
&lt;/h2>&lt;p>这个团队做 in the air update 无人机实时演示。无人机其实是树莓派加他们的 docker 软件系统。这是一个嵌入式系统的设计。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/3-1.jpg"
loading="lazy"
alt="3"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/4.jpg"
loading="lazy"
alt="4"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/5.jpg"
loading="lazy"
alt="5"
>&lt;/p>
&lt;p>实时新旧系统的切换秘密在这里。新版的容器会先运行起来，新系统用一个队列来接收旧系统的数据，这些数据是新旧系统交接的必要的数据，系统会判断需要多长时间，需要收集那些数据来完成这个交接的过程。直到旧系统到新系统的割接完毕。&lt;/p>
&lt;p>程序猿开始更新 v1 的代码，加入了摄像头实时视频功能。更新提交了 v2 的镜像文件。在下图可以实时的监视到无人机的状态。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.jpg"
loading="lazy"
alt="6"
>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/1-1.jpg"
loading="lazy"
alt="1"
>&lt;/p>
&lt;p>无人机在在线更新软件中。并没有掉地上哈哈哈！&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/6.1.jpg"
loading="lazy"
alt="6.1"
>&lt;/p>
&lt;p>右下角是新版本软件的摄像头把大会现场的视频拍摄，并实时传递到控制台的效果。此图上面的那个图，中间凸起震荡的那个块是无人机软件升级实时更新的过程。&lt;/p>
&lt;p>本黑科技演示完毕。&lt;/p>
&lt;h2 id="hackathon-黑客大赛启动">hackathon 黑客大赛启动
&lt;/h2>&lt;p>主此人再次上台启动了黑客大赛。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2016/06/7.jpg"
loading="lazy"
alt="7"
>&lt;/p>
&lt;p>为期一个月的 hackathon 正式开始。&lt;/p>
&lt;h2 id="最后看点">最后看点
&lt;/h2>&lt;p>CEO CTO 上台感谢赞助商。所罗门开始讲黑客骚扰现象。号召大家通过&lt;a class="link" href="http://hackharassment.com" target="_blank" rel="noopener"
> http://hackharassment.com&lt;/a> 网站来抵制中现象。&lt;/p>
&lt;p>Bump UP 是通过手环实现的，人们的手环彼此碰撞会在系统中增加一个点数。宣布了碰撞点数最多的前 5 名，感谢他们在本次大会中，积极的和其它人互动和沟通，请他们去领奖。所罗门号召所有现场的人再次相互碰撞手环，系统系统的点数增加到两百万。来解锁 Docker 奖学金基金。很快大家碰撞起来。奖学金解锁。&lt;/p>
&lt;p>感谢进三千名的社区 贡献者，感谢 docker 的员工。所有人发来的自拍形成了一个西雅图拼图。最后大会圆满结束。&lt;/p>
&lt;p>看到最后的才能做最后的评论。这更感觉是一个黑客大会，引入了 docker 对社会的责任感的概念。商业财富越大的人社会责任感应该更多。更像是黑客公司商业成功之后，继续创新，并开始践行自己的社会责任的大会。大会并没有结束，黑客大赛在接下来的一个月里将在全球各地延续。&lt;/p></description></item><item><title>Atomic Host 原子主机最简测试</title><link>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</link><pubDate>Sat, 18 Jul 2015 13:29:45 +0000</pubDate><guid>https://martinliu.cn/2015/07/18/atomic-host-e58e9fe5ad90e4b8bbe69cbae69c80e7ae80e6b58be8af95/</guid><description>&lt;h2 id="环境准备">环境准备
&lt;/h2>&lt;p>本文使用笔记本电脑+KVM 虚拟化进行以下的测试过程，当然也可以用其它的操作系统加虚拟化软件的组合，测试机需要满足以下的条件：
测试虚拟机的建议配置 1C/2GB/10GB
虚拟机使用的网络需要能连接到互联网
虚拟机需要能加载光盘 iso 文件
可以执行起停虚拟机操作，能通过控制它登陆来做初始化配置&lt;/p>
&lt;p>本文测试机是 Lenovo T440s 笔记本电脑，安装的操作系统是 Fedora 22，使用 KVM 虚拟化，用 Virt-Manager 做 GUI 图形管理工具。建立了一个 NAT 的静态虚拟网络，虚拟机可以使用该网络来从互联网下载需要的文件包。&lt;/p>
&lt;p>下载 Fedora Atomic Host 虚拟机文件；下载页面： &lt;a class="link" href="http://www.projectatomic.io/download/" target="_blank" rel="noopener"
>http://www.projectatomic.io/download/&lt;/a> 点击绿色的下载按钮。下载 qcow2 格式的 Atomic Host 虚拟机文件。复制下载的文件到虚拟机运行的存储目录中，文件名可以是 master.qcow2，新测试虚拟机会基于它创建。&lt;/p>
&lt;p>在通过这个虚拟机模版文件生成测试机前，需要准备一个 init.iso 的文件，用来初始化测试机的主机名和初始用户密码。&lt;/p>
&lt;p>[bash]
[root@martin-fedora vm]# cat meta-data
instance-id: master
local-hostname: master.xenlab.com
[root@martin-fedora vm]# cat user-data
#cloud-config
password: smartvm
ssh_pwauth: True
chpasswd: { expire: False }
[root@martin-fedora vm]# genisoimage -output init.iso -volid cidata -joliet -rock user-data meta-data
I: -input-charset not specified, using utf-8 (detected in locale settings)
Total translation table size: 0
Total rockridge attributes bytes: 331
Total directory bytes: 0
Path table size(bytes): 10
Max brk space used 0
183 extents written (0 MB)
[/bash]&lt;/p>
&lt;p>以上的两个配置文件 meta-data 和 user-data，最后使用 genisoimage 命令生成出文件 init.iso。至此，Atomic Host 测试机的运行镜像文件和初始化配置文件都准备好了。&lt;/p>
&lt;h2 id="创建-atomic-host-测试虚拟机">创建 Atomic host 测试虚拟机
&lt;/h2>&lt;p>使用虚拟化的管理工具基于准备好的镜像文件（master.qcow2）创建测新的试虚拟机。在首次启动前，还需要添加光驱设备，指定光驱设备在启动时加载上文中创建的 init.iso 配置参数文件。
首次在虚拟管理工具上启动新创建的 Atomic Host 测试虚拟机，查看整个的启动过程。由于本文的测试网络不是 DHCP 的，因此测试机在启动后，还需要登陆虚拟机控制台，使用默认账户，用户名：fedora 用户，fedora 的密码在前面的配置文件中已经指定。静态 IP 地址参考的配置文件如下：&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=&amp;ldquo;eth0&amp;rdquo;
BOOTPROTO=&amp;ldquo;static&amp;rdquo;
ONBOOT=&amp;ldquo;yes&amp;rdquo;
TYPE=&amp;ldquo;Ethernet&amp;rdquo;
PERSISTENT_DHCLIENT=&amp;ldquo;yes&amp;rdquo;
IPADDR=192.168.10.42
NETMASK=255.255.255.0
BROADCAST=192.168.10.255
NETWORK=192.168.10.0
GATEWAY=192.168.10.1&lt;/p>
&lt;p>[fedora@master ~]$ cat /etc/resolv.conf&lt;/p>
&lt;h1 id="generated-by-networkmanager">Generated by NetworkManager
&lt;/h1>&lt;p>search xenlab.com
nameserver 192.168.10.1
nameserver 8.8.8.8
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>至此，Atomic Host 测试虚拟机初始化安装完毕。&lt;/p>
&lt;h2 id="atomic-host-基本操作">Atomic Host 基本操作
&lt;/h2>&lt;p>登陆 Atomic Host 测试虚拟机 master 之后首先需要测试是否能和互联网连接，ping 外部的网址，看是否能够正常解析。由于后面很多相关测试都需要从联网下载内容。
用 ssh 工具登陆之后，看下它：
[bash]
[fedora@master ~]$ cat /etc/redhat-release
Fedora release 22 (Twenty Two)
[fedora@master ~]$ uname -a
Linux master.xenlab.com 4.0.4-301.fc22.x86_64 #1 SMP Thu May 21 13:10:33 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[fedora@master ~]$ dnf
bash: dnf: command not found
[fedora@master ~]$ yum
bash: yum: command not found
[/bash]&lt;/p>
&lt;p>根据以上显示发现它貌似就是一个 Fedora 22 的服务器，不过默认没有 dnf, yum 包管理工具，不过有 rpm。查询一下这个系统上有什么默认安装的软件包：根据 rpm -qa 结果显示，Atomic Host 虚拟机默认安装了 324 个软件包。下面初步尝试一下 Atomic Host 操作系统更新和管理的主要命令 atomic / rpm-ostree&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic
usage: atomic [-h] {host,info,install,run,uninstall,update} &amp;hellip;&lt;/p>
&lt;p>Atomic Management Tool&lt;/p>
&lt;p>positional arguments:
{host,info,install,run,uninstall,update}
commands
host execute Atomic host commands
info display label information about an image
install execute container image install method
run execute container image run method
uninstall execute container image uninstall method
update pull latest container image from repository&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$ sudo rpm-ostree
Usage:
rpm-ostree [OPTION&amp;hellip;] COMMAND&lt;/p>
&lt;p>Builtin Commands:
compose
upgrade
rebase
rollback
status
db&lt;/p>
&lt;p>Help Options:
-h, &amp;ndash;help Show help options&lt;/p>
&lt;p>Application Options:
&amp;ndash;version Print version information and exit&lt;/p>
&lt;p>error: No command specified&lt;/p>
&lt;p>[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[fedora@master ~]$ sudo rpm-ostree status
[fedora@master ~]$ sudo atomic host
usage: atomic host [-h] {rollback,status,upgrade} &amp;hellip;&lt;/li>
&lt;/ul>
&lt;p>positional arguments:
{rollback,status,upgrade}
host commands
rollback switch to alternate tree at boot
status list information about all deployments
upgrade upgrade to the latest Atomic tree if one is available&lt;/p>
&lt;p>optional arguments:
-h, &amp;ndash;help show this help message and exit&lt;/p>
&lt;p>error: too few arguments
[fedora@master ~]$
[/bash]&lt;/p>
&lt;p>下面使用 atomic host upgrade 来升级这个系统，使它运行在最新的补丁和版本下。这个过程需要下载 180+MB 的升级包，这个过程无法断点续传，但是可以任意中断。再次运行该命令后，可以重新从头下载，直到下载成功。下载成功并升级成功以后，重起操作系统。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host upgrade
Updating from: fedora-atomic:fedora-atomic/f22/x86_64/docker-host&lt;/p>
&lt;p>0 metadata, 5051 content objects fetched; 183267 KiB transferred in 330 seconds
Copying /etc changes: 25 modified, 0 removed, 41 added
Transaction complete; bootconfig swap: yes deployment count change: 1
Changed:
avahi-autoipd-0.6.31-31.fc22.x86_64
avahi-libs-0.6.31-31.fc22.x86_64
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
tcpdump-14:4.7.4-2.fc22.x86_64
tzdata-2015e-1.fc22.noarch
udisks2-2.1.6-1.fc22.x86_64
Removed:
docker-storage-setup-0.0.4-2.fc22.noarch
pciutils-libs-3.3.0-1.fc22.x86_64
Added:
docker-selinux-1.7.0-6.git74e7a7a.fc22.x86_64
iptables-services-1.4.21-14.fc22.x86_64
kubernetes-master-0.20.0-0.3.git835eded.fc22.x86_64
kubernetes-node-0.20.0-0.3.git835eded.fc22.x86_64
python-pip-6.0.8-1.fc22.noarch
python-setuptools-17.1.1-3.fc22.noarch
Upgrade prepared for next boot; run &amp;ldquo;systemctl reboot&amp;rdquo; to start a reboot
[/bash]&lt;/p>
&lt;p>在 reboot 之后，这个系统就可以投入使用了。在启动的 GRUB 菜单上可以看到出现两个条目，默认进入最新的这个系统版本。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo atomic host status
TIMESTAMP (UTC) VERSION ID OSNAME REFSPEC&lt;/p>
&lt;ul>
&lt;li>2015-07-15 23:33:20 22.61 db540a53ba fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
2015-05-21 19:01:46 22.17 06a63ecfcf fedora-atomic fedora-atomic:fedora-atomic/f22/x86_64/docker-host
[/bash]&lt;/li>
&lt;/ul>
&lt;p>进入系统之后，我们看到上面这个命令输出，目前 Atomic Host 的操作系统有了两个版本，该系统可以从最新的系统回退或者回滚到旧的版本。可以认为它同时具有多个可以前后切换的操作系统版本。&lt;/p>
&lt;p>在一个 Atomic Host 上有两种软件交付方式：
rpm-ostree 管理部署和升级 host 系统自身的软件
Linux 容器（目前 Docker）提供很多容器来跑各种软件应用服务&lt;/p>
&lt;h2 id="运行第一个-docker-镜像">运行第一个 Docker 镜像
&lt;/h2>&lt;p>现在测试的是 Atomic Host 自身的管理工具，传统的 Linux 系统中，这个软件是用 rpm 包和系统服务的方式，被安装到被管理节点的，可是我们下面使用容器的技术来部署，也达到相同的管理功能。Cockpit 是之前介绍过的一款系统管理工具，兼具对 docker 的管理功能，它可以 Docker image 的形式被下载，并且运行在本机的一个专有权限（提权）的容器中。它可以作为 Atomic Host 的主机管理工具，对 Linix 系统管理不熟练的人可以使用这个图形工具，查看和监控系统的状态，并且可以管理容器中 Image。下面是安装和运行这个特殊功能容器的命令。&lt;/p>
&lt;p>[bash]
[fedora@a1 etc]$ sudo atomic run cockpit/ws
/usr/bin/docker run -d &amp;ndash;privileged &amp;ndash;pid=host -v /:/host cockpit/ws /container/atomic-run &amp;ndash;local-ssh
efd3cbbad8452ff394e1d1a0c309870634207538597ba0cead26d790510e7a5e
[/bash]&lt;/p>
&lt;p>上面这条命令执行完后，就可以在笔记本电脑的浏览器，输入网址，来访问这个工具，如： https://192.168.10.41:9090 登陆的用户名和密码是 Atomic Host 的 fedora 和它的密码。&lt;/p>
&lt;h2 id="hw-实战篇">HW 实战篇
&lt;/h2>&lt;p>不错 HW 就是 Hello World！它太有名了，掠过对它的介绍。现在可以让 docker 命令出场了。在命令行中不加任何参数，看下它的默认输出。输出一下它的版本信息。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker version
Client version: 1.7.0.fc22
Client API version: 1.19
Package Version (client): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (client): go1.4.2
Git commit (client): 74e7a7a/1.7.0
OS/Arch (client): linux/amd64
Server version: 1.7.0.fc22
Server API version: 1.19
Package Version (server): docker-1.7.0-6.git74e7a7a.fc22.x86_64
Go version (server): go1.4.2
Git commit (server): 74e7a7a/1.7.0
OS/Arch (server): linux/amd64
[/bash]&lt;/p>
&lt;p>下面的实战内容是和过程如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>下载 fedora image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 httpd image&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建 HW 主页&lt;/p>
&lt;/li>
&lt;li>
&lt;p>构建并测试 HW 网站&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>具体的命令执行过程如下：&lt;/p>
&lt;h1 id="dependencies-resolved">[bash]
[fedora@master ~]$ sudo docker run -i -t fedora bash
Unable to find image &amp;lsquo;fedora:latest&amp;rsquo; locally
latest: Pulling from docker.io/fedora
ded7cd95e059: Already exists
48ecf305d2cf: Already exists
docker.io/fedora:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.
Digest: sha256:10ba981a70632d7764c21deae25c6521db6d39730e1dd8caff90719013858a7b
Status: Downloaded newer image for docker.io/fedora:latest
[root@f1c79aa4c931 /]# dnf update -y
Fedora 22 - x86_64 608 kB/s | 41 MB 01:09
Fedora 22 - x86_64 - Updates 439 kB/s | 12 MB 00:27
Last metadata expiration check performed 0:00:19 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.
&lt;/h1>&lt;h1 id="package-arch-version-repository-size">Package Arch Version Repository Size
&lt;/h1>&lt;p>Installing:
python-pip noarch 6.0.8-1.fc22 fedora 1.7 M
python-setuptools noarch 17.1.1-3.fc22 updates 425 k
Upgrading:
bash x86_64 4.3.39-4.fc22 updates 1.6 M&lt;/p>
&lt;p>&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.&lt;/p>
&lt;h1 id="transaction-summary">Transaction Summary
&lt;/h1>&lt;p>Install 2 Packages
Upgrade 59 Packages
Total download size: 48 M
Downloading Packages:
(1/61): python-pip-6.0.8-1.fc22.noarch.rpm 434 kB/s | 1.7 MB 00:03
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.
Installed:
python-pip.noarch 6.0.8-1.fc22 python-setuptools.noarch 17.1.1-3.fc22&lt;/p>
&lt;p>Upgraded:
bash.x86_64 4.3.39-4.fc22 bash-completion.noarch 1:2.1-7.20150513git1950590.fc22
coreutils.x86_64 8.23-10.fc22 curl.x86_64 7.40.0-5.fc22
&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..
systemd.x86_64 219-19.fc22 systemd-libs.x86_64 219-19.fc22
tzdata.noarch 2015e-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]#
[/bash]
上面的过程下载和启动了一个 fedora，然后更新系统到最新的包，为安装 Web 服务器打好了基础。&lt;/p>
&lt;h1 id="dependencies-resolved-1">[bash]
[root@f1c79aa4c931 /]# dnf install -y &lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
Last metadata expiration check performed 0:06:11 ago on Fri Jul 17 13:30:18 2015.
Dependencies resolved.
&lt;/h1>&lt;h1 id="package-arch-version-repository-size-1">Package Arch Version Repository Size
&lt;/h1>&lt;p>Installing:
apr x86_64 1.5.1-3.fc22 fedora 111 k
apr-util x86_64 1.5.4-1.fc22 fedora 96 k
fedora-logos-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> noarch 22.0.0-1.fc22 fedora 33 k
&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> x86_64 2.4.12-1.fc22 fedora 1.2 M
&lt;a class="link" href="httpd-filesystem" target="_blank" rel="noopener"
>httpd-filesystem&lt;/a> noarch 2.4.12-1.fc22 fedora 24 k
&lt;a class="link" href="httpd-tools" target="_blank" rel="noopener"
>httpd-tools&lt;/a> x86_64 2.4.12-1.fc22 fedora 87 k
mailcap noarch 2.1.44-1.fc22 fedora 36 k&lt;/p>
&lt;h1 id="transaction-summary-1">Transaction Summary
&lt;/h1>&lt;p>Install 7 Packages&lt;/p>
&lt;p>Total download size: 1.6 M
Installed size: 4.4 M
Downloading Packages:
(1/7): apr-1.5.1-3.fc22.x86_64.rpm 128 kB/s | 111 kB 00:00
(2/7): apr-util-1.5.4-1.fc22.x86_64.rpm 100 kB/s | 96 kB 00:00
(3/7): &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch.rpm&lt;/a> 123 kB/s | 24 kB 00:00
(4/7): mailcap-2.1.44-1.fc22.noarch.rpm 123 kB/s | 36 kB 00:00
(5/7): &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64.rpm&lt;/a> 185 kB/s | 87 kB 00:00
(6/7): fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch.rpm" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch.rpm&lt;/a> 151 kB/s | 33 kB 00:00
(7/7): &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64.rpm" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64.rpm&lt;/a> 363 kB/s | 1.2 MB 00:03&lt;/p>
&lt;hr>
&lt;p>Total 264 kB/s | 1.6 MB 00:06
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
Installing : apr-1.5.1-3.fc22.x86_64 1/7
warning: Unable to get systemd shutdown inhibition lock
Installing : apr-util-1.5.4-1.fc22.x86_64 2/7
Installing : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 3/7
Installing : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 4/7
Installing : mailcap-2.1.44-1.fc22.noarch 5/7
Installing : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 6/7
Installing : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 7/7
Verifying : &lt;a class="link" href="httpd-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-2.4.12-1.fc22.x86_64&lt;/a> 1/7
Verifying : apr-1.5.1-3.fc22.x86_64 2/7
Verifying : apr-util-1.5.4-1.fc22.x86_64 3/7
Verifying : &lt;a class="link" href="httpd-filesystem-2.4.12-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-filesystem-2.4.12-1.fc22.noarch&lt;/a> 4/7
Verifying : &lt;a class="link" href="httpd-tools-2.4.12-1.fc22.x86_64" target="_blank" rel="noopener"
>httpd-tools-2.4.12-1.fc22.x86_64&lt;/a> 5/7
Verifying : mailcap-2.1.44-1.fc22.noarch 6/7
Verifying : fedora-logos-&lt;a class="link" href="httpd-22.0.0-1.fc22.noarch" target="_blank" rel="noopener"
>httpd-22.0.0-1.fc22.noarch&lt;/a> 7/7&lt;/p>
&lt;p>Installed:
apr.x86_64 1.5.1-3.fc22 apr-util.x86_64 1.5.4-1.fc22 fedora-logos-&lt;a class="link" href="httpd.noarch" target="_blank" rel="noopener"
>httpd.noarch&lt;/a> 22.0.0-1.fc22 &lt;a class="link" href="httpd.x86_64" target="_blank" rel="noopener"
>httpd.x86_64&lt;/a> 2.4.12-1.fc22
&lt;a class="link" href="httpd-filesystem.noarch" target="_blank" rel="noopener"
>httpd-filesystem.noarch&lt;/a> 2.4.12-1.fc22 &lt;a class="link" href="httpd-tools.x86_64" target="_blank" rel="noopener"
>httpd-tools.x86_64&lt;/a> 2.4.12-1.fc22 mailcap.noarch 2.1.44-1.fc22&lt;/p>
&lt;p>Complete!
[root@f1c79aa4c931 /]#
[root@f1c79aa4c931 /]# exit
exit
[fedora@master ~]$
[/bash]
上面在一个互动的 Bash 里面完成了 httpd 的安装，exit 命令之后，容器会停止运行，可以把这个停下来的镜像文件用下面的命令提交到本地的 image 库中。&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ sudo docker ps -a
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
f1c79aa4c931 fedora &amp;ldquo;bash&amp;rdquo; 17 minutes ago Exited (130) 3 minutes ago desperate_franklin
[fedora@master ~]$ sudo docker commit f1c79aa4c931 fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
c77c91fd4af681e736afc2ec76fc316732e25f52f6f3dd8aa97c973f28c55eb2
[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 25 seconds ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB
[/bash]&lt;/p>
&lt;p>第一个名为 “fedora-httpd” 的就是刚才安装完毕之后，停止的 docker image，用 commit 提交到本第的库中待用。下面开始准备网站的内容，其实只有一个主页，上只有一句话“HW”&lt;/p>
&lt;p>[bash]
[fedora@master ~]$ pwd
/home/fedora
[fedora@master ~]$ vi index.html
[fedora@master ~]$ cat index.html
Hello World!
[fedora@master ~]$ tar -cf mysite.tar index.html
[fedora@a1 ~]$ ls
Dockerfile index.html mysite mysite.tar
[fedora@master ~]$ vi Dockerfile
[fedora@master ~]$ cat Dockerfile
FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
MAINTAINER MartinLiu&lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>&lt;/p>
&lt;h1 id="add-the-tar-file-of-the-web-site">Add the tar file of the web site
&lt;/h1>&lt;p>ADD mysite.tar /tmp/&lt;/p>
&lt;h1 id="docker-automatically-extracted-so-move-files-to-web-directory">Docker automatically extracted. So move files to web directory
&lt;/h1>&lt;p>RUN cp /tmp/index.html /var/www/html&lt;/p>
&lt;p>EXPOSE 80&lt;/p>
&lt;p>ENTRYPOINT [ &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&amp;rdquo;&lt;/a> ]
CMD [ &amp;ldquo;-D&amp;rdquo;, &amp;ldquo;FOREGROUND&amp;rdquo; ]
[/bash]&lt;/p>
&lt;p>上面这段命令中最重要的是 Dockerfiler 文件，这个文件的语法还有很多，以上是一个最简化的例子。使用它可构建一个具有静态页面内容的网站。下面开始构建这个网站的 Docker image。&lt;/p>
&lt;p>[bash]
[fedora@a1 ~]$ sudo docker build -rm -t mysite .
Warning: &amp;lsquo;-rm&amp;rsquo; is deprecated, it will be replaced by &amp;lsquo;&amp;ndash;rm&amp;rsquo; soon. See usage.
Sending build context to Docker daemon 31.74 kB
Sending build context to Docker daemon
Step 0 : FROM fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; 05ce6f68d3f2
Step 1 : MAINTAINER A D Ministator email: &lt;a class="link" href="mailto:martin@aws-faq.com" >martin@aws-faq.com&lt;/a>
&amp;mdash;&amp;gt; Running in 7ee99e26ab76
&amp;mdash;&amp;gt; 03cc8c0deff1
Removing intermediate container 7ee99e26ab76
Step 2 : ADD mysite.tar /tmp/
&amp;mdash;&amp;gt; 52abfb1966ad
Removing intermediate container e6c20f7ca5ed
Step 3 : RUN mv /tmp/* /var/www/html
&amp;mdash;&amp;gt; Running in ef455353caff
&amp;mdash;&amp;gt; 6e24f9a9ea6f
Removing intermediate container ef455353caff
Step 4 : EXPOSE 80
&amp;mdash;&amp;gt; Running in 252b59576b54
&amp;mdash;&amp;gt; 7dd7c049c9d2
Removing intermediate container 252b59576b54
Step 5 : ENTRYPOINT /usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a>
&amp;mdash;&amp;gt; Running in 572c3dafa53a
&amp;mdash;&amp;gt; fa01c160e081
Removing intermediate container 572c3dafa53a
Step 6 : CMD -D FOREGROUND
&amp;mdash;&amp;gt; Running in b133650a6e18
&amp;mdash;&amp;gt; f828e1847160
Removing intermediate container b133650a6e18
Successfully built f828e1847160&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker images
REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE
mysite latest 1bd6d7c1970f 45 seconds ago 605.7 MB
fedora-&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> latest c77c91fd4af6 18 minutes ago 605.7 MB
docker.io/cockpit/ws latest 9a4331b694a6 3 weeks ago 572.2 MB
docker.io/fedora latest ded7cd95e059 7 weeks ago 186.5 MB&lt;/p>
&lt;p>[fedora@master ~]$ sudo docker run -d -P mysite
6122ac7d4dff6cc73c4abc1523ac5dd02606c90d4e42da64823942d787694c1f
[fedora@master ~]$ sudo docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
6122ac7d4dff mysite &amp;ldquo;/usr/sbin/&lt;a class="link" href="httpd" target="_blank" rel="noopener"
>httpd&lt;/a> -D 37 seconds ago Up 35 seconds 0.0.0.0:32768-&amp;gt;80/tcp evil_bardeen
e5032443ab69 cockpit/ws &amp;ldquo;/container/atomic-r 16 minutes ago Up 16 minutes stoic_sammet
[fedora@master ~]$ curl localhost:32768
Hello World!
[/bash]&lt;/p>
&lt;p>在最后的命令行输出中，成功的看到了 Hello World!的出现。用的是 curl 的命令行 web 浏览器。&lt;/p></description></item><item><title>红帽媒体日</title><link>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</link><pubDate>Tue, 14 Jul 2015 14:20:24 +0000</pubDate><guid>https://martinliu.cn/2015/07/14/e7baa2e5b8bde5aa92e4bd93e697a5/</guid><description>&lt;p>本次演讲用了大约 25 分钟，超时了大约 5 分钟多，但是其中有些观点还是没有叙述的很倒位。只能算是我的一种理解和解读，希望对道场的媒体朋友们对认识红帽公司有帮助。&lt;/p>
&lt;p>演讲源版 slide 和录音在这个网页上： &lt;a class="link" href="http://investors.redhat.com/events.cfm" target="_blank" rel="noopener"
>http://investors.redhat.com/events.cfm&lt;/a> 的这部分：&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Jun 24, 2015&lt;/p>
&lt;p>10:30 AM - 1:00 PM ET&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>Red Hat Analyst Day&lt;/p>
&lt;p>&lt;a class="link" href="http://edge.media-server.com/m/p/mhayc7rh" target="_blank" rel="noopener"
> Listen to webcast &lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/common/download/download.cfm?companyid=RHAT&amp;amp;fileid=838366&amp;amp;filekey=633328A1-EAD6-471D-9934-C43F4CDC5666&amp;amp;filename=RH_Summit_Analyst_Day_FINAL.pdf" target="_blank" rel="noopener"
>View Presentation&lt;/a>&lt;/p>
&lt;p>12.2 MB&lt;/p>
&lt;p>&lt;a class="link" href="http://investors.redhat.com/events.cfm#" target="_blank" rel="noopener"
>Add to Briefcase&lt;/a>&lt;/p>
&lt;p>View Additional Information&lt;/p>
&lt;!-- raw HTML omitted --></description></item><item><title>Red Hat Summit之Paul的开源逻辑思维</title><link>https://martinliu.cn/2015/07/01/red-hat-summite4b98bpaule79a84e5bc80e6ba90e980bbe8be91e6809de7bbb4/</link><pubDate>Wed, 01 Jul 2015 06:52:00 +0000</pubDate><guid>https://martinliu.cn/2015/07/01/red-hat-summite4b98bpaule79a84e5bc80e6ba90e980bbe8be91e6809de7bbb4/</guid><description>&lt;p>应用为王，操作系统是心跳。从整个行业的角度，而不只是操作系统和某种工具的角度看，行业已经发生了重大的变化。下面是一些例证。&lt;/p>
&lt;ol>
&lt;li>
&lt;p>VMWare 几年前说操作系统已死，可是最近却发布了 Linux 操作系统的容器技术的产品线。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>微软也把它的一些技术开源了，并且在这些方面取得了一些它们认为可喜的进展。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>IDC 的调查显示，数据中心的操作系统目前是两个主要选择：Linux 和 Windows。以上说明了：开源不再是非主流，而进入了数据中心主流技术，企业现在开发的应用将不得不在两种操作系统中做出选择。&lt;/p>
&lt;p>[caption id=&amp;ldquo;attachment_53819&amp;rdquo; align=&amp;ldquo;aligncenter&amp;rdquo; width=&amp;ldquo;800&amp;rdquo;]&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/cormier_keynote_800px.jpg"
loading="lazy"
alt="cormier_keynote_800px"
>](&lt;a class="link" href="http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/cormier_keynote_800px/" target="_blank" rel="noopener"
>http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/cormier_keynote_800px/&lt;/a>) Keynote 笔记[/caption]&lt;/p>
&lt;p>从这个角度出发，Red Hat 的使命才刚过开始，它中在用 Linux 和相关开源技术来变革整个企业数据中心的技术堆栈；从基础架构一直到应用开发。&lt;/p>
&lt;p>为何开源技术当今如此之火热？开源技术正在解决和处理现实社会中那些最复杂的业务问题。为什么会这样？驱动因素是什么？是动态变化的企业业务需求。&lt;/p>
&lt;p>开源技术最擅长的是快速地创新，这成为了企业技术创新和业务变革的动力，IT 也逐渐因此从成本中心转变为价值和创新中心。&lt;/p>
&lt;p>开源不仅仅只是看到源代码，更重要的：它是自由开放的平台，是分享的平台，它萌生了持续不断的创新，一个创新基于另外一个创新之上，一环接一环地扩散开来，根本停不下来。 这意味着技术问题能够被更快、更好地解决；而不是丢给私有软件技术厂商们各自独自解决，企业最等来消费他们的产品。&lt;/p>
&lt;p>Linux 是计算供给层，毫无疑问云计算和软件定义存储都基于它。它不能叫做一个 Linux 社区，而是一组相关的社区项目协作在一起共同创新，这样才带来了企业可以使用的高性能稳定的操作系统；这样 Red Hat 才有可能给企业带来企业级 Linux 操作系统。&lt;/p>
&lt;p>KVM 是计算的虚拟化抽象层，VMWare 最先进入这一企业市场，它试图用封闭的管理层和锁定的模式来控制这个市场，从而控制客户。Red Hat 的使命是：为企业提供了 Linux 操作系统和至上的开放虚拟化技术；企业可以在这个层面消费开源开放虚拟化技术，并做出备份的方案选择。&lt;/p>
&lt;p>没有 Linux 和开放虚拟化云计算就不存在。公有云提供商使用这些技术构建了共有云服务。可是企业不想让自己的业务运行在防火墙之外，因此 OpenStack 项目应运而生。它让企业构建私有云成为可能。Red Hat 在 OpenStack 上面所有的贡献都 100%的提交到社区，成为主流代码的一部分；从而 OpenStack 能够运行在 Red Hat Linux 和 KVM 之上，这使得 Red Hat 巨大的 Linux 生态系统的价值服务与 OpenStack 领域；企业能够借此放心地在 OpenStack 构建的私有云，并运行企业重要的业务。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/paul-keynote.jpg"
loading="lazy"
alt="paul-keynote"
>在开源的开发框架里，开发人员可以有更多、更新的开发语言、开发工具、库和社区的支持，这使他们能更快地解决业务问题。这些框架首先被广泛应用于互联网行业公司。Red Hat 基于 JBoss 社区为企业提供了企业级的应用服务器、集成工具、规则引擎和丰富的开发语言。让企业级应用能像互联网公司一样地使用开放应用所需的开发框架和开发平台。相比私有技术公司用了四十多年达到目前的程度，开源领域的快速创新用十几年就做到了，发展速度比私有软件快很多。&lt;/p>
&lt;p>现在看到了基础架构和开发框架都极大地受到了开源技术的影响、冲击和变革。运维和开发之间亟待出现一种融合技术，来改善目前的互为孤岛的现状。这种联系将使开源技术为他们带来最大的共同价值。&lt;/p>
&lt;p>容器技术实际上在操作系统中存在了很多年了，只是最近才被引入开源领域；它的出现将确实会改善孤岛问题，为开发人员解决了应用在各种混合的计算和存储平台之间的可移植性、一致性和敏捷性等问题。&lt;/p>
&lt;p>开发和运维之间的割裂还导致了业务创新的迟钝，这个问题已经持续存在很多很多年了。因此 Red Hat 发布了 Red Hat Atomic Enterprise Platform。让企业应用可以安全地在各种形式的计算平台上一致地运行。Red Hat 发布了 OpenShift v3 ，它是一些列容器的自动化调度和部署管理工具集合，并包含全套的开放应用开发框架平台。它能帮助企业基于容器技术发展出新一代的混合应用。&lt;/p>
&lt;p>为何企业 IT 技术会有这些变革？为何这些变革会发生？其实还是企业不得不快速地响应业务的变化，企业不得不使用 IT 技术来创造出更多的价值，应用开发不得不跟上需求变化的脚步，基础架构的运作和运维再也不允许我们手工地安装一台服务器，频繁地去手动更改网口跳线。企业必须面对和适应动态的业务变化，不光要从开发层面，同时从运维层面。&lt;/p>
&lt;p>企业需要构建和重写无状态的业务应用，并使用软件定义存储来解决传统存储的空间不能无限扩容的问题。Gluster 和 Ceph 在这方面已经日臻成熟，并或将去替换私有的传统存储技术。&lt;/p>
&lt;p>&lt;a class="link" href="http://martinliu.cn/paul%e7%9a%84%e5%bc%80%e6%ba%90%e9%80%bb%e8%be%91%e6%80%9d%e7%bb%b4/devops-in-practice/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/07/DevOps-in-practice-1024x574.png"
loading="lazy"
alt="DevOps-in-practice"
>&lt;/a>&lt;/p>
&lt;p>企业应用 DevOps 是一种趋势，它不是一个理论，而是一种实践。Red Hat 的全线企业级开源技术平台已经做好了准备，企业现在就可以开始 DevOps 实践之旅。&lt;/p>
&lt;p>开源和闭源之战将不可逆转地持续下去，Red Hat 将持续守护开源阵营。私有软件技术不愿意看到逐渐开放的变化，他们不希望开放，不愿意去分享；Pual 坚信开放不仅仅是看到代码而已，而是与之共生，是开放的软件开发流程，是基于开放代码上的不断创新活动。这是一场宏大的战役，开源逐渐开始在一些战斗中取胜，待到明年此时，或将看到开源是如何在企业 IT 基础架构上全面获胜的。&lt;/p>
&lt;p>本演讲的官方 Blog 报道：&lt;a class="link" href="http://summitblog.redhat.com/2015/06/24/paul-cormier-announces-new-products-and-technologies-at-red-hat-summit/" target="_blank" rel="noopener"
>http://summitblog.redhat.com/2015/06/24/paul-cormier-announces-new-products-and-technologies-at-red-hat-summit/&lt;/a>&lt;/p>
&lt;p>下面是演讲实况视频。&lt;/p></description></item><item><title>在 RHEL 7 上安装 Foreman 1.8</title><link>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</link><pubDate>Tue, 16 Jun 2015 16:25:34 +0000</pubDate><guid>https://martinliu.cn/2015/06/16/e59ca8-rhel-7-e4b88ae5ae89e8a385-foreman-1-8/</guid><description>&lt;p>首先安装 RHEL7 使用光盘安装最小化系统，安装完成之后，关闭防火墙和 SELinux（为了测试方便），配置主机名为 FQDN 格式，如 fm1.8.xenlab.com； 加本机的主机名解析到/etc/hosts 文集中。之后注册到 RHN。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 ~]# subscription-manager register
[root@fm18 ~]# subscription-manager attach  &amp;ndash;auto
[root@fm18 ~]# subscription-manager repos &amp;ndash;disable=&amp;quot;*&amp;quot;
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-optional-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-server-rhscl-7-rpms
[root@fm18 ~]# subscription-manager repos &amp;ndash;enable=rhel-7-server-rpms
[root@fm18 ~]# rpm -ivh &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
[root@fm18 ~]# yum -y install &lt;a class="link" href="http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://ftp.sjtu.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm&lt;/a>
[root@fm18 ~]# yum clean all
[root@fm18 ~]# yum makecache
[root@fm18 ~]# yum update -y
[root@fm18 ~]# reboot
[root@fm18 ~]# yum install foreman-installer&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>安装 foreman-installer 可能会出现的错误是 ruby 包依赖的问题，导致这个问题的原因可能有：网速太满导致的 yum meta-data 失效，国外的 epel 源下载失败等。解决方法是：使用国内较快的 epel 源，在安装 foreman-installer 前，清除 yum 缓存，重新建立 yum 原数据缓存。&lt;/p>
&lt;p>我的测试机的 yum 源配置如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# yum repolist
Loaded plugins: fastestmirror, product-id, subscription-manager
Loading mirror speeds from cached hostfile&lt;/p>
&lt;ul>
&lt;li>epel: mirrors.neusoft.edu.cn
repo id repo name status
epel/x86_64 Extra Packages for Enterprise Linux 7 - x86_64 8,076
foreman/x86_64 Foreman 1.8 379
foreman-plugins/x86_64 Foreman plugins 1.8 199
puppetlabs-deps/x86_64 Puppet Labs Dependencies El 7 - x86_64 17
puppetlabs-products/x86_64 Puppet Labs Products El 7 - x86_64 175
rhel-7-server-optional-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server - Optional (RPMs) 5,832
rhel-7-server-rpms/7Server/x86_64 Red Hat Enterprise Linux 7 Server (RPMs) 7,036
rhel-server-rhscl-7-rpms/7Server/x86_64 Red Hat Software Collections RPMs for Red Hat Enterprise Linux 7 Server 3,596
repolist: 25,310
[root@fm18 yum.repos.d]# cat /etc/yum.repos.d/epel.repo
[epel]
name=Extra Packages for Enterprise Linux 7 - $basearch
baseurl=http://download.fedoraproject.org/pub/epel/7/$basearch
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=1
gpgcheck=1
gpgkey=https://fedoraproject.org/static/352C64E5.txt&lt;/li>
&lt;/ul>
&lt;p>mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;amp;arch=$basearch
[epel-debuginfo]
name=Extra Packages for Enterprise Linux 7 - $basearch - Debug
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/$basearch/debug
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1&lt;/p>
&lt;p>[epel-source]
name=Extra Packages for Enterprise Linux 7 - $basearch - Source
baseurl=http://ftp.sjtu.edu.cn/fedora/epel/7/SRPMS
#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;amp;arch=$basearch
failovermethod=priority
enabled=0
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
gpgcheck=1
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上应该是安装 foreman-installer 宝过的攻略了。接下来该安装 foreman 的各个组建和插件了。使用 foreman-installer -i 发现是个不错的方法。还可以顺便了解一下当前 foreman 版本的各个主要功能项，如下所示：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@fm18 yum.repos.d]# foreman-installer -i
Welcome to the Foreman installer!&lt;/p>
&lt;hr>
&lt;p>This wizard will gather all required information. You can change any parameter
to your needs.&lt;/p>
&lt;p>Ready to start? (y/n) y&lt;/p>
&lt;p>Main Config Menu&lt;/p>
&lt;ol>
&lt;li>[✓] Configure foreman&lt;/li>
&lt;li>[✓] Configure foreman_cli&lt;/li>
&lt;li>[✗] Configure foreman_compute_ec2&lt;/li>
&lt;li>[✗] Configure foreman_compute_gce&lt;/li>
&lt;li>[✓] Configure foreman_compute_libvirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_openstack&lt;/li>
&lt;li>[✓] Configure foreman_compute_ovirt&lt;/li>
&lt;li>[✗] Configure foreman_compute_rackspace&lt;/li>
&lt;li>[✗] Configure foreman_compute_vmware&lt;/li>
&lt;li>[✓] Configure foreman_plugin_bootdisk&lt;/li>
&lt;li>[✗] Configure foreman_plugin_chef&lt;/li>
&lt;li>[✓] Configure foreman_plugin_default_hostgroup&lt;/li>
&lt;li>[✗] Configure foreman_plugin_digitalocean&lt;/li>
&lt;li>[✓] Configure foreman_plugin_discovery&lt;/li>
&lt;li>[✗] Configure foreman_plugin_docker&lt;/li>
&lt;li>[✗] Configure foreman_plugin_hooks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_plugin_ovirt_provision&lt;/li>
&lt;li>[✗] Configure foreman_plugin_puppetdb&lt;/li>
&lt;li>[✗] Configure foreman_plugin_salt&lt;/li>
&lt;li>[✓] Configure foreman_plugin_setup&lt;/li>
&lt;li>[✓] Configure foreman_plugin_tasks&lt;/li>
&lt;li>[✗] Configure foreman_plugin_templates&lt;/li>
&lt;li>[✓] Configure foreman_proxy&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_abrt&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_chef&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_openscap&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_pulp&lt;/li>
&lt;li>[✗] Configure foreman_proxy_plugin_salt&lt;/li>
&lt;li>[✓] Configure puppet&lt;/li>
&lt;li>Display current config&lt;/li>
&lt;li>Save and run&lt;/li>
&lt;li>Cancel run without Saving
Choose an option from the menu&amp;hellip;&lt;/li>
&lt;/ol>
&lt;p>[root@fm18 yum.repos.d]# puppet agent &amp;ndash;test
Info: Retrieving pluginfacts
Info: Retrieving plugin
Info: Caching catalog for fm18.xenlab.com
Info: Applying configuration version &amp;lsquo;1434466089&amp;rsquo;
Notice: Finished catalog run in 0.21 seconds
[root@fm18 yum.repos.d]#&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>输入数字即可进入每个选项打开和关闭这个功能和服务，这个是对 foreman 的功能配置管理，不光是首次安装可以使用，以后的服务器功能变更也可以这么作，这个对我这样不感冒 answerfile 的人来说甚好。如果是首次安装，可以什么都不选择，来一个说装就装的默认安装也不错。安装完全成功之后，就会显示登陆网址和 管理与密码等信息。用初始的 admin 密码登陆后，修改密码，你的全新的 foreman 就安装成功了。注意在，运行 foreman-installer 过程中是需要联网的，安装过程会按照需求，下载所需要的组建包，例如数据库和 web 服务器等等其它必须的包。登陆后界面如下：&lt;/p>
&lt;p>[gallery size=&amp;ldquo;medium&amp;rdquo; link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53781,53782,53783&amp;rdquo;]&lt;/p>
&lt;p>接下来需要作配置自动化的测试了，我做了一个录像，通过一个简单的示例来说明，如何在 foreman 中测试 pupput module。过程中我使用一个最简单的 /etc/motd 文件的配置的类。演示的内容涉及：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: check-square&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>安装 puppet module 到生产环境中&lt;/p>
&lt;/li>
&lt;li>
&lt;p>导入并且定制 puppet 类的功能&lt;/p>
&lt;/li>
&lt;li>
&lt;p>测试和验证 puppet 类是否工作正常&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>视频下载：[su_button url=&amp;ldquo;http://pan.baidu.com/s/1ntpBXfN&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; background=&amp;quot;#cccccc&amp;quot; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]下载在这里[/su_button]&lt;/p>
&lt;p>本文参考文档：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="http://theforeman.org/manuals/1.8/index.htm" target="_blank" rel="noopener"
>http://theforeman.org/manuals/1.8/index.htm&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="http://itgeeker.net/centos-7-epel-china-mirror-repository/" target="_blank" rel="noopener"
>http://itgeeker.net/centos-7-epel-china-mirror-repository/&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>在CentOS 7上安装部署Katello2.2</title><link>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</link><pubDate>Sun, 07 Jun 2015 16:35:05 +0000</pubDate><guid>https://martinliu.cn/2015/06/07/e59ca8centos-7e4b88ae5ae89e8a385e983a8e7bdb2katello2-2/</guid><description>&lt;p>Katello 的系统架构如下图：&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/katello-arch-diagram.png"
loading="lazy"
alt="katello-arch-diagram"
>&lt;/p>
&lt;p>Katell 系统是一个复合型开源项目，是 Pulp, Candlepin 和 Foreman 的组合。Foreman 默认使用 Puppet 作配置管理。&lt;/p>
&lt;p>它的安装文档见官方手册：&lt;a class="link" href="http://www.katello.org/docs/2.2/installation/index.html" target="_blank" rel="noopener"
>http://www.katello.org/docs/2.2/installation/index.html&lt;/a>&lt;/p>
&lt;p>为了简化安装，请下在本站提供的 CentOS7 完美安装模板。使用它来创建一个虚拟机，6GB 内存，2VCPU；网络上为了方便，请在 virt-manger 中新建如下所示的网络。&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/06/QEMU-KVM-Connection-Details_006.png"
loading="lazy"
alt="QEMU-KVM Connection Details_006"
>&lt;/p>
&lt;p>虚拟机启动之后，确保 host 能正常联网。启动刚才创建的虚拟机，配置好 IP，ping 外网网站，确保它能正常联网即可。其它安装命令如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>yum -y localinstall &lt;a class="link" href="http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm" target="_blank" rel="noopener"
>http://fedorapeople.org/groups/katello/releases/yum/2.2/katello/RHEL/7Server/x86_64/katello-repos-latest.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm" target="_blank" rel="noopener"
>http://yum.theforeman.org/releases/1.8/el7/x86_64/foreman-release.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm" target="_blank" rel="noopener"
>http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm&lt;/a>
yum -y localinstall &lt;a class="link" href="http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener"
>http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm&lt;/a>
yum -y install foreman-release-scl&lt;/p>
&lt;p>yum -y install katello&lt;/p>
&lt;p>katello-installer -v &lt;br>
&amp;ndash;foreman-admin-username admin &lt;br>
&amp;ndash;foreman-admin-password smartvm &lt;br>
&amp;ndash;capsule-dns true &lt;br>
&amp;ndash;capsule-dns-interface eth0 &lt;br>
&amp;ndash;capsule-dns-zone xenlab.com &lt;br>
&amp;ndash;capsule-dns-forwarders 192.168.10.1 &lt;br>
&amp;ndash;capsule-dns-reverse 10.168.192.in-addr.arpa &lt;br>
&amp;ndash;capsule-dhcp true &lt;br>
&amp;ndash;capsule-dhcp-interface eth0 &lt;br>
&amp;ndash;capsule-dhcp-range &amp;ldquo;192.168.10.100 192.168.10.240&amp;rdquo; &lt;br>
&amp;ndash;capsule-dhcp-gateway 192.168.10.1 &lt;br>
&amp;ndash;capsule-dhcp-nameservers 192.168.10.10 &lt;br>
&amp;ndash;capsule-tftp true &lt;br>
&amp;ndash;capsule-tftp-servername $(hostname) &lt;br>
&amp;ndash;capsule-puppet true &lt;br>
&amp;ndash;capsule-puppetca true&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>以上的安装命令如果成功，katello 服务器将具有一下功能：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Foreman 服务器：用于自动化网络安装 linux 系统&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Puppet Master 服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Repos 管理服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DNS，DHCP，PXE 服务器&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>安装成功之后，使用默认的用户名和密码就可以登陆了。&lt;/p></description></item><item><title>安装完美 CentOS7 虚拟机模板</title><link>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</link><pubDate>Fri, 05 Jun 2015 15:44:52 +0000</pubDate><guid>https://martinliu.cn/2015/06/05/e5ae89e8a385e5ae8ce7be8e-centos7-e8999ae68b9fe69cbae6a8a1e69dbf/</guid><description>&lt;h2 id="初始化安装">初始化安装
&lt;/h2>&lt;p>下载最新版 CentOS7 DVD 选择 mini 安装。&lt;/p>
&lt;h2 id="网络配置">网络配置
&lt;/h2>&lt;p>安装过程中设置了静态网络地址，如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0
TYPE=Ethernet
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=no
NAME=eth0
DEVICE=eth0
ONBOOT=yes
DNS1=192.168.10.1
DOMAIN=xenlab.com
IPADDR=192.168.10.8
PREFIX=24
GATEWAY=192.168.10.1
UUID=5fb06bd0-0bb0-7ffb-45f1-d6edd65f3e03&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="软件包">软件包
&lt;/h2>&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>yum install wget &lt;a class="link" href="http://itgeeker.net/tag/telnet/" target="_blank" rel="noopener"
>telnet&lt;/a> perl perl-devel net-tools kernel-devel&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install vim-enhanced.x86_64&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum -y install git&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install acpid&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install tree&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install ntp&lt;/p>
&lt;/li>
&lt;li>
&lt;p>yum install unzip&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="repo-软件更新源">Repo 软件更新源
&lt;/h2>&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>初始化安装，添加了个几个国内的源&lt;/p>
&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;p>rpm -Uvh &lt;a class="link" href="http://rpms.famillecollet.com/enterprise/remi-release-7.rpm" target="_blank" rel="noopener"
>http://rpms.famillecollet.com/enterprise/remi-release-7.rpm&lt;/a>&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>/etc/yum.repo/bk/dvd.repo ；这个是在用 KVM 虚拟机挂 ISO 文件光驱的时候用的，到时候 mount /dev/cdrom /media/dvd , 把该文件方的夫目录中即可使用 iso 文件中的 repos&lt;/p>
&lt;/li>
&lt;li>&lt;/li>
&lt;/ol>
&lt;p>当前的软件源如下：&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp ~]# yum repolist
Loaded plugins: fastestmirror
Repository base is listed more than once in the configuration
Repository updates is listed more than once in the configuration
Repository extras is listed more than once in the configuration
Repository centosplus is listed more than once in the configuration
Loading mirror speeds from cached hostfile&lt;/p>
&lt;ul>
&lt;li>base: mirrors.163.com&lt;/li>
&lt;li>epel: mirrors.neusoft.edu.cn&lt;/li>
&lt;li>extras: mirrors.btte.net&lt;/li>
&lt;li>remi-safe: remi.kazukioishi.net&lt;/li>
&lt;li>updates: mirrors.btte.net
repo id                                 repo name                                                                          status
base/7/x86_64                           CentOS-7 - Base                                                                    8,652
epel/x86_64                             Extra Packages for Enterprise Linux 7 - x86_64                                     8,022
extras/7/x86_64                         CentOS-7 - Extras                                                                    128
remi-safe                               Safe Remi&amp;rsquo;s RPM repository for Enterprise Linux 7 - x86_64                           123
updates/7/x86_64                        CentOS-7 - Updates                                                                   609
repolist: 17,534
[root@centos7-tmp ~]#&lt;/li>
&lt;/ul>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="系统服务配置">系统服务配置
&lt;/h2>&lt;p>Change log:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>关闭 SELinux&lt;/p>
&lt;/li>
&lt;li>
&lt;p>关闭 NetworkManager&lt;/p>
&lt;/li>
&lt;li>
&lt;p>关闭 FirewallD&lt;/p>
&lt;/li>
&lt;li>
&lt;p>systemctl enable acpid.service&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开启 truned-adm virtual-guest 服务模式&lt;/p>
&lt;/li>
&lt;li>
&lt;p>systemctl enable ntpd&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>[bash]&lt;/p>
&lt;p>[root@centos7-tmp tuned]# tuned-adm  list
Cannot talk to Tuned daemon via DBus.
Available profiles:&lt;/p>
&lt;ul>
&lt;li>balanced&lt;/li>
&lt;li>blog&lt;/li>
&lt;li>latency-performance&lt;/li>
&lt;li>network-latency&lt;/li>
&lt;li>network-throughput&lt;/li>
&lt;li>powersave&lt;/li>
&lt;li>throughput-performance&lt;/li>
&lt;li>virtual-guest&lt;/li>
&lt;li>virtual-host
Cannot talk to Tuned daemon via DBus.
It seems that tuned daemon is not running, preset profile is not activated.
Preset profile: virtual-guest&lt;/li>
&lt;/ul>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="模板文件封装">模板文件封装
&lt;/h2>&lt;p>用 sys-unconfig 关机。用 virt-sysprep,  virt-sparsify 去除不必要信息，压缩。&lt;/p>
&lt;p>[bash]&lt;/p>
&lt;p>[root@martin-fedora vm]# ll -h
total 12G
-rw-r&amp;ndash;r&amp;ndash;  1 qemu qemu  81G Jun  5 22:36 centos7-tmp.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  5 22:34 centos7-tmp.qcow2.bk
-rw-r&amp;ndash;r&amp;ndash;  1 root root 2.9G Jun  5 07:56 rhel66-clone-1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 1.6G Jun  3 15:01 rhel66-clone.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  3 13:03 rhel66.qcow2
-rw-r&amp;ndash;r&amp;ndash;. 1 root root  81G Jun  1 00:59 rhel71.qcow2
[root@martin-fedora vm]# export TMPDIR=/home/martin
[root@martin-fedora vm]# virt-sparsify &amp;ndash;compress centos7-tmp.qcow2 centos7-tmp-v1.qcow2
Input disk virtual size = 85899345920 bytes (80.0G)
Create overlay file in /home/martin to protect source disk &amp;hellip;
Examine source disk &amp;hellip;
Fill free space in /dev/centos/root with zero &amp;hellip;
100% ⟦▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒⟧ 00:00
Clearing Linux swap on /dev/centos/swap &amp;hellip;
100% ⟦▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒⟧ 00:00
Fill free space in /dev/sda1 with zero &amp;hellip;
Fill free space in volgroup centos with zero &amp;hellip;
Copy to destination and make sparse &amp;hellip;&lt;/p>
&lt;p>Sparsify operation completed with no errors.  Before deleting the old disk,
carefully check that the target disk boots and works correctly.
[root@martin-fedora vm]# ll -h
total 12G
-rw-r&amp;ndash;r&amp;ndash;  1 qemu qemu  81G Jun  5 22:36 centos7-tmp.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  5 22:34 centos7-tmp.qcow2.bk
-rw-r&amp;ndash;r&amp;ndash;  1 root root 520M Jun  5 23:11 centos7-tmp-v1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 2.9G Jun  5 07:56 rhel66-clone-1.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root 1.6G Jun  3 15:01 rhel66-clone.qcow2
-rw-r&amp;ndash;r&amp;ndash;  1 root root  81G Jun  3 13:03 rhel66.qcow2
-rw-r&amp;ndash;r&amp;ndash;. 1 root root  81G Jun  1 00:59 rhel71.qcow2&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;h2 id="yum-update--y">yum update -y
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>2015-07-10 : Done yum updated. 删除了不需要的 Kernel，安装了 unzip, 修改启动过程为直接文字启动。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>2015-11.15: update kernel to 7.1, set old kernel 1: package-cleanup &amp;ndash;oldkernels &amp;ndash;count=1&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="使用方法">使用方法
&lt;/h2>&lt;p>root 密码 martinliu.cn 开机后记得一定要先修改。&lt;/p>
&lt;p>百度网盘下载地址 [su_button url=&amp;ldquo;http://pan.baidu.com/s/1pJurap9&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;6&amp;rdquo; icon=&amp;ldquo;icon: codepen&amp;rdquo;]centos7-tmp-v7[/su_button]&lt;/p></description></item><item><title>Fedora 22 将于5月26日发布</title><link>https://martinliu.cn/2015/05/24/fedora-22-e5b086e4ba8e5e69c8826e697a5e58f91e5b883/</link><pubDate>Sun, 24 May 2015 08:37:06 +0000</pubDate><guid>https://martinliu.cn/2015/05/24/fedora-22-e5b086e4ba8e5e69c8826e697a5e58f91e5b883/</guid><description>&lt;p>No Content Found&lt;/p></description></item><item><title>RedHat互联网平台解决方案</title><link>https://martinliu.cn/2015/05/17/redhate4ba92e88194e7bd91e5b9b3e58fb0e8a7a3e586b3e696b9e6a188/</link><pubDate>Sun, 17 May 2015 06:29:33 +0000</pubDate><guid>https://martinliu.cn/2015/05/17/redhate4ba92e88194e7bd91e5b9b3e58fb0e8a7a3e586b3e696b9e6a188/</guid><description>&lt;p>ppt 点这里下载：[su_button target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;2&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]下载[/su_button]&lt;/p>
&lt;p>参考文档：
AS 深圳 2014 演讲 PPT 最终稿   &lt;a class="link" href="http://pan.baidu.com/s/1i3KQFRJ" target="_blank" rel="noopener"
>http://pan.baidu.com/s/1i3KQFRJ&lt;/a>
QCon 北京 2015（PPT） &lt;a class="link" href="http://pan.baidu.com/s/1sj2t1yl" target="_blank" rel="noopener"
>http://pan.baidu.com/s/1sj2t1yl&lt;/a>
这两个目录里面干货还是不少，可以下载了慢慢看。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/redhat-sulution.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/redhat-sulution.jpg"
loading="lazy"
alt="redhat-sulution"
>&lt;/a>&lt;/p>
&lt;p>学习了一写文档后，逐渐对互联网公司的架构挑战需求和现状有了一些了解。下面先聊下这方面的一些理解。&lt;/p>
&lt;h1 id="中国规模交易量">中国规模交易量
&lt;/h1>&lt;p>什么叫中国规模交易量，以淘宝 2014-11-11 双十一当天的数据举例：&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: rocket&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>交易创建     80000 笔/秒&lt;/li>
&lt;li>支付     38000 笔/秒&lt;/li>
&lt;li>24 小时完成交易额 571 亿元人民币 // 93 亿美元&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>乍一看这个数字可能没什么感觉，可以比较一下美国的情况。全美所有的传统商场在“黑色星期五”一天的销售也仅为 91 亿美元，即使加上网络销售的 24 亿美元也比天猫“双十一”多不了太多。也就是说，美国黑五当天全网的电商是中国淘宝/天猫一家的四分之一。&lt;/p>
&lt;p>因此中国人口基数大，网民数量大，假如您能激起大众的兴趣的话，你是不缺访问量的。对于意外的大规模的峰值访问量的处理，如果系统架构和应用没有提前经过特别的架构调整、优化；用膝盖都能想到系统挂掉、基础架构崩溃、交易数据出错是必然的事情。&lt;/p>
&lt;p>理解到这个潜在的风险、需求和调整，我们所有设计和从事 IT 基础架构技术服务的人，可以想想，不向前看，不向 BAT 学习，不站在他们的肩膀上设计和调整自己的应用的话。想保证系统平安，除非业务是失败的业务（没有流量），否则没有平安可言。&lt;/p>
&lt;h1 id="架构特点">架构特点
&lt;/h1>&lt;p>且不说马云家系统已经多么牛叉，我们看下京东的架构，我们也可以看到其架构设计在两个维度都非常清晰到位。业务架构维度上尽可能的松耦合，所有业务单元分解清晰，貌似莫名的遵循了分布式架构的要求；这样每个业务单元都可以对 IT 资源的消耗联动，弹性的供给必要的业务处理能力。IT 架构维度上分解为三个层次：应用架构、数据架构、基础架构。基本上 JD 的这个 PPT 改变了我对这个企业的印象。从我的职业经验告诉我，这份 PPT 中规中矩，比较专业，堪称教科书式的架构设计。相对马云家的架构师的 PPT 图画的比较豪放，风格不同。JD 这份 PPT 下载在这里。&lt;/p>
&lt;p>[su_button url=&amp;ldquo;http://pan.baidu.com/s/1o6MI0t0&amp;rdquo; target=&amp;ldquo;blank&amp;rdquo; style=&amp;ldquo;stroked&amp;rdquo; size=&amp;ldquo;2&amp;rdquo; icon=&amp;ldquo;icon: cloud-download&amp;rdquo;]AS 深圳 2014 京东架构设计-吴博[/su_button]&lt;/p>
&lt;p>除了分层细致设计业务架构之外，我们还能看到，电商公司多使用多数据中心多活的模式并发处理海量交易量，每个数据中心都可以处理全业务，都能在灾备和并行处理上一石二鸟。这和我们高贵的传统企业不同，他们往往可以实现同城双中心运行，异地数据中心往往是灾备中心；有些灾备切换并不是全业务的切换，有些灾备中只用于灾备切换演练，并不真的运行业务；有些异地灾备中心也会和主数据中心中的一部分业务做周期性的切换运行。这些高贵的客户往往把核心的数据放在主机上，这在他们想扩展到 3 个或者更多个数据中心的时候，略显尴尬；新增的数据中心也要配置一套新主机系统么？新的主机上数据和应用怎样快速迁移过来？需要多长时间？数据同步的和其他两个数据中心一致么？这些问题的回答都不简单？主机硬件固然是贵？但是所有问题都解决周全的话，可能更贵。&lt;/p>
&lt;p>全新的纯 X86 的架构就在面前，BAT 已经证明了它和开源技术组合在一起就是多快好省的架构。因此，IT 架构的转型也成了必然选择。试想转型之后的机房，每个机架都是标准化的工作单元，它可能是几种类型：纯物理机计算节点、纯虚拟机计算节点（服务器虚拟化或者 OpenStack 等）、纯物理机存储节点（软件定义存储）；或运行容器的物理机或者虚拟机。另外机架上的网络设备和核心网络设备必然有他们自己的设计。这是我的一个猜测，有机会还需要和 BAT 的人多了解。&lt;/p>
&lt;h1 id="开源技术">开源技术
&lt;/h1>&lt;p>BAT 用到的开源技术真的是不甚枚举，也没有必要逐一分析。基本上各个领域里从开发堆栈、到架构堆栈和运维管理堆栈；各个方面的前几位的项目都有实践和应用。&lt;/p>
&lt;h1 id="红帽">红帽
&lt;/h1>&lt;p>那么红帽的互联网平台解决方案是什么？红帽的定位是基础架构技术厂商，因此红帽的全套技术框架就是它的互联网解决方案。如下图所示。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png"
loading="lazy"
alt="Red-Hat-open-hybrid-cloud-1000x563_0"
>&lt;/a>&lt;/p>
&lt;p>有些产品模块需要稍微说明一下，方便和开源项目对应起来。&lt;/p>
&lt;p>[su_list icon=&amp;ldquo;icon: linux&amp;rdquo;]&lt;/p>
&lt;ul>
&lt;li>Red Hat Storage server / ICE : Gluster, Ceph&lt;/li>
&lt;li>Red Hat Enterprise Linux : Fedora Linux&lt;/li>
&lt;li>RHEV-M : Ovirt - 服务器虚拟化&lt;/li>
&lt;li>RHELOSP ： OpenStack 企业版 IaaS 平台&lt;/li>
&lt;li>OpenShift ：OpenShift 社区&lt;/li>
&lt;li>JBoss : JBoss 社区&lt;/li>
&lt;li>Satellite ： Puppet + Foreman 等等其它配置管理工具&lt;/li>
&lt;li>CloudForms ：CloudForms 社区 - 混合云管理&lt;/li>
&lt;/ul>
&lt;p>[/su_list]&lt;/p>
&lt;p>红帽的技术支持范围还包括很多操作系统内的功能组件，包括：HA-Proxy，LVS，MySQL 等等。在技术面的广度上，并不限于以上框架图。不过那幅图是全堆栈的最简易的展示。&lt;/p></description></item><item><title>Practical Linux Infrastructure</title><link>https://martinliu.cn/2015/03/29/practical-linux-infrastructure/</link><pubDate>Sun, 29 Mar 2015 14:10:37 +0000</pubDate><guid>https://martinliu.cn/2015/03/29/practical-linux-infrastructure/</guid><description>&lt;p>&lt;img src="http://ecx.images-amazon.com/images/I/51mcZ%2BD9AsL._SL500_PIsitb-sticker-arrow-big,TopRight,35,-73_OU01_SS75_SS75_.jpg"
loading="lazy"
alt="Practical Linux Infrastructure by Syed Ali"
>&lt;/p>
&lt;p>&lt;strong>Practical Linux Infrastructure&lt;/strong>
by Syed Ali
&lt;strong>Link:&lt;/strong> &lt;a class="link" href="http://amzn.com/148420512X" target="_blank" rel="noopener"
>http://amzn.com/148420512X&lt;/a>&lt;/p>
&lt;p>[gallery size=&amp;ldquo;medium&amp;rdquo; ids=&amp;ldquo;53654,53655&amp;rdquo;]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>CI/CD 要自动化尽可能多的测试案例，从而对代码获得更多的信心。另外，它还要执行一个完整的软件系统的 build，并确保 checked in 的代码并不会搞坏其它东西。任何失败，开发人员都不得不去调查原因。有这样的一些软件可以帮助实施 CI/CD 的 pipeline：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Jenkins (&lt;a class="link" href="http://jenkins-ci.org" target="_blank" rel="noopener"
>http://jenkins-ci.org&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>CruiseControl (&lt;a class="link" href="http://cruisecontrol.sourceforge.net" target="_blank" rel="noopener"
>http://cruisecontrol.sourceforge.net&lt;/a>)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Buildbot (&lt;a class="link" href="http://buildbot.net" target="_blank" rel="noopener"
>http://buildbot.net&lt;/a>)&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>公有云解决方案比私有云方案是不是更贵还是便宜，这取决于企业的规模。&lt;/p></description></item><item><title>如何参与 Project Atomic</title><link>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</link><pubDate>Thu, 19 Mar 2015 03:23:37 +0000</pubDate><guid>https://martinliu.cn/2015/03/19/e5a682e4bd95e58f82e4b88e-project-atomic/</guid><description>&lt;h2 id="关于-project-atomic-项目">关于 Project Atomic 项目
&lt;/h2>&lt;p>&lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/secure-containers.png"
loading="lazy"
alt="secure-containers"
>&lt;/a>&lt;/p>
&lt;p>Project Atomic 项目相关的开源技术组件如下：&lt;/p>
&lt;p>[wm_list bullet=&amp;ldquo;icon-linux&amp;rdquo; class=&amp;quot;&amp;quot;]&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="http://kernel.org/" target="_blank" rel="noopener"
>linux kernel&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://www.freedesktop.org/wiki/Software/systemd/" target="_blank" rel="noopener"
>systemd&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://wiki.gnome.org/Projects/OSTree" target="_blank" rel="noopener"
>OSTree&lt;/a> and &lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>rpm-ostree&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.docker.io/" target="_blank" rel="noopener"
>Docker&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/GoogleCloudPlatform/kubernetes" target="_blank" rel="noopener"
>kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="http://rpm-ostree.cloud.fedoraproject.org/" target="_blank" rel="noopener"
>Fedora&lt;/a> and &lt;a class="link" href="http://wiki.centos.org/Cloud" target="_blank" rel="noopener"
>CentOS&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>[/wm_list]&lt;/p>
&lt;p>该项目的网站在： &lt;a class="link" href="http://www.projectatomic.io/" target="_blank" rel="noopener"
>http://www.projectatomic.io/&lt;/a>&lt;/p>
&lt;h2 id="加入-project-atomic-邮件列表">加入 Project Atomic   邮件列表
&lt;/h2>&lt;p>项目一般性讨论： &lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic&lt;/a>&lt;/p>
&lt;p>项目开发者：&lt;a class="link" href="https://lists.projectatomic.io/mailman/listinfo/atomic-devel" target="_blank" rel="noopener"
>https://lists.projectatomic.io/mailman/listinfo/atomic-devel&lt;/a>&lt;/p>
&lt;p>项目版本发布更新：https://lists.projectatomic.io/mailman/listinfo/atomic-announce&lt;/p>
&lt;p>填写自己的邮箱后，别忘了在邮箱里收信，并且确认。如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/atomic-dev-mail-list.jpg"
loading="lazy"
alt="atomic-dev-mail-list"
>&lt;/a>&lt;/p>
&lt;h2 id="问-project-atomic-问题和讨论">问   Project Atomic 问题和讨论
&lt;/h2>&lt;p>&lt;a class="link" href="http://ask.projectatomic.io/en/questions/" target="_blank" rel="noopener"
>http://ask.projectatomic.io/en/questions/  这里是&lt;/a>项目的论坛可以在这里提问和帮助其他人。&lt;/p>
&lt;h2 id="了解-project-atomic-代码">了解  Project Atomic 代码
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/projectatomic/" target="_blank" rel="noopener"
>https://github.com/projectatomic/&lt;/a> 项目的代码在 Github 网站上可以看到，如果你 watch 这个项目的话，可以收到所有开发者对该项目的所有代码更新等活动。&lt;/p></description></item><item><title>走进学校分享开源</title><link>https://martinliu.cn/2015/03/12/e8b5b0e8bf9be5ada6e6a0a1e58886e4baabe5bc80e6ba90/</link><pubDate>Thu, 12 Mar 2015 12:05:14 +0000</pubDate><guid>https://martinliu.cn/2015/03/12/e8b5b0e8bf9be5ada6e6a0a1e58886e4baabe5bc80e6ba90/</guid><description>&lt;p>今天走入了天津市大学软件学院，和同学们分享了我对开源软件的一些看法和经历；很多同学对如何成为架构师感兴趣。全程学生们没有玩手机和睡觉的，感觉效果应该还不错。ppt 在这里&amp;ndash;&amp;gt;《&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/%e5%bc%80%e6%ba%90%e8%bd%af%e4%bb%b6%e4%b9%8b%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84%e5%b8%88%e7%af%87.pdf" target="_blank" rel="noopener"
>开源软件之系统架构师篇》&lt;/a>可惜对其中一个同学的回答后来想着欠妥 :(&lt;/p></description></item><item><title>Martin's lab 主服务器搭建</title><link>https://martinliu.cn/2015/03/08/e4b8bbe69c8de58aa1e599a8e690ade5bbba/</link><pubDate>Sun, 08 Mar 2015 15:42:01 +0000</pubDate><guid>https://martinliu.cn/2015/03/08/e4b8bbe69c8de58aa1e599a8e690ade5bbba/</guid><description>&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/05/Red-Hat-open-hybrid-cloud-1000x563_0.png"
loading="lazy"
alt="Red-Hat-open-hybrid-cloud-1000x563_0"
>&lt;/p>
&lt;p>上图是红帽产品和技术架构的全貌。来源是：&lt;a class="link" href="http://www.redhat.com/en/technologies/cloud-computing" target="_blank" rel="noopener"
>http://www.redhat.com/en/technologies/cloud-computing&lt;/a> 这张图我用在了我的首次给公司内部的全体销售培训上。由于我是 IT 管理背景的，因此我很习惯从云管理层往下看云引擎的各个层面。但是管理层产品，其实是后来整合纳入的。红帽起家的旗舰产品还是在底层的 RHEL。总之，我想在一个 Lab 里面实现以上所有的部分，所谓实现是让其每个部分都能在运行在假象的一个有意义的业务场景里。还好，红帽的产品全都是基于 x86 平台的，因此我用几个笔记本，再加上我家里的这台 HP MicroServer G8 服务器应该能够全部部署出来。&lt;/p>
&lt;p>做这样的一个 lab 还是要一定的规划和设计的，这些初步的规划和设计都在我的本子里手写的，就不在这里敲字了，随后我会抽空上几张图。&lt;/p>
&lt;h2 id="主服务器基本配置">主服务器基本配置
&lt;/h2>&lt;p>硬件：Lenovo W540 CPU Intel i7, RAM 32 GB, SSD 512GB, HD 1TB&lt;/p>
&lt;p>OS : RHEL 7.1&lt;/p>
&lt;p>订阅是红帽公司的业务模式，也是红帽认为最自豪的部分，红帽相信可以成为开源技术和用户之间的催化剂，它不断参与最优秀的开源技术创新，并为其用户提供最强有利的技术服务和支持。红帽技术员工可以申请一个红帽雇员订阅。我的订阅可以在网上查到如下图所示：&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/employee-sub.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/03/employee-sub-520x295.png"
loading="lazy"
alt="employee-sub"
>&lt;/a>&lt;/p>
&lt;p>红帽的服务必须是基于订阅的每一个节点（物理、虚拟）都需要有有效的订阅，否则红帽的支持服务不能生效。对于一个已经成功注册到红帽官网，并且状态正常的服务器，应该显示如下的注册状态：&lt;/p>
&lt;p>[bash]
[root@w540 ~]# subscription-manager list&lt;/p>
&lt;p>+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+
安装的产品状态
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-+
产品名称： Red Hat Enterprise Linux Server
产品 ID： 69
版本： 7.0
构架： x86_64
状态： 已订阅
状态详情：
开始： 2014 年 09 月 09 日
结束： 2015 年 12 月 08 日
[/bash]&lt;/p>
&lt;p>红帽员工订阅意味着所有红帽产品。&lt;/p>
&lt;h2 id="基本服务配置">基本服务配置
&lt;/h2>&lt;h3 id="kvm">KVM
&lt;/h3>&lt;p>KVM 的上手还真比我想象的速度要慢一些，起码比我用 XenServer 的经历更加纠结一些。总之现在可以彻底的忘记其它任何的选项，KVM 可以满足我的所有需求了。由于主服务器有 512SSD + 32GB RAM + 8 vCPU，所以我打算把产品里的所有管理控制节点 VM 都部署在这个机器上。预计有 10 个左右的虚拟机。
安装配置方面这里就不赘述了。只把困扰我许久的几个网络配置贴出来，供参考。&lt;/p>
&lt;p>网桥 0 的功能是为所有虚拟机提供外网链接，使他们和主机一样直通主机所物理链接的局域网。
[bash]
[root@w540 ~]# cat /etc/sysconfig/network-scripts/ifcfg-br0
DEVICE=br0
ONBOOT=yes
TYPE=Bridge
BOOTPROTO=none
STP=on
DELAY=0
DNS1=192.168.0.1
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
DNS2=4.4.4.4
IPADDR=192.168.0.5
PREFIX=24
GATEWAY=192.168.0.1
NM_CONTROLLED=no
[/bash]&lt;/p>
&lt;p>主机原本的一块物理网卡的配置，由于增加了这个网桥，需求更新如下：
[bash]
[root@w540 ~]# cat /etc/sysconfig/network-scripts/ifcfg-enp0s25
DEVICE=enp0s25
ONBOOT=yes
BRIDGE=br0
NM_CONTROLLED=no
BOOTPROTO=none
[/bash]&lt;/p>
&lt;p>kvm 这块处理这个折腾我很久的 br0 之外，其它的功能看起来还不错，运行在 SSD 上的虚拟机也启动和运行速度飞快。&lt;/p>
&lt;h3 id="repo-服务器">Repo 服务器
&lt;/h3>&lt;p>Repos 是红帽软件仓库的简称。它具体指每个订阅内所有软件频道里面下载出来的软件包目录。下载到的某个软件包频道的 repos 目录中是一堆的 rpm 包文件，这样的目录可以制作成本地 Repos 服务器，能够提供给所有 LAN 里 RHEL OS 用来做软件的安装和升级用。
用主服务器上 1TB 的慢速普通盘来保存这些下载的 repos，安装 http 服务器，把它共享给本 lab 的 lan 中。具体的几个参考脚本如下。&lt;/p>
&lt;p>在把本服务器注册到红帽网站之后，他会默认 attach 一堆可能不需要的 repos，因此我的做法是先关闭掉所有的默认开启，然后再开启我所需要并且关注的东西。
[bash]
[root@w540 repos]# subscription-manager repos &amp;ndash;disable=&amp;quot;*&amp;quot;
[/bash]
以上命令的结果会反问，所有的被关闭的 repos。下面许开启我当前需求的 repos。
[bash]
[root@w540 repos]# cat rhel7-enable.sh
subscription-manager repos &amp;ndash;enable=rhel-7-server-extras-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-optional-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-ha-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=jb-eap-6-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rt-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-server-rhscl-7-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhn-tools-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-5.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhevh-rpms
subscription-manager repos &amp;ndash;enable=rhel-atomic-host-rpms
subscription-manager repos &amp;ndash;enable=rhel-rs-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-capsule-optional-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rhev-mgmt-agent-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-openstack-6.0-installer-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rh-common-rpms
subscription-manager repos &amp;ndash;enable=jb-eap-6.3-for-rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-optional-6.0-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-supplementary-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-optional-6.1-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-optional-rpms
subscription-manager repos &amp;ndash;enable=rhel-7-server-satellite-6.0-rpms
subscription-manager repos &amp;ndash;enable=jb-ews-2-for-rhel-7-server-rpms
[/bash]&lt;/p>
&lt;p>接下来可以用命令来从红帽 CDN 同步下载每个 Repos 里面的软件包。
[bash]
[root@w540 rhel70]# cat sync.sh
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-satellite-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-extras-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rhevh-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-satellite-capsule-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-5.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rhev-mgmt-agent-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-atomic-host-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-optional-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-rs-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-rh-common-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-server-rhscl-7-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-6.0-installer-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-openstack-6.0-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=jb-eap-6.3-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-ha-for-rhel-7-server-rpms &amp;ndash;download_path=/data/Repos/rhel70/
reposync &amp;ndash;gpgcheck &amp;ndash;newest-only &amp;ndash;plugins &amp;ndash;downloadcomps &amp;ndash;repoid=rhel-7-server-supplementary-rpms &amp;ndash;download_path=/data/Repos/rhel70/
[/bash]&lt;/p>
&lt;p>安装 httpd 的过程就不叙述了，下面就贴一个本机的配置文件。
[bash]
Alias /repos &amp;ldquo;/data/repos&amp;rdquo;
&amp;lt;Directory &amp;ldquo;/data/repos&amp;rdquo;&amp;gt;
Options None
AllowOverride None
Order allow,deny
Allow from all
Require all granted&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>最后，在任何需要的机器上本地 repos 源的配置文件可以类似如下：
[bash]
[root@sat6-leb yum.repos.d]# ls
rhel70.repo
[root@sat6-leb yum.repos.d]# cat rhel70.repo
[rhel-7-server-rpms]
name=rhel-7-server-rpms
baseurl=http://192.168.0.5/repos/rhel70/rhel-7-server-rpms/
gpgcheck=0
enable=1&lt;/p>
&lt;p>[/bash]&lt;/p>
&lt;p>当然，我的目标是以后这个 lab 网内所有的机器都需要受到 satellite 6 服务器的管理和控制，并不需要在每个服务器上手动的去安装和管理 repos 内容和订阅。下面分阶段安装各种控制器节点的时候，在详细说明如何使用 satellite 6 做种子服务器生出所有的其他节点。这里的 repo 服务器还是作为最初的种子服务器，它使安装 satellite 6 服务器的源。也是作为 lab 中对于 satellite6 的一个备份选项。&lt;/p>
&lt;h3 id="nfs-服务器">NFS 服务器
&lt;/h3>&lt;p>本机的存储空间比较大，可以作为慢速 NFS 共享存储和 ISO 镜像文件服务器使用，因此，安装 nfs 服务器之后，就可以把本地的满速普通硬盘使用 nfs 的方式共享到 lab 内网了。配置文件参考如下：
[bash]
[root@w540 ~]# cat /etc/exports
/data/nfs 192.168.0.&lt;em>(rw,async)
/data/iso 192.168.0.&lt;/em>(rw,async)
/home/test 192.168.0.&lt;em>(rw,async)
[root@w540 ~]# showmount -e localhost
Export list for localhost:
/home/test 192.168.0.&lt;/em>
/data/iso 192.168.0._
/data/nfs 192.168.0._
[root@w540 ~]#
[/bash]&lt;/p>
&lt;h3 id="ntp-服务器">NTP 服务器
&lt;/h3>&lt;p>根据红帽知识库文档，选择本机这个物理服务器作为 lab 内网的时钟服务器，所有的虚拟机和其他物理机都和他同步时钟。最终的配置还没有确定。随后更新靠谱的可以供参考的配置&lt;/p></description></item><item><title>2014 Red Hat Summit- Paul Cormier, Red Hat keynote</title><link>https://martinliu.cn/2015/02/09/2014-red-hat-summit-paul-cormier-red-hat-keynote/</link><pubDate>Mon, 09 Feb 2015 05:24:15 +0000</pubDate><guid>https://martinliu.cn/2015/02/09/2014-red-hat-summit-paul-cormier-red-hat-keynote/</guid><description>&lt;p>2014 Red Hat Summit- Paul Cormier, Red Hat keynote&lt;/p></description></item><item><title>Fedora 21 Server测试 - Cockpit篇</title><link>https://martinliu.cn/2015/01/27/fedora-21-server-e6b58be8af95-cockpite7af87/</link><pubDate>Tue, 27 Jan 2015 16:22:18 +0000</pubDate><guid>https://martinliu.cn/2015/01/27/fedora-21-server-e6b58be8af95-cockpite7af87/</guid><description>&lt;p>先上几张 Fedora 21 server 安装的截图。&lt;/p>
&lt;p>[gallery link=&amp;ldquo;file&amp;rdquo; ids=&amp;ldquo;53424,53425,53426,53427&amp;rdquo;]&lt;/p>
&lt;p>新的配色还是不错的，重点看第三张图，虽然不全，已经基本上看出 F21 服务器版的软件包了。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-28-001822.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-28-001822-1024x686.png"
loading="lazy"
alt="Screenshot from 2015-01-28 00:18:22"
>&lt;/a>&lt;/p>
&lt;p>安装之后发现确实 Cockpit 的界面已经可以登陆了，是黑色的风格。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-27-235218.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/Screenshot-from-2015-01-27-235218-1024x625.png"
loading="lazy"
alt="Screenshot from 2015-01-27 23:52:18"
>&lt;/a>&lt;/p>
&lt;p>在继续安装和探索之前，我有装了一个默认选项的 f21 server ，想通过这个节点的节目添加后统一管理。&lt;/p>
&lt;p>[gallery columns=&amp;ldquo;1&amp;rdquo; size=&amp;ldquo;large&amp;rdquo; ids=&amp;ldquo;53433,53434,53435,53436,53437,53438,53439,53440,53441,53442,53443,53444,53445,53446,53447,53448&amp;rdquo;]&lt;/p>
&lt;p>我感觉有了这个工具，新手们可以轻松第完成大部分 Linux 系统的维护工作了。&lt;/p>
&lt;p>如果你点击了启用 docker , eth0 的网络配置会丢失，会被 docker 那走作网桥，给他的 image 用作网关。这个测试最好是虚拟机多网卡。&lt;/p></description></item><item><title>Fedora 22 有何值得期待</title><link>https://martinliu.cn/2015/01/26/fedora-22-e69c89e4bd95e580bce5be97e69c9fe5be85/</link><pubDate>Mon, 26 Jan 2015 14:26:12 +0000</pubDate><guid>https://martinliu.cn/2015/01/26/fedora-22-e69c89e4bd95e580bce5be97e69c9fe5be85/</guid><description>&lt;p>我使用这新安装的 F21，连接着公司阿姆斯特丹的 VPN，流畅的使用 Firefox ， Chrome 上网，在没有墙的世界里顺利传行着。重返 Linux 世界，想起来很久没有用 windows 桌面了，渐渐适应和熟悉这感觉，且有些怀旧。&lt;/p>
&lt;p>之前 Fedora 是没有太多的体验，用的最多的是 opensuse + kde 桌面的组合。目前，看到 fedora magazine 上很多更新，感觉真的是发展的太快了。 http://fedoramagazine.org/see-whats-coming-in-fedora-22-workstation/ 看了下这个帖子，上面说 F22 的提升包括：更长的电池寿命、gnome Wayland 更多改进、开始应用 bundle 的开发、更好的第三方应用支持、提升 Terminal、改善开发工具等等。查看更多细节：&lt;a class="link" href="http://blogs.gnome.org/uraeus/2015/01/19/planning-for-fedora-workstation-22/" target="_blank" rel="noopener"
>Christian’s blog pos&lt;/a>t&lt;/p></description></item><item><title>再次入手Linux - Fedora 21</title><link>https://martinliu.cn/2015/01/25/e5868de6aca1e585a5e6898blinux-fedora-21/</link><pubDate>Sun, 25 Jan 2015 10:10:09 +0000</pubDate><guid>https://martinliu.cn/2015/01/25/e5868de6aca1e585a5e6898blinux-fedora-21/</guid><description>&lt;p>再次安装桌面版的 Linux 操作系统 ，并打算作为主要的工作平台。已经是 fedora 21，需要新贴纸了。&lt;/p>
&lt;p>接下来作的：http://www.linuxidc.com/Linux/2015-01/111481.htm&lt;/p>
&lt;p>剩余没做的是按照搜狗输入法。&lt;/p></description></item><item><title>虚拟机根分区扩容</title><link>https://martinliu.cn/2015/01/21/e8999ae68b9fe69cbae6a0b9e58886e58cbae689a9e5aeb9/</link><pubDate>Wed, 21 Jan 2015 15:46:31 +0000</pubDate><guid>https://martinliu.cn/2015/01/21/e8999ae68b9fe69cbae6a0b9e58886e58cbae689a9e5aeb9/</guid><description>&lt;p>我的 Satellite 虚拟机下载了所有常用的 repo，100GB 的磁盘空间都占满了，无奈必须扩容，否则没法用了。&lt;/p>
&lt;p>扩容的前提条件正好满足：根分区在最后一个分区。&lt;/p>
&lt;p>由于是 kvm 的虚拟机，所以首先需要扩大硬盘文件的大小： qemu-img resize my.img +100G 。&lt;/p>
&lt;p>下面去操作系统里扩容。先要用 fdisk 删除根分区。记录初始的其实点。然后用 n 命令新建分区，输入原始其实点位置，回车默认接受结束点的最后一个位置。w 存盘。&lt;/p>
&lt;p>reboot 系统，起来之后用命令扩容分区： resize2fs /dev/vda2 ； 在线扩容需要等一段时间，100GB 的空间初始化在我的普通磁盘上做了 5 分钟左右。在此 reboot 机器，起来之后在看 df -kh 发现已经增加了 100GB 了，接下来再也不用担心类似情况了。&lt;/p></description></item><item><title>KVM Virt-Manager 实用参考手册</title><link>https://martinliu.cn/2015/01/06/kvm-virt-manager-e5ae9ee794a8e58f82e88083e6898be5868c/</link><pubDate>Tue, 06 Jan 2015 15:55:02 +0000</pubDate><guid>https://martinliu.cn/2015/01/06/kvm-virt-manager-e5ae9ee794a8e58f82e88083e6898be5868c/</guid><description>&lt;h1 id="关于-virt-manager">关于 virt manager
&lt;/h1>&lt;p>Virt Manager 是一个不错的 kvm 虚拟机管理工具，能够方便地管理虚拟机。我的测试机目前已经完全转向 RHEL7 上跑 KVM 虚拟机，通过 virt-manager 去管理的方案。&lt;/p>
&lt;p>&lt;a class="link" href="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/topbar_logo.png" target="_blank" rel="noopener"
>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2015/01/topbar_logo.png"
loading="lazy"
alt="topbar_logo"
>&lt;/a>&lt;/p>
&lt;p>安装 virt-manager：yum install -y virt-* ； 装完之后重新启动机器即可使用。&lt;/p>
&lt;h1 id="建议初始配置">建议初始配置
&lt;/h1>&lt;p>安装完后有几个环境的配置推荐可以做一下。&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/virt-manager-kvm-1/Screenshot-from-2015-01-06-193413.png"
loading="lazy"
alt="点击New Volume"
>&lt;/p>
&lt;p>Storage Pool ： 一个默认的 + 两个自建的&lt;/p>
&lt;ul>
&lt;li>Default ：这是 virt-manager 安装时默认创建的，它和操作系统在同一个卷上，我的测试机使用 SSD 卷，因此我所有虚拟机都会使用这个卷，这样速度比较快&lt;/li>
&lt;li>hd ：这是测试机上普通磁盘的一个目录，目的是把那些不需要快速 IO 的虚拟机跑着这里，节省 SSD 的磁盘空间&lt;/li>
&lt;li>iso ：这是普通磁盘上的 iso 文件目录，单独挂在这是为了，使用方便&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="http://martinliu.cn/wp-content/gallery/virt-manager-kvm-1/Screenshot-from-2015-01-06-210927.png"
loading="lazy"
alt="自建的内外1"
>&lt;/p>
&lt;p>虚拟网络 （一个默认+两个新建）&lt;/p>
&lt;ul>
&lt;li>default ： 这个是安装了 virt-manager + kvm 之后就有的，是用 NAT 的方式，带 dhcp，默认虚拟机可以连接物理机所在的外围&lt;/li>
&lt;li>virbr1/virbr2 ：是我根据自己的需要建立的，只能和 host 物理机通讯，无 dhcp&lt;/li>
&lt;/ul>
&lt;p>我最近做 OpenStack 的实践，OpenStack 需要最好隔离的几个网络跑不同的数据，因此 virbr1/2 正好符合 OpenStack 的测试需求。另外我在物理机的操作系统上搭建了 yum 源服务器，因此任何一个虚拟机都可以通过 http 访问我放在物理机上的 repo 目录，我只需要更新这些 repos 目录里面的 rpm 包的内容，我的 lab 环境中的所有虚拟机（不管是在何网络）都可以使用到最新的系统更新包和软件包了。这样大大提高了虚拟机里面软件测试的效率，所有虚拟机像是在本地安装 rpm 软件包一样，再也不需要联网下载，我只需要每周去公司联网同步一下这些目录即可。&lt;/p>
&lt;p>有了以上配置之后，就可以高效工作了，效率感觉比 vmware workstation 要高，速度快稳定。下面是虚拟机创建的流程，里面有些我的推荐做法。&lt;/p>
&lt;p>&lt;img src="http://martinliu.cn/nextgen-attach_to_post/preview/id--53382"
loading="lazy"
>&lt;/p>
&lt;p>本想看下，virt-install 的使用方式，感觉那个参数太多，容易敲错，还是界面比较容易上手，而且出错的机会不高。&lt;/p>
&lt;h1 id="命令行常用操作指南持续更新中">命令行常用操作指南（持续更新中）
&lt;/h1>&lt;p>virt-manager 主要操作还是在命令行比较高效，特别是下面的这些操作，在使用过程中，比较多用，用的多了感觉比 GUI 操作方式效率高多了。&lt;/p>
&lt;p>virt-manager 的命令行功能调用有两种方式：&lt;/p>
&lt;ul>
&lt;li>直接 virsh 回车 ，之后就进入了 virsh # 的一个专门的 shell，help 就能看的里面支持的所有命令&lt;/li>
&lt;li>在普通 shell 下 直接 virsh &amp;lt;操作命令&amp;gt; &amp;lt;参数&amp;gt;，&lt;/li>
&lt;/ul>
&lt;p>这两个方式的调用没有差异，感觉全凭个人的操作习惯。&lt;/p>
&lt;p>下面是一些常用的虚拟机管理功能命令参数和实例。&lt;/p>
&lt;p>开启一个虚拟机&lt;/p>
&lt;p>virsh # start server8-a&lt;/p>
&lt;p>查看所有虚拟机(on and off)&lt;/p>
&lt;p>virsh list &amp;ndash;all&lt;/p>
&lt;p>关闭一个虚拟机&lt;/p>
&lt;p>virsh # shutdown server8-a&lt;/p>
&lt;p>对一个虚拟机作一个快照&lt;/p>
&lt;p>snapshot-create-as server8-a flat-os &amp;ldquo;before customization&amp;rdquo;&lt;/p>
&lt;p>查看虚拟的所有快照&lt;/p>
&lt;p>snapshot-list server8-a&lt;/p>
&lt;p>返回到之前的一个 snapshot&lt;/p>
&lt;p>virsh # snapshot-revert  &amp;ndash;domain server8-a flat-os&lt;/p>
&lt;p>克隆一个虚拟机到新文件（用于模板的复制创建新 vm，或者 vm 的备份）&lt;br>
[root@w540 Desktop]# virt-clone -o rhel70-tmp -n rhel70-tmp-clone -f /data/vm/cloned-new-vm.img&lt;br>
Cloning rhel7-tmp.img                                                                             | 195 GB  00:00:03     &lt;br>
Clone &amp;lsquo;rhel70-tmp-clone&amp;rsquo; created successfully.&lt;/p></description></item><item><title>wget 下载大文件-断点续传</title><link>https://martinliu.cn/2014/12/24/wget-e4b88be8bdbde5a4a7e69687e4bbb6-e696ade782b9e7bbade4bca0/</link><pubDate>Wed, 24 Dec 2014 01:43:03 +0000</pubDate><guid>https://martinliu.cn/2014/12/24/wget-e4b88be8bdbde5a4a7e69687e4bbb6-e696ade782b9e7bbade4bca0/</guid><description>&lt;p>举例如下：&lt;/p>
&lt;p>wget -c -b -t 0 -O CentOS-7.0-1406-x86_64-Everything.iso  &lt;a class="link" href="http://mirrors.sohu.com/centos/7/isos/x86_64/CentOS-7.0-1406-x86_64-Everything.iso" target="_blank" rel="noopener"
>http://mirrors.sohu.com/centos/7/isos/x86_64/CentOS-7.0-1406-x86_64-Everything.iso&lt;/a> -o centos.log&lt;/p>
&lt;p>下载一个 7GB 的 DVD 文件，能够断点续传，能够把状态写入 centos.log 文件中。具体参数说明如下：&lt;/p>
&lt;p>[su_table]&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;p>本文参考：&lt;a class="link" href="http://blog.chinaunix.net/uid-14735472-id-111049.html" target="_blank" rel="noopener"
>http://blog.chinaunix.net/uid-14735472-id-111049.html&lt;/a>&lt;/p></description></item><item><title>Workshop: Creating a Docker management environment</title><link>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</link><pubDate>Thu, 04 Dec 2014 02:46:04 +0000</pubDate><guid>https://martinliu.cn/2014/12/04/workshop-creating-docker-management-environment/</guid><description>&lt;p>Red Hat APAC Tech Exchange, Macau&lt;/p>
&lt;p>Day 3 - 4 December 2014   &amp;ndash;  Track C&lt;/p>
&lt;h2 id="command-to-run">Command to Run
&lt;/h2>&lt;p>bash &amp;lt;(curl -sSL &lt;a class="link" href="https://bit.ly/get-fabric8" target="_blank" rel="noopener"
>https://bit.ly/get-fabric8&lt;/a>) -k&lt;/p>
&lt;h2 id="document-to-read">Document to read
&lt;/h2>&lt;p>&lt;a class="link" href="https://docs.docker.com/installation/" target="_blank" rel="noopener"
>https://docs.docker.com/installation/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://fabric8.io/v2/index.html" target="_blank" rel="noopener"
>http://fabric8.io/v2/index.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/fabric8io/quickstarts" target="_blank" rel="noopener"
>https://github.com/fabric8io/quickstarts&lt;/a>&lt;/p>
&lt;p>My document: &lt;a class="link" href="https://access.redhat.com/articles/881893" target="_blank" rel="noopener"
>https://access.redhat.com/articles/881893&lt;/a>&lt;/p>
&lt;h2 id="blogs">Blogs
&lt;/h2>&lt;p>&lt;a class="link" href="http://rawlingsj.blogspot.com/" target="_blank" rel="noopener"
>http://rawlingsj.blogspot.com/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://macstrac.blogspot.co.uk/" target="_blank" rel="noopener"
>http://macstrac.blogspot.co.uk/&lt;/a>&lt;/p></description></item><item><title>workshop redhat storage and splunk</title><link>https://martinliu.cn/2014/12/04/workshop-redhat-storage-splunk/</link><pubDate>Thu, 04 Dec 2014 02:34:03 +0000</pubDate><guid>https://martinliu.cn/2014/12/04/workshop-redhat-storage-splunk/</guid><description>&lt;h2 id="instance-details">Instance Details
&lt;/h2>&lt;p>Replace userX with your user id. For example, user1 &amp;ndash;&amp;gt; user 30&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;h3 id="on-your-laptop">On your laptop
&lt;/h3>&lt;p>cd ~/.ssh
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub&lt;/a>
chmod 600 rhte-splunk-lab
chmod 644 rhte-splunk-lab.pub&lt;/p>
&lt;p>ssh -i ~/.ssh/rhte-splunk-lab -l ec2-user gw-userX.apac.red&lt;/p>
&lt;h3 id="on-all-rhs-nodes">On all RHS Nodes
&lt;/h3>&lt;p>sudo su -
subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-6-server-rpms &amp;ndash;enable rhs-3-for-rhel-6-server-rpms &amp;ndash;enable rhel-scalefs-for-rhel-6-server-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>cat /etc/redhat-* # should say Red Hat Enterprise Linux 6.6 (Santiago) and Red Hat Storage 3.0 Update 2&lt;/p>
&lt;p>/sbin/service glusterd restart&lt;/p>
&lt;h3 id="on-rhs-01">On RHS-01
&lt;/h3>&lt;p>gluster peer probe rhs-02.userX.apac.red
gluster peer probe rhs-03.userX.apac.red
gluster peer probe rhs-04.userX.apac.red&lt;/p>
&lt;p>gluster pool list&lt;/p>
&lt;p>gluster volume create splunk replica 2 rhs-01.userX.apac.red:/srv/brick1/splunk rhs-02.userX.apac.red:/srv/brick1/splunk rhs-03.userX.apac.red:/srv/brick1/splunk rhs-04.userX.apac.red:/srv/brick1/splunk&lt;/p>
&lt;p>gluster volume set splunk storage.owner-uid 1001
gluster volume set splunk storage.owner-gid 1001
gluster volume set splunk user.nfs disable&lt;/p>
&lt;p>gluster volume start splunk&lt;/p>
&lt;p>gluster volume info
gluster volume status&lt;/p>
&lt;h3 id="on-splunk-master-and-splunk-search-nodes">On Splunk Master and Splunk Search Nodes
&lt;/h3>&lt;p>subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-7-server-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;h3 id="on-all-splunk-nodes">On all Splunk Nodes
&lt;/h3>&lt;p>subscription-manager attach &amp;ndash;pool 8a85f9864675056e014684868378649c
subscription-manager repos &amp;ndash;disable=*
subscription-manager repos &amp;ndash;enable rhel-7-server-rpms &amp;ndash;enable rhel-7-server-openstack-5.0-rpms &amp;ndash;enable rhel-7-server-rh-common-rpms&lt;/p>
&lt;p>yum -y update&lt;/p>
&lt;p>yum -y install wget lvm2&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;p>/bin/systemctl start lvm2-lvmetad.service
/bin/systemctl start lvm2-monitor.service&lt;/p>
&lt;p>pvcreate &amp;ndash;dataalignment 1024k /dev/xvdb1
vgcreate splunkdb /dev/xvdb1
/sbin/lvcreate -a y -l 100%VG -n splunkdb splunkdb
mkfs.xfs -i size=512 /dev/mapper/splunkdb-splunkdb&lt;/p>
&lt;h3 id="on-all-splunk-nodes-1">On all Splunk Nodes
&lt;/h3>&lt;p>echo -e &lt;code>blkid /dev/mapper/splunkdb-splunkdb | cut -d &amp;quot; &amp;quot; -f 2&lt;/code>&amp;quot;\t/opt/\txfs\tdefaults,inode64,noatime\t0\t0&amp;quot; &amp;raquo; /etc/fstab
mount /opt&lt;/p>
&lt;p>yum -y localinstall splunk-6.2.0-237341-linux-2.6-x86_64.rpm&lt;/p>
&lt;p>echo -e &amp;ldquo;splunk\t\tsoft\tnofile\t10240&amp;rdquo; &amp;raquo; /etc/security/limits.conf
echo -e &amp;ldquo;splunk\t\thard\tnofile\t20480&amp;rdquo; &amp;raquo; /etc/security/limits.conf&lt;/p>
&lt;h3 id="on-splunk-master-and-splunk-search">On Splunk Master and Splunk Search
&lt;/h3>&lt;p>cd /lib/systemd/system
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service&lt;/a> &amp;ndash;no-check-certificate&lt;/p>
&lt;p>sed -i.bak &amp;lsquo;/^After|^Requires/d&amp;rsquo; splunkd.service
sed -i.bak &amp;lsquo;/Description/a After=network.target local-fs.target&amp;rsquo; splunkd.service
systemctl daemon-reload
systemctl enable splunkd.service
systemctl start splunkd.service&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;
q
y
systemctl restart splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;&lt;/p>
&lt;h3 id="on-splunk-peer-nodes">On Splunk Peer Nodes
&lt;/h3>&lt;p>yum install -y glusterfs-fuse python-httplib2 attr&lt;/p>
&lt;p>mkdir /mnt/glusterfs
echo -e &amp;ldquo;rhs-01.userX.apac.red:/splunk\t\t/mnt/glusterfs\t\tglusterfs\t\tdefaults,_netdev,backup-volfile-servers=rhs02.userX.apac.red:rhs-03.userX.apac.red:rhs-04.userX.apac.red\t0\t0&amp;rdquo; &amp;raquo; /etc/fstab
mount /mnt/glusterfs&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;mkdir -p /opt/splunk/var/lib/splunk/glusterfs&amp;rsquo;
runuser -l splunk -c &amp;lsquo;mkdir -p /mnt/glusterfs/$(hostname -s)&amp;rsquo;&lt;/p>
&lt;p>cd /lib/systemd/system
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd-pre.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd-pre.service&lt;/a>
systemctl enable splunkd-pre.service
systemctl start splunkd-pre.service&lt;/p>
&lt;p>echo OPTIMISTIC_ABOUT_FILE_LOCKING = 1 &amp;raquo; /opt/splunk/etc/splunk-launch.conf&lt;/p>
&lt;p>wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/splunkd.service&lt;/a>
systemctl daemon-reload
systemctl enable splunkd.service
systemctl start splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;
q
y
systemctl start splunkd.service
runuser -l splunk -c &amp;lsquo;splunk status&amp;rsquo;&lt;/p>
&lt;p>cd /opt/splunk/bin
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.py" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.py&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.sh" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsBucketMover.sh&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsLinkChecker.py" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhsLinkChecker.py&lt;/a>&lt;/p>
&lt;p>chown splunk:splunk/rhs*&lt;/p>
&lt;h3 id="on-gw-userxapacred">on gw-userX.apac.red
&lt;/h3>&lt;p>iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8001 -j DNAT &amp;ndash;to-destination 10.100.0.211:8000
iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8002 -j DNAT &amp;ndash;to-destination 10.100.0.212:8000
iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 8003 -j DNAT &amp;ndash;to-destination 10.100.0.213:8000&lt;/p>
&lt;h3 id="web-gui-on-splunk-master-">Web GUI on Splunk Master (&lt;a class="link" href="http://splunk.userX.apac.red:8000/" target="_blank" rel="noopener"
>http://splunk.userX.apac.red:8000/&lt;/a>)
&lt;/h3>&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Replication Factor 3
Search Factor 2
Enable Clustering - accept until restart and hit ok&lt;/p>
&lt;h3 id="on-each">on each
&lt;/h3>&lt;p>Web GUI on Splunk Peer 01 (&lt;a class="link" href="http://gw-userX.apac.red:8001/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8001/&lt;/a>)
Web GUI on Splunk Peer 02 (&lt;a class="link" href="http://gw-userX.apac.red:8002/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8002/&lt;/a>)
Web GUI on Splunk Peer 03 (&lt;a class="link" href="http://gw-userX.apac.red:8003/" target="_blank" rel="noopener"
>http://gw-userX.apac.red:8003/&lt;/a>)&lt;/p>
&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Enable Clustering
Type - Peer
host = &lt;a class="link" href="https://splunkmaster.userX.apac.red" target="_blank" rel="noopener"
>https://splunkmaster.userX.apac.red&lt;/a>
port 8089
replication port 8090&lt;/p>
&lt;h3 id="web-gui-on-splunk-search-">Web GUI on Splunk Search (&lt;a class="link" href="http://search.userX.apac.red:8000/" target="_blank" rel="noopener"
>http://search.userX.apac.red:8000/&lt;/a>)
&lt;/h3>&lt;p>Settings &amp;ndash;&amp;gt; Indexer Clustering
Enable Clustering
Type - Search
host = &lt;a class="link" href="https://splunkmaster.userX.apac.red" target="_blank" rel="noopener"
>https://splunkmaster.userX.apac.red&lt;/a>
port 8089
replication port 8090&lt;/p>
&lt;h3 id="on-splunk-master-node">on Splunk Master Node
&lt;/h3>&lt;p>cd /opt/splunk/etc/master-apps/_cluster/local directory
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/indexes.conf" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/indexes.conf&lt;/a>
runuser -l splunk -c &amp;lsquo;splunk apply cluster-bundle &amp;ndash;answer-yes&amp;rsquo;
admin
password
runuser -l splunk -c &amp;lsquo;splunk show cluster-bundle-status&amp;rsquo;&lt;/p>
&lt;h3 id="on-each-node">On each Node
&lt;/h3>&lt;p>runuser -l splunk -c &amp;lsquo;splunk search &amp;ldquo;| rest /services/data/indexes | table title, homePath, coldPath&amp;rdquo;&amp;rsquo;|grep demo
&amp;lt; look for $SPLUNKDB/glusterfs/demo/colddb&lt;/p>
&lt;h3 id="on-splunk-master-node-1">on Splunk Master Node
&lt;/h3>&lt;p>su - ec2-user&lt;/p>
&lt;p>cd ~/.ssh
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab&lt;/a>
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/rhte-splunk-lab.pub&lt;/a>
chmod 600 rhte-splunk-lab
chmod 644 rhte-splunk-lab.pub&lt;/p>
&lt;p>cd /tmp
wget &lt;a class="link" href="https://s3-ap-southeast-1.amazonaws.com/splunk-lab/eventgen.tar.gz" target="_blank" rel="noopener"
>https://s3-ap-southeast-1.amazonaws.com/splunk-lab/eventgen.tar.gz&lt;/a>
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-01.userX.apac.red:eventgen.tar.gz
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-02.userX.apac.red:eventgen.tar.gz
scp -i ~/.ssh/rhte-splunk-lab eventgen.tar.gz splunkpeer-03.userX.apac.red:eventgen.tar.gz&lt;/p>
&lt;h3 id="on-each-peer-node">On each Peer Node
&lt;/h3>&lt;p>cd /opt/splunk
mv ~ec2-user/eventgen.tar.gz /opt/splunk
chown splunk:splunk eventgen.tar.gz
runuser -l splunk -c &amp;lsquo;splunk install app /opt/splunk/eventgen.tar.gz&amp;rsquo;
runuser -l splunk -c &amp;lsquo;splunk restart&amp;rsquo;&lt;/p>
&lt;p>cd /opt/splunk/etc/apps/eventgen/samples
cp sample.tutorial1 demo_data
sed -i.bak s/main/demo/g demo_data
cd /opt/splunk/etc/apps/eventgen/local
cp ../README/eventgen.conf.tutorial1 eventgen.conf
sed -i.bak &amp;rsquo;s/main/demo/g;s/sample.tutorial1/demo_data/g&amp;rsquo; eventgen.conf&lt;/p>
&lt;p>runuser -l splunk -c &amp;lsquo;splunk restart&amp;rsquo;&lt;/p>
&lt;p>Log into WebUI on Splunk Master
search &amp;ldquo;index = demo&amp;rdquo;
timeframe = realtime &amp;gt; 5 minutes&lt;/p>
&lt;p>check /opt/splunk/var/lib/splunk/demo/db&lt;/p></description></item><item><title>开源服务器的时代真到了？</title><link>https://martinliu.cn/2014/02/08/e5bc80e6ba90e69c8de58aa1e599a8e79a84e697b6e4bba3e79c9fe588b0e4ba86efbc9f/</link><pubDate>Sat, 08 Feb 2014 03:17:37 +0000</pubDate><guid>https://martinliu.cn/2014/02/08/e5bc80e6ba90e69c8de58aa1e599a8e79a84e697b6e4bba3e79c9fe588b0e4ba86efbc9f/</guid><description>&lt;p>今天广为关注的的新闻末过 Facebook 的单人管理上万服务器。上网看了一下此新闻的出处：&lt;a class="link" href="http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/" target="_blank" rel="noopener"
>http://www.datacenterknowledge.com/archives/2013/11/20/facebook-ops-staffer-manages-20000-servers/ &lt;/a> 本文的描述如下：Delfina Eberly, Director of Data Center Operations, Facebook, presented the Tuesday morning keynote about optimizing data center operations. In terms of hardware, Facebook, because it runs such an enormous volume of servers, focuses on serviceability, including starting from the ground up by influencing server design to ensure easiest and least time consuming methods to repair equipment in the data hall.&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/eberly2.jpg"
loading="lazy"
alt="eberly2"
>&lt;/p>
&lt;p>她是 Facebook 公司的数据中心运营总监，在昨天早晨发表了关于如何优化数据中心运维的演讲。从硬件方面看，为了满足它们巨大的用量，她们不得不把精力完全放到硬件的服务提供性上，说白了“黑猫，白猫，能捉到耗子的就是好猫”，因此她们被逼去自己从服务器硬件设计开始构造自己的数据中心神殿。为什么说是被逼的，你可以想象：加入 IBM，DELL，HP 之流的 sales 推门进去，告诉她们你们买我们的服务器吧，保证好用！可能在她们也买得起，但是绝对用不起，用不起是由于：服务器的采购，供货，修复，维保，这一切都靠供应商的话，从时间和效率上将 Facebook 觉得耗不起。一旦依赖了供应商，自己就必然失去了主导权，多了一重羁绊，无法满足 facebook 这样公司的高速成长。一切创新其实都是被逼出来的。&lt;/p>
&lt;p>这让我感兴趣 Mark 最近在搞些啥，我简单转发两个我看到并感兴趣的网站。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>&lt;a class="link" href="http://Internet.org" target="_blank" rel="noopener"
>Internet.org &lt;/a> 这个网站上最抢眼的还是首页最上端的那个视频，很可惜国内用户看不到 youtub，我在这里把 Mark 的这个视频在我的网站上转贴一下。&lt;/p>
&lt;p>[video width=&amp;ldquo;640&amp;rdquo; height=&amp;ldquo;360&amp;rdquo; mp4=&amp;ldquo;http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/Making-the-Internet-Affordable.mp4&amp;rdquo;][/video]&lt;/p>
&lt;p>这个视频主要是 Mark 亲自现身说法说如何让上网成本更低，争取能做到让全世界更多的人民上网的宏大理想。听完之后，这不能不让我和今天的另外的一个新闻“facebook 收购 &lt;a class="link" href="http://www.onavo.com/" target="_blank" rel="noopener"
>Onavo&lt;/a>”联系起来，表面上看 Onavo 是他实现这个理想的一种工具；另外一个邪恶的说法，则说：”他想控制这个世界所有人上网的流量“；我们拭目以待，他们是如何改造地球的吧！&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/open-computer-logo.png"
loading="lazy"
alt="open-computer-logo"
>&lt;/p>
&lt;p>另外一个网站是这个，开源计算机项目网站。我一直对开源的项目尤为感兴趣，甚至于开源的“窗台农庄项目”。但是主要还是开源软件了解的多。这个网站是 Facebook 主导的一个项目，目的在于开放他们部分服务器硬件和数据中心设计的技术。确实是一个很不错的学习资料。在这里我又看到了类似于 QQ 和中国移动竞争的类似场景。如果这个项目火了，这让那些买服务器的公司情何以堪啊！但是我因此加深了 IBM 卖掉 PC 业务给联想的这个事实。国人一直在接受人家过期的技术和业务，这样值得么？从业务的角度上讲，短期是还是值得的，原因是：国内 IT 的发展总是滞后于欧美 3 到 5 年时间。我感觉滞后的原因主要还是语言和文化的不通。&lt;/p>
&lt;p>如果对 Facebook 的数据中心感兴趣的话还可以看看这个 FAQ, &lt;a class="link" href="http://www.datacenterknowledge.com/the-facebook-data-center-faq/" target="_blank" rel="noopener"
>http://www.datacenterknowledge.com/the-facebook-data-center-faq/&lt;/a>&lt;/p>
&lt;p>&lt;img src="http://7bv9gn.com1.z0.glb.clouddn.com/wp-content/uploads/2014/02/facebook-faq-470-new.jpg"
loading="lazy"
alt="facebook-faq-470-new"
>&lt;/p></description></item><item><title>让Ubuntu飞一会儿</title><link>https://martinliu.cn/2011/04/10/let-ubuntu-fly/</link><pubDate>Sun, 10 Apr 2011 11:11:27 +0000</pubDate><guid>https://martinliu.cn/2011/04/10/let-ubuntu-fly/</guid><description>&lt;p>很久以前我一直使用的 rpm based Linux，原因很简单，我只要手握一张最新的 DVD，就可以走遍天下都不怕，特别是对 SuSE Linux 的 yast 很依赖，因为它可以帮我解决 rpm 包之间的依赖性。这样工作起来就很简单，基本上是搜索到软件包之后，点击安装既可以搞定所有的软件安装工作。&lt;/p>
&lt;p>来到 Ubuntu 世界的我并不很满意，最近一次的 apt-get update，以失败告终，险些把家里的 PC 的一块硬盘给搞丢了，因为升级失败导致分区表失效了，Win 操作系统不认了。直接崩溃，好在那 Live Cd 模式进入还能勉强看得那个盘里的东西，恢复到移动硬盘，重新格式化该分区，才把文件恢复了。着实让我虚惊一场。&lt;/p>
&lt;p>&lt;img src="http://img3.cache.netease.com/www/logo/logo_png.png"
loading="lazy"
>我比较喜欢一些小的 LAMP 堆栈式安装的 Linux，如 TurnkeyLinux。安装可以在 10 分钟内搞定系统安装。今年家里的宽度升级到 2MB 了，因此带宽上逐渐能满足 Ubuntu 这种从网上升级的需求。下面就是找国内的升级的源了，进过几个月的使用，最近觉得在北京的联通固定宽带的用户，使用 163 的镜像站点速度还是不错的。再次感谢国内的这样的无私奉献的公司，使得在国内的开源用户可以更快更方便。废话说了一堆：）哈哈下面也就是这几条命了的事情。&lt;/p>
&lt;p>第一步，当然要选择近水楼台的 163 了，来参考http://mirrors.163.com/.help/ubuntu.html 的帮助文档，根据你操作系统的版本，更新/etc/apt/sources.list 文件即可，之后你的 Ubuntu 就是从国内的较快的站点上下载包了&lt;/p>
&lt;p>第二步，安装多线程 apt 下载加速工具 apt-fast&lt;/p>
&lt;p>[bash]
root@lamp ~# apt-get install python-software-properties
root@lamp ~# add-apt-repository ppa:tldm217/tahutek.net
root@lamp ~# apt-get update
root@lamp ~# apt-get install apt-fast
root@lamp ~# apt-fast -v
apt 0.7.25.3ubuntu9.3 for i386 compiled on Sep  9 2010 22:22:02
Supported modules:
*Ver: Standard .deb
*Pkg:  Debian dpkg interface (Priority 30)
S.L: &amp;lsquo;deb&amp;rsquo; Standard Debian binary tree
S.L: &amp;lsquo;deb-src&amp;rsquo; Standard Debian source tree
Idx: Debian Source Index
Idx: Debian Package Index
Idx: Debian Translation Index
Idx: Debian dpkg status file
[/bash]&lt;/p>
&lt;p>以后你在安装软件包就是用 apt-fast install 了，而不是 apt-get install，至于 apt-get 么，不管你用还是不用，它就在哪里~~~~
最后一步（可选），如果你还经常要以 cpan 的方式安装 perl 的包的话，那么 163 上不管你用还是不用，他就在哪里，你也可以选择 163 最为 perl 的安装源。安装步骤如下：&lt;/p>
&lt;p>[bash]
root@lamp perl/CPAN# pwd
/etc/perl/CPAN
root@lamp perl/CPAN# cp Config.pm Config.pm.bk
root@lamp perl/CPAN# ls
Config.pm  Config.pm.bk  Config.pm~
root@lamp perl/CPAN# vi Config.pm
[/bash]&lt;/p>
&lt;p>修改 Config.pm 文件中的 urllist 值，修改成如下即可：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">&amp;#39;urllist&amp;#39; =&amp;gt; [q[http://mirrors.163.com/cpan/]],
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>接下来就可以测试一下了：
[bash]
root@lamp perl/CPAN# cpan -i XML::Entities
[/bash]&lt;/p>
&lt;p>如果你有其他让 Ubuntu 加速的方法，请留言：）&lt;/p></description></item><item><title>OpenNMS 1.6.1 to 1.6.10</title><link>https://martinliu.cn/2010/03/28/opennms-161-1610/</link><pubDate>Sun, 28 Mar 2010 05:37:04 +0000</pubDate><guid>https://martinliu.cn/2010/03/28/opennms-161-1610/</guid><description>&lt;p>[singlepic id=35 w=320 h=240 float=left]在最近的一年里，我基本上忙于 CMDB 的工作，没有什么业余时间来看看 OpenNMS 的情况。其实 OpenNMS 是最初引入我深入了解开源软件世界的东东。时隔 1 年之久，我上一篇关于 opennms 的文章是它是 1.6.1 版本，刚才查了一下，它最新的稳定版本是 1.6.10.&lt;/p>
&lt;p>看似它这一年里发展的比较慢，这让我感到些许地失望，大概地看一下一堆相关的 release notes。功能性的变化如下：&lt;/p>
&lt;ul>
&lt;li>新增和增强了一些 monitor 的和功能，主要有 http，dns，ldap，ssh，jmx 等，从最初的 snmp 采集，都这些采集功能；采集能力的增强是它这样的无代理监控程序永远的话题&lt;/li>
&lt;li>UI 的功能的增强了一些&lt;/li>
&lt;li>SNMP 采集仍然是他的主要能力，在这方面也有了一些改进&lt;/li>
&lt;li>新增了一些网络设备品牌的支持&lt;/li>
&lt;li>阀值配置也有改进&lt;/li>
&lt;/ul>
&lt;p>总的来说，作为一款能够采集各种 snmp mib 信息，能够出好看的性能报表，能够作为统一的告警事件平台，能够有简单易用的 UI，OpenNMS 做的显然是非常不错的。至今还行它还没有提出什么云计算相关的话题，可见他们还是一般比较稳健发展，不爱赶时髦的人。希望他们能做的更好。&lt;/p>
&lt;p>对于我的这个 blog 来说，之前写的 OpenNMS 和网管相关的东西比较多，以后可能会越来越少，就此和 OpenNMS 做一个总结。以后本 blog 可能会和目前做的 cmdb 和 itsm 相关这些内容为主了。&lt;/p></description></item><item><title>[網播] Born to MISrepresent 第二集：當 OpenNMS 遇上 SFLC ，催生了 Moglen Ravicher LLC</title><link>https://martinliu.cn/2009/02/04/e7b6b2e692ad-born-to-misrepresent-e7acace4ba8ce99b86efbc9ae795b6-opennms-e98187e4b88a-sflc-efbc8ce582ace7949fe4ba86-moglen-ravicher-llc/</link><pubDate>Wed, 04 Feb 2009 04:52:02 +0000</pubDate><guid>https://martinliu.cn/2009/02/04/e7b6b2e692ad-born-to-misrepresent-e7acace4ba8ce99b86efbc9ae795b6-opennms-e98187e4b88a-sflc-efbc8ce582ace7949fe4ba86-moglen-ravicher-llc/</guid><description>&lt;p>（原文於 2008-04-08 發表於 &lt;a class="link" href="http://blog.roodo.com/ystuan/archives/5830995.html" target="_blank" rel="noopener"
>http://blog.roodo.com/ystuan/archives/5830995.html&lt;/a>）&lt;/p>
&lt;p>這個音檔的授權是&lt;a class="link" href="http://creativecommons.org/licenses/by-nc-sa/2.5/tw/" target="_blank" rel="noopener"
>姓名標示-非商業性-相同方式分享 2.5 台灣&lt;/a>，跟我的網誌一樣。&lt;/p>
&lt;p>下載 ogg 格式：&lt;a class="link" href="http://www.archive.org/download/BornToMisrepresentEp2/Born_to_MISrepresent_EP2.ogg" target="_blank" rel="noopener"
>Born_to_MISrepresent_EP2.ogg&lt;/a>
下載 mp3 格式：&lt;a class="link" href="http://www.archive.org/download/BornToMisrepresentEp2/Born_to_MISrepresent_EP2.mp3" target="_blank" rel="noopener"
>Born_to_MISrepresent_EP2.mp3&lt;/a>
前往存放在 Archive.org 上的頁面：&lt;a class="link" href="http://www.archive.org/details/BornToMisrepresentEp2" target="_blank" rel="noopener"
>Born to MISrepresent EP2&lt;/a>，有更多資訊以及格式。&lt;/p>
&lt;p>內容摘要：&lt;/p>
&lt;p>OpenNMS 1.3.11 版發佈，並宣佈與 Hyperic 就雙方的產品進行合作。這項合作的推手是一個雙方的共同客戶。Hyperic 的 agent 預料將可和擁有強大平台但是拙於 agent (agent-less)的 OpenNMS 形成良好互補。（自 1.3.10 版就開始跟 Hyperic Agent 進行整合，最近 OpenNMS 版本號已跳升至 1.5.90 ） Tarus 的 blog 有更多細節：&lt;a class="link" href="http://blogs.opennms.org/?p=175" target="_blank" rel="noopener"
>The Year of Integration&lt;/a>&lt;/p>
&lt;p>Hyperic 跟 OpenNMS 的初步整合，可線上收看 &lt;a class="link" href="http://download.hyperic.com/swf/HyperCAST10/playback.html" target="_blank" rel="noopener"
>Integrating Hyperic HQ and OpenNMS&lt;/a>（瀏覽器需支援 flash 格式播放）&lt;/p>
&lt;p>當 OpenNMS 遇上 SFLC ：前一陣子 Tarus 跑去 &lt;a class="link" href="http://ask.slashdot.org/article.pl?sid=08/03/04/0023245" target="_blank" rel="noopener"
>Ask Slashdot&lt;/a> ，嚷嚷說 &lt;a class="link" href="http://www.cittio.com/" target="_blank" rel="noopener"
>Cittio Watchtower&lt;/a> 使用 OpenNMS 的程式碼當然可以，但是使用的方式違反了（程式碼採用的）GPL 授權。&lt;/p>
&lt;p>想也知道，跑去 Slashdot 一定會引來關注，他也尋求軟體自由法律中心（Software Freedom Law Center，SFLC）的協助。但是，SFLC 服務對象僅限於非營利機構，結果呢，SFLC 決定以成立一間新的律師事務所(&lt;a class="link" href="http://www.moglenravicher.com/" target="_blank" rel="noopener"
>Moglen Ravicher LLC&lt;/a>)的方式，來服務支持自由軟體的營利機構， OpenNMS Group 因此成了 Moglen Ravicher LLC 的第一個客戶。&lt;/p>
&lt;p>喔，不用猜， SFLC 的&lt;a class="link" href="http://www.softwarefreedom.org/news/2008/mar/26/moglen-ravicher/" target="_blank" rel="noopener"
>新聞稿&lt;/a>直接告訴大家，兩塊招牌底下都是同一群律師，事務所的所有利潤會回饋給 SFLC 。（嗯，其實我們也可以說 OpenNMS 有兩種，一種是 opennms.org - 社群，一種則是 opennms.com - 主要參與者所開的公司 OpenNMS Group。）&lt;/p>
&lt;p>筆者已經在 FLOSS Weekly 聽過 &lt;a class="link" href="http://twit.tv/floss13" target="_blank" rel="noopener"
>Eben Moglen 談 GPL 3.0&lt;/a> ，這次為多瞭解另一位大咖 Dan Ravicher （其實只是想搞清楚他的姓怎麼唸&amp;hellip;&amp;hellip;），找到了 Dan 談 &lt;a class="link" href="http://www.ip.qut.edu.au/2006-08-innovation-ravicher" target="_blank" rel="noopener"
>GPL 3, Patents and Other Current Issues&lt;/a> ，都很棒，推薦給大家，尤其是後者，其實 Dan 還回顧了 GPL 的誕生，解釋了 RHEL 的 subscription model 為何不違反 GPL 但又可以約束客戶（超意外收穫！解答了筆者幾百年前的疑惑）&lt;/p>
&lt;p>照例 Tarus 也在他的 blog 提到整件事：&lt;a class="link" href="http://blogs.opennms.org/?p=181" target="_blank" rel="noopener"
>OpenNMS, Eben Moglen and Cittio&lt;/a>&lt;/p></description></item><item><title>opennms 1.6.1-1 quick start guide</title><link>https://martinliu.cn/2009/01/11/161-1-opennms-quick-install-guide/</link><pubDate>Sun, 11 Jan 2009 02:33:12 +0000</pubDate><guid>https://martinliu.cn/2009/01/11/161-1-opennms-quick-install-guide/</guid><description>&lt;p>&lt;img src="http://www.etproductions.com/images/start.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->本安装手册为纯命令版，如果有什么疑问清参考官方安装手册，或给本贴留言。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[install yum on your Linux box]&lt;!-- raw HTML omitted -->选择任意 Linux 系统，安装上 yum 工具，在命令行测试 yum -v&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[testing internet connection with those two URL]&lt;!-- raw HTML omitted -->测试是否能上网，用浏览器分别打开这两个网址&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;ol>
&lt;li>&lt;a class="link" href="http://www.martinliu.cn/2007/12/13/opennms-yum-install/" target="_blank" rel="noopener"
>http://www.martinliu.cn/2007/12/13/opennms-yum-install/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>&lt;a class="link" href="http://http://yum.opennms.org/repofiles/" target="_blank" rel="noopener"
>http://yum.opennms.org/repofiles/&lt;/a>
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->先别关闭这两个网页。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[Install opennms 开始安装:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum install yum-fastestmirror
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>rpm -Uvh &lt;a class="link" href="http://yum.opennms.org/repofiles/opennms-repo-snapshot-rhel4.noarch.rpm" target="_blank" rel="noopener"
>http://yum.opennms.org/repofiles/opennms-repo-snapshot-rhel4.noarch.rpm&lt;/a>
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum list opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>yum install opennms
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[ post-install and config] 开始配置：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>export OPENNMS_HOME=/opt/opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>vi /var/lib/pgsql/data/pg_hba.conf&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
1. 注释掉其中所有可用的行，加入下面三行&lt;!-- raw HTML omitted -->local all all trust&lt;!-- raw HTML omitted -->host all all 127.0.0.1/32 trust&lt;!-- raw HTML omitted -->host all all ::1/128 trust
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/sbin/service postgresql restart
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/usr/java/jdk1.5.0_15/bin/java -version
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/runjava -S /usr/java/jdk1.5.0_15/bin/java
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>$OPENNMS_HOME/bin/install -disU -l /usr/lib/jni:/usr/lib
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->[ startup opennms and login ]启动登录：&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>/etc/init.d/opennms start
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>http://localhost:8980/opennms
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>username and password are admin/admin
&lt;!-- raw HTML omitted -->&lt;/li>
&lt;li>click Admin / Add Interface, input a ipaddress and press Add button
&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OK， I have get oepnnms 1.6.1-1 installed on my home pc, I hope you good luck and have fun.&lt;/li>
&lt;/ol></description></item><item><title>[发布说明] OpenNMS 1.6.0 (Stable) Released</title><link>https://martinliu.cn/2008/11/14/e58f91e5b883e8afb4e6988e-opennms-160-stable-released/</link><pubDate>Fri, 14 Nov 2008 14:57:36 +0000</pubDate><guid>https://martinliu.cn/2008/11/14/e58f91e5b883e8afb4e6988e-opennms-160-stable-released/</guid><description>&lt;p>&lt;img src="http://www.opennms.org/images/b/b5/Banner.jpg"
loading="lazy"
>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://sourceforge.net/forum/forum.php?forum_id=882433" target="_blank" rel="noopener"
>OpenNMS 1.6.0 (Stable) Released&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->似乎每年的 10 月以后我就会进入一个超级繁忙的状态，很长时间没有更新 blog 了，今天姑且转载一个 OpenNMS 的发布说明吧。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS, the world&amp;rsquo;s first enterprise-grade network management platform developed as 100% free and open software, has released version 1.6.0. This is a stable, production release that incorporates nearly three years of development.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上算是 OpenNMS 的广告语大家看看就是，需要注意的是一个企业级的产品实施费用是从很低的门槛一直到企业级的花费的。和其他的企业级解决方案的实施没有区别，差异在于，一个不同的许可证类型，此为开源许可证是也。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->The last production version, 1.2.0, was aimed to compete squarely with Hewlett-Packard&amp;rsquo;s OpenView Network Node Manager product. This release builds upon that work to expand the reach of OpenNMS to other parts of the OpenView family as well as to provide an open source alternative to products such as Tivoli&amp;rsquo;s Netcool.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->以上是 OpenNMS 的精神所在：OpenNMS 一直在叫嚣这和 OpenView, NetCool 较量；这足以说明了它的勇气，和发展方向，它的创始人 Tarus 从一个人单枪匹马开始，到现在有一般人 inhouse 开发这个产品，自己全世界出差，如果说没有实现和商业产品的抗衡的话，我个人觉得他起码实现了一个所有开源参与者的梦想“为需要自己的人工作，为自己工作”&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS 1.6.0 sports a redesigned user interface, a number of scalability improvements and increased integration with other products. OpenNMS now runs on Windows, in addition to most flavors of Linux, Solaris and Mac OS X.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面说的是新版的用户界面重新设计了，目前我还没有时间安装，回头装好了一定上图片，新版的稳定性得到提高并增加了和其他产品的集成。现在 OpenNMS 也能在 Windows 上运行了，在我看这是早晚的是，它是个纯 Java 的应用，移植不是什么难事，不过我不推荐在 windows 上完开源的产品，有点不伦不类的感觉，而且从原生态的 Linux 环境中才哪呢个够获取开源的全部优势。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->One of the major additions to the platform is the Alarms subsystem. OpenNMS can receive events from a number of sources, such as SNMP traps, syslog, TL/1, and custom scripts. A key can be configured for each event that will allow it to be turned into an alarm. Thus if a device is generating multiple, identical events, their number will be reduced into just a single alarm. This greatly reduces the amount of event &amp;ldquo;noise&amp;rdquo; that operators see.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->上面说告警子系统现在是增强了。OpenNMS 能收到像是 snmp trap，syslog， TL/1 和自定义脚本发来的告警事件。某种键值能被设置，让一个事件能被出发成一个警报。报警事件经过了压制和降噪处理，较少了重复报的数量。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->In addition, automated actions can be performed on alarms. For example, events that signal problem resolution, or &amp;ldquo;up&amp;rdquo; alarms, can be matched with &amp;ldquo;down&amp;rdquo; alarms to automatically clear them. Event workflow can be built into the system by using these automations to manage the alarm list, thus freeing up the operators to focus on the most important issues.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->另外，对于一个警报来说，可以和一个自动化的动作配合，例如某些 up 事件能去清除对应的 down 事件。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->While OpenNMS contains a robust automated discovery system, when managing tens of thousands of nodes it is often preferred to allow an external system to determine what OpenNMS is to monitor. Thus OpenNMS 1.6.0 contains a new &amp;ldquo;model importer&amp;rdquo; feature that allows node, interface and service information to be imported directly into the system using data in an XML format. One company uses this method to manage over 70,000 devices with a single instance of OpenNMS.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->同时 OpenNMS 现在的自动发现系统非常强大哦，档管理一万个节点的时候，OpenNMS 往往倾向于使用一个外部的系统来决定什么是需要 OpenNMS 监控的。在 1.6 中包括这样一个新功能‘模型导入’，他能把 xml 格式的节点和端口数据自己导入到 OpenNMS 系统中。曾经一个公司用这个方法管理这 7 万个节点，都在一套 OpenNMS 系统内，好家伙~~也就是说这个功能有了之后，你就可以不用一个节点的去发现了，往往有些机器发现的那会正好不在线，那就漏掉很多的机器了。&lt;!-- raw HTML omitted -->Data collection saw many improvements as well. With the proper hardware, OpenNMS is able to collect over one million data points every five minutes. This data can be from SNMP (versions 1, 2c and 3), JMX, HTTP, or NSClient. The collected data can be exported via the web user interface. Reports showing the highest and lowest values for a particular set of data points (Top N Reports) can also be created, and 1.6.0 contains a vastly improved thresholding system. Thresholds can be generated on individual data points, combinations of data points, as well as a &amp;ldquo;relative change&amp;rdquo; such as when a value shows a sudden increase or decrease.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->数据的采集方面也有很多增强。利用一个合适的硬件，OpenNMS 能够每 5 分钟把超过一百万的数据采集点采集一遍，要是采集稳定的话，这还是比较快的了。被采集的数据点可以使来自 snmp v1,2,3, JMX, http, nsclient。 采集来的数据能通过 web 界面到处了。这还是不错的功能，能有可能做一些系统之外的自定义报表了。自带的报表功能能够定制 TopN 的报表。OpenNMS 现在的阀值管理系统也得到了增强。能为某一个数据点设置，也能为一组数据采集点，同时有了对 &amp;ldquo;relative change&amp;quot;的管理，也就是某个数据忽高忽低的管理，也即是某些瞬间的异常增的很高或降的很低。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS was originally designed for network service monitoring, and that functionality has been increased as well. New monitors for such things as Windows services are now available, as well as more advanced synthetic transactions. The Page Sequence Monitor was created to monitor a complete web-based transaction, while the Mail Transport Monitor determines the full round-trip availability of a mail service.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->OpenNMS 天生是监控网络的。新增了很多 monitor，例如 windows 服务监控，模拟交易监控。页面序列监控器用了监控一些列的 web 交易处理行为，还能通过 Mail Transport Monitor 来确定邮件服务的可用性。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Probably the biggest change was the development of distributed monitoring. Using a small Java webstart application installed on a remote system, OpenNMS is able to monitor service availability from the point of view of the remote system. Combined with the Page Sequence Monitor one can measure the user&amp;rsquo;s experience when visiting a website from various remote locations.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->最大的变更在这个版本中是‘分布式监控’，使用一个小的安装在远处的一个主机上的 Java Webstat 应用，opennms 能过过这个监控服务点看到远程的系统上采集的数据。结合页面序列监控功能，它可以实现这样的功能：在南北方，网通电信的网络中找四个点安装这个程序后，模拟从不同网络位置监控某个 web 网站上一系列功能页面的可用性。这就是所谓的模拟交易管理，是 Web 应用管理方面中当下不可缺少的环节。&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->As OpenNMS was designed as a platform, there are numerous ways for external applications, both open and proprietary, to integrate with it. There is a new Trouble Ticketing API that allows for two-way communication between OpenNMS and a number of external ticketing systems such as Jira, Concursive (CentricCRM) and OTRS.&lt;!-- raw HTML omitted -->像 opennms 这样的平台，可以提供给开源或者商业外部系统的接口。通过这些 api 的双向接口，你可以把报警事件送到外部的工单管理系统(事件管理流程平台)中，例如 Jira, Concursive (CentricCRM) and OTRS.、&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->These are just a few of the new features available in 1.6.0. As always, OpenNMS is 100% free and open software. Please check it out and let us know what you think. We hope you enjoy using it as much as we enjoy creating it.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->嗯，终于读完了整篇的发布说明，你能相信，它都发布了这么久了，我只有在周五晚上抽空仔细读完么。这周简直是太忙，天天加班，还有天天处理不完的状况。今天的一个教训就是“软件系统之间的集成不是简单能搞定的，需要小心，小心在小心”&lt;/p></description></item></channel></rss>