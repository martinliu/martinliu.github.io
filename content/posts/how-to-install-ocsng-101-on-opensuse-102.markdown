---
author: liuadmin
categories:
- Asset Mgmt
comments: true
date: 2007-06-15T08:06:00Z
slug: how-to-install-ocsng-101-on-opensuse-102
tags:
- OCSNG
- opensuse
title: How to install OCSNG 1.0.1 on OpenSuse 10.2
url: /2007/06/15/how-to-install-ocsng-101-on-opensuse-102/
wordpress_id: 49165
---

下面我将描述如何安装OCSNG服务器和客户端.服务器的安装在openSuse Linux中,文中将提到Linux和Windows代理的安装方法.最终能在界面中看到两个节点的清单信息,不过只有Linux的哪个会每天更新.<br /><br />This article is talking about how to install OCSNG 1.0.1 on a openSuSE 10.2 system.<br />

<br />	
  * Requirements:
<br /><br />You have to meet the following requirements.<br /> Apache version 1.3.33 or higher / Apache version 2.0.46 or higher.<br /> Mod_perl version 1.29 or higher.<br /> Mod_php version 4.3.2 or higher.<br /> PHP 4.3.2 or higher, with ZIP and GD support enabled.<br /> PERL 5.6 or higher.<br /> Perl module XML::Simple version 2.12 or higher.<br /> Perl module Compress::Zlib version 1.33 or higher.<br /> Perl module DBI version 1.40 or higher.<br /> Perl module DBD::Mysql version 2.9004 or higher.<br /> Perl module Apache::DBI version 0.93 or higher.<br /> Perl module Net::IP version 1.21 or higher.<br /> Perl module SOAP::Lite version 0.66 or higher (not mandatory)<br /> MySQL version 4.1.0 or higher with InnoDB engine active.<br /> Make utility like GNU make.<br /><br />If you can use yast for managing package, I believe you could install all of them within 20 minutes. I won't say more about this.<br /><br />	
  * Installing Management/communication Server and Web Console
<br /><br />You must have root privileges to setup management server. Login OS as root, then do the following:<br />1)Download install package from http://nchc.dl.sourceforge.net/sourceforge/ocsinventory/OCSNG_LINUX_SERVER_1.01.tar.gz<br /><br />2)unpack it<br />Suse:/mnt/hgfs/win/OCSNG # cp OCSNG_LINUX_SERVER_1.01.tar.gz /root<br />Suse:/mnt/hgfs/win/OCSNG # cd<br />Suse:~ # tar zxf OCSNG_LINUX_SERVER_1.01.tar.gz<br />Suse:~ # cd OCSNG_LINUX_SERVER_1.01/<br />Suse:~/OCSNG_LINUX_SERVER_1.01 #<br /><br />3)run installer<br />Suse:~/OCSNG_LINUX_SERVER_1.01 # sh setup.sh<br /><br />+----------------------------------------------------------+<br />|                                                          |<br />| Welcome to OCS Inventory NG Management server setup !    |<br />|                                                          |<br />+----------------------------------------------------------+<br /><br />CAUTION: If upgrading Communication server from OCS Inventory NG 1.0 RC2 and<br />previous, please remove any Apache configuration for Communication Server!<br /><br />Do you wish to continue ([y]/n)?y<br />Assuming Communication server 1.0 RC2 or previous is not installed<br />on this computer.<br /><br />Starting OCS Inventory NG Management server setup from folder /root/OCSNG_LINUX_SERVER_1.01<br />Storing log in file /root/OCSNG_LINUX_SERVER_1.01/ocs_server_setup.log<br /><br />+----------------------------------------------------------+<br />| Checking for database server properties...               |<br />+----------------------------------------------------------+<br /><br />Your MySQL client seems to be part of MySQL version 5.0.<br />Your computer seems to be running MySQL 4.1 or higher, good ;-)<br /><br />Which host is running database server [localhost] ?<br />OK, database server is running on host localhost ;-)<br /><br />On which port is running database server [3306] ?<br />OK, database server is running on port 3306 ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache web server daemon...                 |<br />+----------------------------------------------------------+<br /><br />which: no httpd in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)<br />which: no apache in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)<br />which: no apache2 in (/sbin:/usr/sbin:/usr/local/sbin:/opt/gnome/sbin:/root/bin:/usr/local/bin:/usr/bin:/usr/X11R6/bin:/bin:/usr/games:/opt/gnome/bin:/opt/kde3/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/opennms/bin)<br />Where is Apache daemon binary [] ?/usr/sbin/httpd2<br />OK, using Apache daemon /usr/sbin/httpd2 ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache main configuration file...           |<br />+----------------------------------------------------------+<br /><br />Where is Apache main configuration file [/srv/www//etc/apache2/httpd.conf] ?/etc/apache2/httpd.conf<br />OK, using Apache main configuration file /etc/apache2/httpd.conf ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache user account...                      |<br />+----------------------------------------------------------+<br /><br />Which user account is running Apache web server [] ?wwwrun<br />OK, Apache is running under user account wwwrun ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache group...                             |<br />+----------------------------------------------------------+<br /><br />Which user group is running Apache web server [wwwrun] ?www<br />OK, Apache is running under users group www ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for PERL Interpreter...                         |<br />+----------------------------------------------------------+<br /><br />Found PERL Intrepreter at  ;-)<br />Where is PERL Intrepreter binary [/usr/bin/perl] ?/usr/bin/perl<br />OK, using PERL Intrepreter /usr/bin/perl ;-)<br /><br />Do you wish to setup Communication server on this computer ([y]/n)?y<br /><br />+----------------------------------------------------------+<br />| Checking for Make utility...                             |<br />+----------------------------------------------------------+<br /><br />OK, Make utility found at  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache Include configuration directory...   |<br />+----------------------------------------------------------+<br /><br />Setup has found Apache Include configuration directory in<br />.<br />If you are not using Include directive, please enter 'no'.<br />Where is Apache Include configuration directory [] ?/etc/apache2/conf.d<br />OK, Apache Include configuration directory /etc/apache2/conf.d found ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Apache mod_perl version...                  |<br />+----------------------------------------------------------+<br /><br />Checking for Apache mod_perl version 1.99_22 or higher<br />Found that mod_perl version 1.99_22 or higher is available.<br />OK, Apache is using mod_perl version 1.99_22 or higher ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Communication server log directory...       |<br />+----------------------------------------------------------+<br /><br />Communication server can create detailled logs. This logs can be enabled<br />by setting interger value of LOGLEVEL to 1 in Administration console<br />menu Configuration.<br />Where to put Communication server log directory [/var/log/ocsinventory-NG] ?<br />OK, Communication server will put logs into directory /var/log/ocsinventory-NG ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for required Perl Modules...                    |<br />+----------------------------------------------------------+<br /><br />Checking for DBI PERL module...<br />Found that PERL module DBI is available.<br />Checking for Apache::DBI PERL module...<br />Found that PERL module Apache::DBI is available.<br />Checking for DBD::mysql PERL module...<br />Found that PERL module DBD::mysql is available.<br />Checking for Compress::Zlib PERL module...<br />Found that PERL module Compress::Zlib is available.<br />Checking for XML::Simple PERL module...<br />Found that PERL module XML::Simple is available.<br />Checking for Net::IP PERL module...<br />Found that PERL module Net::IP is available.<br />Checking for SOAP::Lite PERL module...<br />Found that PERL module SOAP::Lite is available.<br /><br />+----------------------------------------------------------+<br />| OK, looks good ;-)                                       |<br />|                                                          |<br />| Configuring Communication server Perl modules...         |<br />+----------------------------------------------------------+<br /><br />WARNING: INSTALLSITESCRIPT is not a known parameter.<br />Checking if your kit is complete...<br />Looks good<br />'INSTALLSITESCRIPT' is not a known MakeMaker parameter name.<br />Writing Makefile for Apache::Ocsinventory<br /><br />+----------------------------------------------------------+<br />| OK, looks good ;-)                                       |<br />|                                                          |<br />| Preparing Communication server Perl modules...           |<br />+----------------------------------------------------------+<br /><br />+----------------------------------------------------------+<br />| OK, prepare finshed ;-)                                  |<br />|                                                          |<br />| Installing Communication server Perl modules...          |<br />+----------------------------------------------------------+<br /><br />+----------------------------------------------------------+<br />| OK, Communication server Perl modules install finished;-)|<br />|                                                          |<br />| Creating Communication server log directory...           |<br />+----------------------------------------------------------+<br /><br />Creating Communication server log directory /var/log/ocsinventory-NG.<br /><br />Fixing Communication server log directory files permissions.<br />Configuring logrotate for Communication server.<br />Writing communication server logrotate to file /etc/logrotate.d/ocsinventory-NG<br /><br />+----------------------------------------------------------+<br />| OK, Communication server log directory created ;-)       |<br />|                                                          |<br />| Now configuring Apache web server...                     |<br />+----------------------------------------------------------+<br /><br />Writing communication server configuration to file /etc/apache2/conf.d/ocsinvent<br /><br />+----------------------------------------------------------+<br />| OK, Communication server setup sucessfully finished ;-)  |<br />|                                                          |<br />| Please, review /etc/apache2/conf.d/ocsinventory.conf<br />| to ensure all is good. Then restart Apache daemon.       |<br />+----------------------------------------------------------+<br /><br />Do you wish to setup Administration server (web administration console)<br />on this computer ([y]/n)?y<br /><br />+----------------------------------------------------------+<br />| Checking for Apache root document directory...           |<br />+----------------------------------------------------------+<br /><br />Where is Apache root document directory [] ?/srv/www/htdocs<br />OK, Apache root document directory is /srv/www/htdocs ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for required Perl Modules...                    |<br />+----------------------------------------------------------+<br /><br />Checking for DBI PERL module...<br />Found that PERL module DBI is available.<br />Checking for DBD::mysql PERL module...<br />Found that PERL module DBD::mysql is available.<br />Checking for XML::Simple PERL module...<br />Found that PERL module XML::Simple is available.<br />Checking for Net::IP PERL module...<br />Found that PERL module Net::IP is available.<br /><br />+----------------------------------------------------------+<br />| Installing files for Administration server...            |<br />+----------------------------------------------------------+<br /><br />Creating directory /srv/www/htdocs/download.<br /><br />Creating directory /srv/www/htdocs/ocsreports.<br /><br />Copying files to /srv/www/htdocs/ocsreports.<br /><br />Fixing directories and files permissions.<br /><br />Configuring IPDISCOVER-UTIL Perl script.<br /><br />Installing IPDISCOVER-UTIL Perl script.<br /><br />Fixing permissions on IPDISCOVER-UTIL Perl script.<br /><br />+----------------------------------------------------------+<br />| OK, Administration server installation finished ;-)      |<br />|                                                          |<br />| Point your browser to http://server/ocsreports to        |<br />| configure database server and create/update schema.      |<br />+----------------------------------------------------------+<br /><br />Setup has created a log file /root/OCSNG_LINUX_SERVER_1.01/ocs_server_setup.log. Please, save this file.<br />If you encounter error while running OCS Inventory NG Management server,<br />we can ask you to show us his content !<br /><br />DON'T FORGET TO RESTART APACHE DAEMON !<br /><br />Enjoy OCS Inventory NG ;-)<br /><br />Suse:~/OCSNG_LINUX_SERVER_1.01 #<br />Suse:~/OCSNG_LINUX_SERVER_1.01 # /etc/init.d/apache2 restart<br />Syntax OK<br />Shutting down httpd2 (waiting for all children to terminate)          done<br />Starting httpd2 (prefork)                                             done<br />Suse:~/OCSNG_LINUX_SERVER_1.01 #<br /><br />As we can see the installation is successful. If you are running a different Linux, you should input other settings.<br />

<br />	
  * Configuring Management Server
<br /><br />The following is a post-install setup for management server. Y will go through it from a web browser. Open FireFox it is my current favorite browser and point it on URL http://Ip_address/ocsreports<br /><br />The first warning  message should be this.<br /><br />**WARNING: You will not be able to build any auto deployment package with size  greater than 2M.<br />You must raise both post_max_size and upload_max_filesize in your php.ini to correct this.**<br />Do the following to fix it:<br /># vi php.ini<br />The default post_max_size is 8M, we are going to increase upload_max_filesize to 12M<br />; Maximum allowed size for uploaded files.<br />upload_max_filesize = 12MWe should restart apache to take it effect<br />Run this command:<br /> /etc/init.d/apache2 restart<br /><br />Press F5 to refresh the first web page, this warning is still there. Let's just go ahead to input the mysql ><br /><table width="100%" ><br /><tr ><br />
<td width="50%" align="right" >MySql login :    
</td><br />
<td width="50%" align="left" >
</td><br /></tr><br /><tr ><br />
<td width="50%" align="right" >MySql password :    
</td><br />
<td width="50%" align="left" >
</td><br /></tr><br /><tr ><br />
<td width="50%" align="right" >MySql HostName :    
</td><br />
<td width="50%" align="left" >
</td><br /></tr><br /><tr ><br />
<td >
</td><br /></tr><br /><tr ><br />
<td colspan="2" align="center" >
</td><br /></tr><br /></table><br />root<br />xxxx<br />localhost<br /><br />Click Send button.<br /><br />There is a text box as the following:<br />**<br />Please enter the label of the windows client tag input box:<br />(Leave empty if you don't want a popup to be shown on each agent launch).**<br /><br />I'd like to use "Asset ID" for this field. Click 'Submit Query' button to finish it.<br /><br />Now, you are able to log into web console from http://Ip_address/ocsreports/<br />Before you input admin/admin , you could use different languages. OCSNG 1.01 support  11 languages.<br />

<br />	
  * Setting up Agents on openSuse and a Windows Xp client.
<br /><br />Download agent packages from internet.<br /><br />Installing a Linux agent:<br />Suse:~ # tar zxf OCSNG_LINUX_AGENT_1.01.tar.gz<br />Suse:~ # cd OCSNG_LINUX_AGENT_1.01/<br /><br />Suse:~/OCSNG_LINUX_AGENT_1.01 # sh setup.sh<br /><br />+----------------------------------------------------------+<br />|                                                          |<br />| Welcome to OCS Inventory NG Agent setup !                |<br />|                                                          |<br />+----------------------------------------------------------+<br />Writing log to file /root/OCSNG_LINUX_AGENT_1.01/ocs_agent_setup.log<br /><br />+----------------------------------------------------------+<br />| Checking for previous installation...                    |<br />+----------------------------------------------------------+<br /><br />Previous installation of OCS Inventory NG agent not found<br /><br />+----------------------------------------------------------+<br />| Checking for supplied parameters...                      |<br />+----------------------------------------------------------+<br /><br />No parameter found<br />OCS Inventory NG Agent setup running in user interactive mode<br /><br />+----------------------------------------------------------+<br />| Checking for OCS Inventory NG Agent running method...    |<br />+----------------------------------------------------------+<br /><br />OCS Inventory NG Agent can be run through 2 methods:<br />- local: inventory will be generated locally to a file, without<br />interacting with Communication Server. Inventory results<br />must then be imported manually into the server through<br />Administration Console.<br />- http: Agent can connect to Communication Server and will interact<br />with it to know what is has to do (inventory, ipdiscover,<br />deployment...)<br />Which method will you use to generate the inventory ([http]/local) ?<br />OK, OCS Inventory NG agent will be running in  mode ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for OCS Inventory NG Communication Server...    |<br />+----------------------------------------------------------+<br /><br />Which host is running OCS Inventory NG Communication Server [] ?localhost<br />On which port is running OCS Inventory NG Communication Server [80] ?<br />OK, OCS Inventory NG Communication Server is running on host<br /> and port <80> ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for TAG administrative information value...     |<br />+----------------------------------------------------------+<br /><br />What is the value of TAG ([]) ?LiuZheng<br />OK, OCS Inventory NG agent will use<br /> as  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for PERL Interpreter...                         |<br />+----------------------------------------------------------+<br /><br />OK, PERL Intrepreter found at  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for C/C++ Compiler...                           |<br />+----------------------------------------------------------+<br /><br />OK, C/C++ Compiler found at  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Make utility...                             |<br />+----------------------------------------------------------+<br /><br />OK, Make utility found at  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for dmidecode binaries...                       |<br />+----------------------------------------------------------+<br /><br />Found dmidecode binaries version <2.8> at  ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Compress::Zlib PERL module...               |<br />+----------------------------------------------------------+<br /><br />OK, PERL module Compress::Zlib is available ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for XML::Simple PERL module...                  |<br />+----------------------------------------------------------+<br /><br />OK, PERL module XML::Simple is available ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Net::IP PERL module...                      |<br />+----------------------------------------------------------+<br /><br />OK, PERL module Net::IP is available ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for LWP::UserAgent PERL module...               |<br />+----------------------------------------------------------+<br /><br />OK, PERL module LWP::UserAgent is available ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Digest::MD5 PERL module...                  |<br />+----------------------------------------------------------+<br /><br />OK, PERL module Digest::MD5 is available ;-)<br /><br />+----------------------------------------------------------+<br />| Checking for Net::SSLeay PERL module...                  |<br />+----------------------------------------------------------+<br /><br />OK, PERL module Net::SSLeay is available ;-)<br /><br />+----------------------------------------------------------+<br />| Installing IPDISCOVER binary...                          |<br />+----------------------------------------------------------+<br /><br />Building IPDISCOVER version 3<br />Installing IPDISCOVER version 3 into /usr/sbin<br />OK, IPDISCOVER version 3 setup successfully ;-)<br /><br />+----------------------------------------------------------+<br />| Installing OCS Inventory NG Agent...                     |<br />+----------------------------------------------------------+<br /><br />Configuring OCS Inventory NG Agent<br />Building OCS Inventory NG Agent<br />Installing OCS Inventory NG Agent<br />Creating  OCS Inventory NG Agent symbolic link<br />OK, OCS Inventory NG Agent setup successfully ;-)<br /><br />+----------------------------------------------------------+<br />| Creating OCS Inventory NG Agent log directory...         |<br />+----------------------------------------------------------+<br /><br />Creating OCS Inventory NG Agent log directory .<br />Configuring logrotate for OCS Inventory NG Agent.<br />Writing OCS Inventory NG Agent logrotate to file<br /><br />+----------------------------------------------------------+<br />| Installing OCS Inventory NG Agent configuration files... |<br />+----------------------------------------------------------+<br /><br />Creating OCS Inventory NG Agent  configuration file<br />Creating OCS Inventory NG Agent  configuration directory<br />Writing OCS Inventory NG Agent  configuration file<br />Creating OCS Inventory NG Agent  configuration file<br />Writing OCS Inventory NG Agent  configuration file<br />OK, OCS Inventory NG Agent configuration files setup successfully ;-)<br /><br />+----------------------------------------------------------+<br />| Installing OCS Inventory NG Agent cron configuration...  |<br />+----------------------------------------------------------+<br /><br />Creating OCS Inventory NG Agent cron configuration file<br />Writing OCS Inventory NG Agent  cron configuration file<br />OK, OCS Inventory NG Agent cron configuration file setup successfully ;-)<br /><br />+----------------------------------------------------------+<br />| Lauching OCS Inventory NG Agent...                       |<br />+----------------------------------------------------------+<br /><br />OK, OCS Inventory NG Agent runs successfully ;-)<br /><br />Setup has created a log file /root/OCSNG_LINUX_AGENT_1.01/ocs_agent_setup.log. Please, save this file.<br />If you encounter error while running OCS Inventory NG Agent,<br />we can ask you to show us his content !<br /><br />Enjoy OCS Inventory NG ;-)<br /><br />Suse:~/OCSNG_LINUX_AGENT_1.01 #<br /><br />The installer will install agent and a cron job on target Linux system. The job will launch OCS Inventory NG Agent once a day under root account, that means a update will get into database every day.  Now you will see one single node in the web console.<br /><br />->Installing a Windows Agent<br />OCSNG 1.01 does not support Vista yet, so I tested it on Windows Xp/2K/2K3 and it works very well.<br />You will donwload OCSNG_WIN32_AGENT_1.01_repack.zip<br />Unzip it and run ocsagent.exe. I'd like to test a standalone version agent, it is not a service version agent.<br />Double click ocsagent.exe, then you will get a new folder C:\ocs-ng<br />Create a batch file in this folder.<br />My scan.bat file as below:<br />_________________________________________<br />OCSInventory.exe  /server:Ip_Address_of_server  /np /tag:"LiuZheng"  /hkcu  /force<br /><br />_________________________________________<br />In order to get inventory scan into database, you will double click scan.bat file. Now, you will get one more node in web console. It is a good idea to copy c:\ocs-ng folder on a USB key. Then you are able to run inventory scan on other Windows machines. If you are going to get update inventory from Windows machines, you have to install OcsAgentSetup.exe agent on them.<br /><br />If you have any issue please add a comment blow or send me a email. I could help you later if I might have any idea.<br /><br />OCSNG现在还没有中文的界面,它的代理和服务器端是支持中文的.如果你在一些中文的操作系统上做了清单扫描,扫描的某些信息在Webconsole中查看的结果可能是乱码.这时候,你可以进入浏览器的内码设置,设置成中文后,你会看到正常的中文显示.这说明它是可以支持多语言的.<br /><br />为了在做资产管理的时候对于用户比较方便,我们可以是用gpli项目. GPLI有中文界面,而且能提供流程支持.GPLI的安装和配置手册待续.<br /><br />这个安装手册用英文写,如果给您带了了不便请谅解,您有什么问题的话欢迎给我留言,谢谢观看!
