<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。"><title>使用 Elastic Stack 监控 Covid-19 疫情发展</title><link rel=canonical href=https://martinliu.cn/blog/using-elastic-stack-for-monitoring-covid-19/><link rel=stylesheet href=/scss/style.min.6cdf49b1ce11fdcb5b101472ec608dcfd7395a19af16339a150cd1a4536b6113.css><meta property='og:title' content="使用 Elastic Stack 监控 Covid-19 疫情发展"><meta property='og:description' content="本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。"><meta property='og:url' content='https://martinliu.cn/blog/using-elastic-stack-for-monitoring-covid-19/'><meta property='og:site_name' content="Martin Liu's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='elk'><meta property='article:published_time' content='2020-04-08T17:04:08+08:00'><meta property='article:modified_time' content='2024-06-25T21:44:26+08:00'><meta property='og:image' content='https://martinliu.cn/img/avatar.png'><meta name=twitter:title content="使用 Elastic Stack 监控 Covid-19 疫情发展"><meta name=twitter:description content="本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://martinliu.cn/img/avatar.png'><script async src="https://www.googletagmanager.com/gtag/js?id=G-30EQ6H78E5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-30EQ6H78E5")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_f0b419c0df6404b3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Martin Liu's Blog</a></h1><h2 class=site-description>Founder of DevOps China</h2></div></header><ol class=menu-social><li><a href=https://github.com/martinliu/ target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/liuzheng/ target=_blank title=LinkedIn rel=me><svg viewBox="0 0 32 32" width="32" height="32"><path d="M7.5 5C6.132813 5 5 6.132813 5 7.5v17C5 25.867188 6.132813 27 7.5 27h17c1.367188.0 2.5-1.132812 2.5-2.5V7.5C27 6.132813 25.867188 5 24.5 5zm0 2h17C24.785156 7 25 7.214844 25 7.5v17C25 24.785156 24.785156 25 24.5 25H7.5C7.214844 25 7 24.785156 7 24.5V7.5c0-.285156.214844-.5.5-.5zm2.9375 1.71875C9.488281 8.71875 8.71875 9.488281 8.71875 10.4375S9.488281 12.15625 10.4375 12.15625 12.15625 11.386719 12.15625 10.4375 11.386719 8.71875 10.4375 8.71875zm9.03125 4.5625c-1.433594.0-2.386719.785156000000001-2.78125 1.53125H16.625V13.5H13.8125V23H16.75V18.3125C16.75 17.074219 16.996094 15.875 18.53125 15.875c1.511719.0 1.53125 1.398438 1.53125 2.5V23H23V17.78125c0-2.554687-.542968999999999-4.5-3.53125-4.5zM9 13.5V23h2.96875V13.5z"/></svg></a></li><li><a href=https://twitter.com/martinliu target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首页</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M21 14l-3-3h-7a1 1 0 01-1-1V4a1 1 0 011-1h9a1 1 0 011 1v10"/><path d="M14 15v2a1 1 0 01-1 1H6l-3 3V11a1 1 0 011-1h2"/></svg>
<span>关于</span></a></li><li><a href=/course/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>课程</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://martinliu.cn/ selected>中文</option><option value=https://martinliu.cn/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#分析和展示丁香园数据>分析和展示丁香园数据</a><ol><li><a href=#导入数据并初始化索引>导入数据并初始化索引</a></li><li><a href=#可视化和展示数据>可视化和展示数据</a><ol><li><a href=#-从-discovery-界面中直接调用可视化视图创建>💻 从 Discovery 界面中直接调用可视化视图创建</a></li><li><a href=#-使用-visualization-的-lens-功能探索数据>💻 使用 Visualization 的 lens 功能探索数据</a></li><li><a href=#使用-tsvb-时序数据可视化构造器>使用 TSVB 时序数据可视化构造器</a></li><li><a href=#使用地图展示省级累计数据>使用地图展示省级累计数据</a></li><li><a href=#创建-dashboard-仪表板>创建 Dashboard 仪表板</a></li></ol></li></ol></li><li><a href=#世卫组织数据的处理和展示>世卫组织数据的处理和展示</a></li><li><a href=#总结>总结</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/devops/ style=background-color:#2a9d8f;color:#fff>DevOps</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/blog/using-elastic-stack-for-monitoring-covid-19/>使用 Elastic Stack 监控 Covid-19 疫情发展</a></h2><h3 class=article-subtitle>本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2020-04-08, Wednesday</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 10 分钟</time></div></footer></div></header><section class=article-content><p>代号为 COVID-19 的新型冠状病毒肺炎在全球肆虐着，剧情翻转的非常快，目前欧美已经成为了全球的重灾区。
本文介绍如何使用 Elastic Stack，实现对国内外疫情发展态势的分析。介绍一种简单易行的数据分析流程。说不定你也可以得出独到的高价值洞察。</p><p>本文使用的 Elastic Stack 版本和环境如下：</p><ul><li>Vagrant 的基础镜像 bento/centos-8</li><li>Elasticsearch 7.6.1</li><li>Kibana 7.6.1</li><li>Logstash 7.6.1</li></ul><p>关于使用 Vagrant 环境搭建 Elastic Stack 的方法，见我之前的文章。本文的数据分析处理流程图如下所示。</p><p><img src=/images/2020-04-08_17-58-31.jpeg loading=lazy></p><h2 id=分析和展示丁香园数据>分析和展示丁香园数据</h2><p>本文的目标分析数据源是 <a class=link href=https://ncov.dxy.cn/ncovh5/view/pneumonia target=_blank rel=noopener>https://ncov.dxy.cn/ncovh5/view/pneumonia</a> 这个也是我们最近一直在关注的关于中国的疫情公布平台。</p><p>丁香园网页的数据被香港大学的 Isaac Lin 同学，通过他所开发的网络爬虫抓取加工后，用 API 的形式和 csv 数据文件的形式提供了出来，他的爬虫程序和结果数据给很多目前分析疫情的人带来了很大的帮助，有不少人去他的 blog 和 github 上点赞和评论的。</p><ul><li><a class=link href=https://github.com/BlankerL/DXY-COVID-19-Data/tree/master/csv target=_blank rel=noopener>https://github.com/BlankerL/DXY-COVID-19-Data/tree/master/csv</a></li><li><a class=link href=https://lab.isaaclin.cn/nCoV/ target=_blank rel=noopener>https://lab.isaaclin.cn/nCoV/</a></li></ul><p>你可以用 Python 程序调用 Lin 同学的 API 然后在将处理后的结果写入 ES，这样的脚本可以参考 Rockybean 的这个 <a class=link href="https://www.yuque.com/elastictalk/blog/et25?from=timeline%e3%80%82%e4%b9%9f%e5%8f%af%e4%bb%a5%e7%94%a8%e4%b8%8b%e9%9d%a2%e7%9a%84%e5%91%bd%e4%bb%a4%e5%b0%86Github" target=_blank rel=noopener>https://www.yuque.com/elastictalk/blog/et25?from=timeline。也可以用下面的命令将Github</a> 的 csv 文件下载到本地，在做手工的数据分析，这样也等于是对林同学的数据内容和定义进行一次深入的探索，这也将更有益于你理解数据，方面后面使用 Kibana 做数据分析。</p><p>在本机使用 git 做数据下载和同步的命令如下。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git clone https://github.com/BlankerL/DXY-COVID-19-Data.git
</span></span><span class=line><span class=cl>cd DXY-COVID-19-Data/
</span></span><span class=line><span class=cl>git pull
</span></span></code></pre></td></tr></table></div></div><p>你也可以用用<code>git pull</code>命令在日后做数据更新，并进行后续的跟踪分析。</p><p>同步到本地的数据也可以使用 Logstash 或者是 Filebeat 持续的同步到 ES 中，这样就可以在 Kibana 上看到每日的实时更新结果。</p><h3 id=导入数据并初始化索引>导入数据并初始化索引</h3><p>本文选择了最简单直接的方式，使用 Kibana 自带的数据导入功能，手工导入丁香园的 csv 时序数据文件 <code>csv/DXYArea.csv</code>。 如下图所示。</p><p><img src=/images/2020-04-08_10-23-22.jpeg loading=lazy></p><p>这个工具是机器学习的周边工具 <code>数据可视化器</code> ，它对这份数据做了初步的分析和识别，点击导入，然后在下面点击 Advancd ，进入高级设置，如下图所示：</p><p><img src=/images/2020-04-08_10-27-15.jpeg loading=lazy></p><ul><li>可以在 index name 中可以输入<code>dxy-area-m5</code> 作为本次新建的索引名称。</li><li>然后删除默认的 Mapping 定义，输入下面的重新重定义的数据结构。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;@timestamp&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;date&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;continentEnglishName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;continentName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;countryEnglishName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;countryName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;provinceEnglishName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;provinceName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;province_confirmedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;province_curedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;province_deadCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;province_suspectedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;province_zipCode&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;cityEnglishName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;cityName&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;city_confirmedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;city_curedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;city_deadCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;city_suspectedCount&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;city_zipCode&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;integer&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;level&#34;:{
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;keyword&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;location&#34;: {
</span></span><span class=line><span class=cl>      &#34;type&#34;: &#34;geo_point&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;is_china&#34;: {
</span></span><span class=line><span class=cl>      &#34;type&#34;: &#34;boolean&#34;
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  &#34;updateTime&#34;: {
</span></span><span class=line><span class=cl>    &#34;type&#34;: &#34;date&#34;,
</span></span><span class=line><span class=cl>    &#34;format&#34;: &#34;yyyy-MM-dd HH:mm:ss&#34;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>对以上 Mapping 的简要说明：</p><ul><li>增加了字段 level, is_china 和 Location，你也可以加入你所需要的其它待用字段，所有新增无值字段都需要后期进行初始化。</li><li>level 定义了数据记录的级别为：国家、港澳台和省级。</li><li>is_china 定义了国内外数据标识</li><li>在导入后，本文使用的字段的批量初始化/维护是调用 /_update_by_query 方法，也可以是使用 ingest pipline 的方式，或者其它 Elastic Stack 中的其它替代功能。</li></ul><p>如上图所示的数据导入成功之后，点击 View index in Discovery， 我们可以使用 Kibana 的 Discovery 功能来对所导入的数据进行分析和确认，特别是一些关键字段的数值。观察这些数据的格式和内容的含义是什么。使用 filter 功能了解数据的内容和特征。建议使用下面的 filter 和组合探索一下【也可以使用 kql 语言做查询，如果用 kql 做查询的话，也可以很方便的将这些查询条件进行复用】。</p><ul><li>countryName:中国</li><li>NOT countryName:中国</li><li>countryName:中国 / provinceName:中国</li><li>countryName:中国 / NOT provinceName:中国 / cityName exists</li><li>countryName:中国 / NOT provinceName:中国 / NOT cityName exists</li><li>countryName:中国 / cityName: 境外输入</li></ul><p>以上的 / 是多个 filter 叠加的含义，可以大概的猜测出下面的结论。</p><ul><li>中国国内数据</li><li>国外数据</li><li>中国省级统计数据</li><li>中国各省的各个城市的统计数据</li><li>中国的港澳台数据</li><li>中国海关所监控到的境外输入数据</li></ul><p>为了后面使用省的名称做地图分析，这里需要查看数据中各个省英文名称，以广西为例，设置查询条件：provinceEnglishName Guangxi</p><p>现在来浏览 Elastic Map 地图服务所引用的中国各省的中英文名称和代码，查看 <a class=link href=https://maps.elastic.co/#file/china_provinces target=_blank rel=noopener>https://maps.elastic.co/#file/china_provinces</a> ；</p><p>可以发现现所导入的数据和 Elastic 地图服务的官方数据不一致。</p><p>下图是用 Excel 分析对比的结果，建议使用 Python、logstash 或者其它工具在导入的过程中对这个字段做预处理和校准。</p><p><img src=/images/2020-04-07_12-55-23.jpeg loading=lazy></p><p>本文下面描述了 Dev Tool 中运行相关的数据优化和及校准脚本。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#维护is_china字段
</span></span><span class=line><span class=cl>POST dxy-area-m5/_update_by_query
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;script&#34;:{
</span></span><span class=line><span class=cl>    &#34;lang&#34;: &#34;painless&#34;,
</span></span><span class=line><span class=cl>    &#34;source&#34;: &#34;&#34;&#34;
</span></span><span class=line><span class=cl>       if (ctx._source.countryEnglishName == &#34;China&#34;) {
</span></span><span class=line><span class=cl>         ctx._source.is_china = true;
</span></span><span class=line><span class=cl>       } else {
</span></span><span class=line><span class=cl>         ctx._source.is_china = false;
</span></span><span class=line><span class=cl>       }
</span></span><span class=line><span class=cl>    &#34;&#34;&#34;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#维护 level 字段，对于中国的数据来说，如果省的名字是中国这就是国家级的统计数据
</span></span><span class=line><span class=cl>POST dxy-area-m5/_update_by_query
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;script&#34;:{
</span></span><span class=line><span class=cl>    &#34;lang&#34;: &#34;painless&#34;,
</span></span><span class=line><span class=cl>    &#34;source&#34;: &#34;&#34;&#34;
</span></span><span class=line><span class=cl>      if(ctx._source.provinceName == ctx._source.countryName){
</span></span><span class=line><span class=cl>        ctx._source.level = &#34;country&#34;
</span></span><span class=line><span class=cl>      } else {
</span></span><span class=line><span class=cl>          if (ctx._source.cityName == null) {
</span></span><span class=line><span class=cl>            ctx._source.level = &#34;cn-hmt&#34;
</span></span><span class=line><span class=cl>          } else {
</span></span><span class=line><span class=cl>            ctx._source.level = &#34;province&#34;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>      }
</span></span><span class=line><span class=cl>    &#34;&#34;&#34;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>#更新省的名字为国际代码
</span></span><span class=line><span class=cl>POST dxy-area-m5/_update_by_query
</span></span><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;script&#34;:{
</span></span><span class=line><span class=cl>    &#34;lang&#34;: &#34;painless&#34;,
</span></span><span class=line><span class=cl>    &#34;source&#34;: &#34;&#34;&#34;
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Guangxi&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Guangxi Zhuang Autonomous Region&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Hong Kong&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;HongKong&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Macao&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Macau&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Neimenggu&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Inner Mongolia&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Ningxia&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Ningxia Hui Autonomous Region&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Taiwan&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Taiwan Province&#34;;
</span></span><span class=line><span class=cl>            ctx._source.provinceName = &#34;台湾省 (中华人民共和国)&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.provinceEnglishName == &#34;Xizang&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.provinceEnglishName = &#34;Tibet&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          if (ctx._source.cityName == &#34;境外输入人员&#34;) {
</span></span><span class=line><span class=cl>            ctx._source.cityName = &#34;境外输入&#34;;
</span></span><span class=line><span class=cl>          }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &#34;&#34;&#34;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>注意：以上的三个 POST 方法调用的对象是 <code>dxy-area-m5</code> ，这个索引的名字需要和你上面导入数据创建的索引一致。由于是手工初次处理这些数据，建议再次运行以上的一系列搜索过滤条件，确认这些目标字段和数据得到了正确的处理。</p><h3 id=可视化和展示数据>可视化和展示数据</h3><p>在分析数据就绪了以后，下面介绍一组通过 Kibana 进行数据可视化分析展示的思路和方法。</p><h4 id=-从-discovery-界面中直接调用可视化视图创建>💻 从 Discovery 界面中直接调用可视化视图创建</h4><p>在 Discovery 的查询界面里，点击左侧 fields 清单中的 provinceName，或者其它想进行可视化分析的字段，点击后即可查看其中一部分的数值分布情况，点击下面的 Visualize 按钮。就可以进入可视化编辑模式。</p><p><img src=/images/2020-04-08_11-11-13.jpeg loading=lazy></p><p>进入这个 field 的默认可视化配置模式，选择 Y 轴的指标为 province_confirmedCount 的最大值，然后在上方增加 is_china:true 和 level:province 过滤条件后，就可以得到下面的结果。</p><p><img src=/images/2020-04-08_11-09-48.jpeg loading=lazy></p><p>还可以对 Buckets 里面 X 轴的值进行调整，使用省的名字。 这样基本上得出了确诊数省排名的结果。或者你还可以调整出其它的分析结论。在分析结束后，点击左上角的 Save ，将分析组合保存下来用于后期的仪表板的制作。</p><h4 id=-使用-visualization-的-lens-功能探索数据>💻 使用 Visualization 的 lens 功能探索数据</h4><p>点击 New Visualization，选择左上角的 Lens 图标。在 CHANGE INDEX PATTERN 中选择目标的索引如：dxy-area-m5。 拖拽几个字段进入中间的显示区：continentName countryName province_confirmedCount 这些字段，也可以尝试将这些字段拖入右侧的 X 轴或者 Y 轴。</p><p><img src=/images/2020-04-08_12-35-17.jpeg loading=lazy></p><p>拖入不同的位置，图形下方的建议可视化展示风格会随之变化，Lens 功能在预判和猜测你可能会用到的展示和分析组合。感受这些建议图形所提供的数据分析的线索。</p><p><img src=/images/2020-04-08_12-59-59.jpeg loading=lazy></p><p>同样的，你也可以在上面使用过滤器和时间段选择功能，这些数据筛选条件发生变化之后，可视化的图形数据也会随之变化。</p><h4 id=使用-tsvb-时序数据可视化构造器>使用 TSVB 时序数据可视化构造器</h4><p>这个控件的功能稍微复杂一些，用下图说明它的用法。</p><p><img src=/images/2020-04-08_19-02-31.jpeg loading=lazy></p><p>如上图所示，现在 Panel Options 里面设置需要使用的数据索引，以及其他参数。</p><p><img src=/images/2020-04-08_19-08-55.jpeg loading=lazy></p><p>然后在 Data 中选择需要显示的数据指标，如上图中选择了全国累计确诊和累计治愈，两个指标。将他们放在一起更能回答这样一个问题：是否治愈的速度是足够的，如果治愈速度跟得上的话，说明医疗资源是足够用的，如果这两条线之间的落差比较大就危险了。</p><p>上方的 TSVB 图形显示了所有数值和格式调整后的预览效果。可以无限的修订知道满意为止。这个控件天然支持指标数值、排行榜、速度表、Markdown 文本和数据表。可以切换到不同的视角看它的展示效果。</p><h4 id=使用地图展示省级累计数据>使用地图展示省级累计数据</h4><p>我们可以使用已经导入的数据在地图上显示省级的累计确诊和治愈人数。过程是这样的：</p><ul><li>点击 Kibana 左侧的 Maps 图标，创建一个新的地图。</li><li>创建图层，选择 EMS Boundaries ，选择这个图层所使用的基础地图为 China Provinces</li><li>点击 Add layer 按钮</li><li>在图层配置里输入图层名称缩放级别，透明度的设置</li><li>设置 Tooltip fields 的设置中增加 name(zh) ,中文的省名称</li><li>设置 Term Joins 的规则，点击 Join 关键字，设置索引中的数据和地图的关联。如下图所示，这就是我们为什么要把导入数据中的省英文名称与 EMS 的定义数据对齐了。</li></ul><p><img src=/images/2020-04-08_21-30-40.jpeg loading=lazy></p><ul><li>点击 and use metrics 设置在每个省上显示的数据。如下图所示。</li></ul><p><img src=/images/2020-04-08_21-31-05.jpeg loading=lazy></p><ul><li>最后设置 Layer Style， 将 Fill color 填色设置为 By Value， 选择省累计确诊，下面的颜色可以选择白色到深红的过度。</li><li>最后点击 Save & close 按钮。</li></ul><p>这里的技术点在于：Elastic 地图中的基础数据（地理名称代码）必须和目标索引中的相关字段能够匹配上（join）上，然后才能将索引中的实际做聚合运算的字段根据地理名称进行处理，例如根据数值的大小，将各个省填充成不同的颜色，用 tooltips 显示这个省的数据信息。</p><h4 id=创建-dashboard-仪表板>创建 Dashboard 仪表板</h4><p>上面所设计的所有的图示和地图都是创建 Dashboard 的素材，等做了一些素材之后就可以做仪表板了。这个过程就是在空白的仪表板上逐渐加入合适的图表，然后不断调整图表布局的过程，然后呈现出一个阶段性的效果。如下图所示。</p><p><img src=/images/2020-04-08_13-44-03.jpeg loading=lazy></p><h2 id=世卫组织数据的处理和展示>世卫组织数据的处理和展示</h2><p>浏览世卫组织的数据 <a class=link href=https://github.com/CSSEGISandData/COVID-19 target=_blank rel=noopener>https://github.com/CSSEGISandData/COVID-19</a></p><p>基于以上数据可以制作一个如下的仪表板：</p><p><img src=/images/2020-04-08_13-44-40.jpeg loading=lazy></p><p>这个仪表板中的地图是亮点，建议仔细学习研究一下。 这个仪表板的来源是一篇国外的文章： <a class=link href=https://www.siscale.com/importing-covid-19-data-into-elasticsearch/ target=_blank rel=noopener>https://www.siscale.com/importing-covid-19-data-into-elasticsearch/</a></p><p>我在一个小时左右，根据经验顺利的在我的实验环境里顺利生成了这个成果。下面是根据这篇文章怎么样使用 logstash 导入 Github 中世卫组织发布的数据，并持续与之保持同步。这里是他们的代码：<a class=link href=https://github.com/siscale/covid-19-elk target=_blank rel=noopener>https://github.com/siscale/covid-19-elk</a></p><p>下面描述如何使用这份代码。首先你需要有一个安装好的切正常运行的 Elasticsearch 7.6.1 服务器，一个可以正常使用的 Kibana 7.6.1 服务器。在此基础之上，安装 logstash 服务器，修改并放好 logstash 的配置文件。 在 Kibana 的 Dev Tool 中导入索引的 Mapping。启动 logstash 服务器，等待和确认数据的传入。导入 Kibana 的相关对象。浏览查看和确认 siscale （国外一家 Elastic 的合作伙伴公司） 的作品。理解每个可视化展示控件的设计细节。</p><p>你可以参考下面的安装步骤和注意事项。</p><ul><li>登录 Kibana，进入 Dev Tool 中，将文件 index-template-mapping.json 中的内容复制进去并点击执行按钮。</li><li>安装 Logstash 7.6.1</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>yum install java-11-openjdk-11.0.6.10-0.el8_1.x86_64
</span></span><span class=line><span class=cl>rpm -ivh logstash-7.6.1.rpm
</span></span></code></pre></td></tr></table></div></div><ul><li>将配置文件中的 /etc/logstash/covid-19-hashes.json 修改为 /usr/share/logstash/covid-19-hashes.json 然后把它们复制到 logstash 的配置目录中</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cp logstash-github-covid-19-daily-reports-template.conf  logstash-github-covid-19-time-series-template.conf  /etc/logstash/conf.d/
</span></span></code></pre></td></tr></table></div></div><ul><li>确保你的虚拟机（测试环境和 github 以及其他的国外基本正常的情况下）网络正常的情况下，启动 logstash 服务并且关注该服务的日志信息</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>systemctl</span> <span class=n>start</span> <span class=n>logstash</span>
</span></span><span class=line><span class=cl><span class=n>sudo</span> <span class=n>tail</span> <span class=o>-</span><span class=n>f</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=nb>log</span><span class=o>/</span><span class=n>logstash</span><span class=o>/</span><span class=n>logstash</span><span class=o>-</span><span class=n>plain</span><span class=o>.</span><span class=n>log</span>
</span></span></code></pre></td></tr></table></div></div><p>PS:在日志中可以看到 logstash 完全正常的启动成功，或者看到报错，这时候就需要停止 logstash 服务，并进行调整。直到服务彻底运行成功不报错。</p><p>在 logstash 服务正常运行的情况下，世卫组织的数据是会被正常的导入到 ES 中的，你可以在 Discovery 中查看如下的查询结果。那么恭喜你，你已经和世卫组织的数据保持实时同步了。</p><p><img src=/images/2020-04-08_22-05-06.jpeg loading=lazy></p><p>最后是导入该项目的仪表板对象。操作步骤参考：登录 kibana， 进入管理， 点击 Kibana 下面的 saved objeces ； 点击 import 按钮。选择 kibana-7.6.1-covid-19-dashboard.ndjson ，然后即可浏览名为 COVID 19 的仪表板了。导入后在 Kibana 的仪表板清单中选择查看名为 “COCID 19” 的仪表板。预祝你能看到和我相同的结果，建议仔细查看他们的地图设计，做的是非常的细致，如下图所示，它是三个图层叠加的显示效果。</p><p><img src=/images/2020-04-08_23-34-36.jpeg loading=lazy></p><h2 id=总结>总结</h2><p>最后希望你通过本文已经成功的展示出了以上的预期结果。下面简单总结一下相关知识点。</p><ul><li>对陌生数据集的首次探索可以是手动导入 csv 文件的手动过程</li><li>在导入的过程中需要做适当的 field mapping 的调整，和扩展，让后期的查询和数据分析更加清晰</li><li>对导入后的数据，充分利用 Discovery 的查询和分析能力，确定好数据校准和调优的更新策略</li><li>充分利用 ES 的批量查询修改 API，可以轻松快捷的实现数据修订。</li><li>地图的使用重点在地理信息代码和数据索引中的实际 field 的 join，因此需要特别设计和维护 join 的字段，确保他们的精确性。</li><li>仪表板的制作和设计依赖于各种图标的设计</li></ul><p>Elastic Stack 在本案例中得到了充分而综合的运用。从 E 到 L 到 K 一个都不能少。建议大家能平衡掌握这个技术栈的各种技术能力，补足不太擅长的部分。</p><p>本文参考的网址如下：</p><ul><li><a class=link href=https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6 target=_blank rel=noopener>https://gisanddata.maps.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6</a></li><li><a class=link href=http://covid.surge.sh/ target=_blank rel=noopener>http://covid.surge.sh/</a></li><li><a class=link href=https://informationisbeautiful.net/visualizations/covid-19-coronavirus-infographic-datapack/ target=_blank rel=noopener>https://informationisbeautiful.net/visualizations/covid-19-coronavirus-infographic-datapack/</a></li><li><a class=link href=https://ncov.dxy.cn/ncovh5/view/pneumonia target=_blank rel=noopener>https://ncov.dxy.cn/ncovh5/view/pneumonia</a></li><li><a class=link href=https://github.com/CSSEGISandData/COVID-19 target=_blank rel=noopener>https://github.com/CSSEGISandData/COVID-19</a></li><li><a class=link href=https://lab.isaaclin.cn/nCoV/ target=_blank rel=noopener>https://lab.isaaclin.cn/nCoV/</a></li><li><a class=link href=https://github.com/siscale/covid-19-elk target=_blank rel=noopener>https://github.com/siscale/covid-19-elk</a></li><li><a class=link href=https://www.mapbox.cn/coronavirusmap/#3.35/28.47/109.74 target=_blank rel=noopener>https://www.mapbox.cn/coronavirusmap/#3.35/28.47/109.74</a></li><li><a class=link href=https://ncov.deepeye.tech/ target=_blank rel=noopener>https://ncov.deepeye.tech/</a></li><li><a class=link href=https://www.siscale.com/importing-covid-19-data-into-elasticsearch/ target=_blank rel=noopener>https://www.siscale.com/importing-covid-19-data-into-elasticsearch/</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/elk/>Elk</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>署名-非商业性使用-禁止演绎 4.0 (CC BY-NC-ND 4.0)</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>最后更新于 2024-06-25 21:44 CST</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/blog/getting-start-elastic-app-search/><div class=article-image><img src=/images/abstract-1.jpg loading=lazy data-key=getting-start-elastic-app-search data-hash=/images/abstract-1.jpg></div><div class=article-details><h2 class=article-title>随心所欲的为应用无痛添加搜索功能</h2></div></a></article><article class=has-image><a href=/blog/7-hidden-pains-every-devops-engineer-faces/><div class=article-image><img src=/blog/7-hidden-pains-every-devops-engineer-faces/1_jBaUuJtCdz0DTwlD0JF9dw.7916473ccc2b47fc1f232c49bc9e1142_hu_adbb3450d74e1a8d.jpeg width=250 height=150 loading=lazy alt="Featured image of post DevOps 的七个隐形痛点（以及五个靠谱解法）" data-key=7-hidden-pains-every-devops-engineer-faces data-hash="md5-eRZHPMwrR/wfIyxJvJ4RQg=="></div><div class=article-details><h2 class=article-title>DevOps 的七个隐形痛点（以及五个靠谱解法）</h2></div></a></article><article class=has-image><a href=/blog/i-made-my-python-code-10x-faster-using-these/><div class=article-image><img src=/blog/i-made-my-python-code-10x-faster-using-these/1_JtvDNgonwDl8sRlYYW69kA.8c6c98637af945771277514f0c8fe1ba_hu_946e864b2af62a4d.webp width=250 height=150 loading=lazy alt="Featured image of post 用这些鲜为人知（且大多数开发者都忽略）的技巧，让你的 Python 代码提速 10 倍" data-key=i-made-my-python-code-10x-faster-using-these data-hash="md5-jGyYY3r5RXcSd1FPDI/hug=="></div><div class=article-details><h2 class=article-title>用这些鲜为人知（且大多数开发者都忽略）的技巧，让你的 Python 代码提速 10 倍</h2></div></a></article><article class=has-image><a href=/blog/devops-wasnt-my-problem-nobody-just-knew-i-existed/><div class=article-image><img src=/blog/devops-wasnt-my-problem-nobody-just-knew-i-existed/1_3vFTMBRkvLlFBa3v3VukRA.5a019ac512d88b5040d5ef97304095d0_hu_48707a40a27ead6a.webp width=250 height=150 loading=lazy alt="Featured image of post 技能不是问题，可见性才是关键 —— 我的 DevOps 职场经验分享" data-key=devops-wasnt-my-problem-nobody-just-knew-i-existed data-hash="md5-WgGaxRLYi1BA1e+XMECV0A=="></div><div class=article-details><h2 class=article-title>技能不是问题，可见性才是关键 —— 我的 DevOps 职场经验分享</h2></div></a></article><article class=has-image><a href=/blog/two-mindset-shifts-that-changed-everything-for-me/><div class=article-image><img src=/blog/two-mindset-shifts-that-changed-everything-for-me/1_7OnOS2Hlt5vIKFVozBhN-g.fa722c5ba6b5a1c8b9b75481c4549366_hu_6ae6ef5dab825268.webp width=250 height=150 loading=lazy alt="Featured image of post 在 DevOps 实践中的两次思维转变，彻底改变了我" data-key=two-mindset-shifts-that-changed-everything-for-me data-hash="md5-+nIsW6a1oci5t1SBxFSTZg=="></div><div class=article-details><h2 class=article-title>在 DevOps 实践中的两次思维转变，彻底改变了我</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//martinliu.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2007 -
2025 Martin Liu's Blog</section><section class=powerby>本博客始于 2007 年<br>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>